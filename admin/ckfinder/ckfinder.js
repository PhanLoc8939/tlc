!function(){function b(b){return a.instances[b]}function d(b){var c=this;c.id=b.name;var d=b.element.getDocument().getWindow().$,e=a.oC.getWindow().$;c.inPopup=!(!d||!d.opener),c.inIframe=!c.inPopup&&d!=e.top&&"iframe"==d.frameElement.nodeName.toLowerCase(),c.inFrame=!c.inPopup&&d!=e.top&&"frame"==d.frameElement.nodeName.toLowerCase(),c.inUrlPopup=!(!c.inPopup||!e.opener)}function e(a,b,c){b.on("appReady",function(d){d.removeListener(),a.document=b.document.$,a.folders=b.folders,a.files=b.ld["filesview.filesview"].data().files,a.basketFiles=b.basketFiles,a.resourceTypes=b.resourceTypes,a.connector=b.connector,a.lang=b.lang,a.langCode=b.langCode,a.config=b.config,b.ld["foldertree.foldertree"].on("afterAddFolder",function(b){b.removeListener(),c&&c(a)},a)},a,null,999)}var a=function(){var a={jY:"E7F823V",_:{},status:"unloaded",basePath:function(){var a=window.CKFINDER_BASEPATH||"";if(!a)for(var b=document.getElementsByTagName("script"),c=0;c<b.length;c++){var d=b[c].src.match(/(^|.*[\\\/])CKFINDER(?:_basic)?(?:_v2)?(?:_source)?.js(?:\?.*)?$/i);if(d){a=d[1];break}}return-1==a.indexOf("://")&&(a=0===a.indexOf("/")?location.href.match(/^.*?:\/\/[^\/]*/)[0]+a:location.href.match(/^[^\?]*\/(?:)/)[0]+a),a}(),getUrl:function(a){return-1==a.indexOf("://")&&0!==a.indexOf("/")&&(a=this.basePath+a),this.jY&&"/"!=a.charAt(a.length-1)&&(a+=(a.indexOf("?")>=0?"&":"?")+"t="+this.jY),a}},b=window.CKFINDER_GETURL;if(b){var c=a.getUrl;a.getUrl=function(d){return b.call(a,d)||c.call(a,d)}}return a}(),c={callback:1,selectThumbnailActionFunction:1,selectActionFunction:1};if(a.jd=function(){var a=this,b={};for(var d in a)a.hasOwnProperty(d)&&("function"==typeof a[d]&&!c[d]||void 0===a[d]||(b[d]=a[d]));return a.callback&&(b.callback=a.callback),b},a.lj=function(a){var b=this;a=a||b.basePath;var c="";a&&0!==a.length||(a=CKFinder.DEFAULT_basePath),"/"!=a.substr(a.length-1,1)&&(a+="/"),a+="ckfinder.html";var d;return b.hh&&(d=b.hh,"function"==typeof d&&(d=d.toString().match(/function ([^(]+)/)[1]),c+="?action=js&amp;func="+d),b.jx&&(c+=c?"&amp;":"?",c+="data="+encodeURIComponent(b.jx)),b.disableThumbnailSelection?(c+=c?"&amp;":"?",c+="dts=1"):(b.lH||b.hh)&&(d=b.lH||b.hh,"function"==typeof d&&(d=d.toString().match(/function ([^(]+)/)[1]),c+=c?"&amp;":"?",c+="thumbFunc="+d,b.nm?c+="&amp;tdata="+encodeURIComponent(b.nm):!b.lH&&b.jx&&(c+="&amp;tdata="+encodeURIComponent(b.jx))),b.startupPath&&(c+=c?"&amp;":"?",c+="start="+encodeURIComponent(b.startupPath+(b.startupFolderExpanded?":1":":0"))),void 0===b.rememberLastFolder||b.rememberLastFolder||(c+=c?"&amp;":"?",c+="rlf=0"),b.id&&(c+=c?"&amp;":"?",c+="id="+encodeURIComponent(b.id)),b.skin&&(c+=c?"&amp;":"?",c+="skin="+encodeURIComponent(b.skin)),a+c},d.prototype={_:{},addFileContextMenuOption:function(c,d,e){var f=b(this.id),g="FileContextMenu_"+c.command;f.bD(g,{exec:function(a){var b=a.ld["filesview.filesview"].tools.dH();d(a.cg,b)}}),c.command=g,c.group||(c.group="file1"),f.gp(g,c),f.ld["filesview.filesview"].on("beforeContextMenu",function(c){if(e){var d=e(this.tools.dH());d&&(c.data.bj[g]=-1==d?a.aY:a.aS)}else c.data.bj[g]=a.aS})},disableFileContextMenuOption:function(a,c){var d=b(this.id),e=c?"FileContextMenu_"+a:a,f=function(b){delete b.data.bj[e]};return d.ld["filesview.filesview"].on("beforeContextMenu",f),function(){d.ld["filesview.filesview"].removeListener("beforeContextMenu",f)}},addFolderContextMenuOption:function(c,d,e){var f=b(this.id),g="FolderContextMenu_"+c.command;f.bD(g,{exec:function(a){d(a.cg,a.aV)}}),c.command=g,c.group||(c.group="folder1"),f.gp(g,c),f.ld["foldertree.foldertree"].on("beforeContextMenu",function(c){if(e){var d=e(this.app.aV);d&&(c.data.bj[g]=-1==d?a.aY:a.aS)}else c.data.bj[g]=a.aS})},disableFolderContextMenuOption:function(a,c){var d=b(this.id),e=c?"FolderContextMenu_"+a:a,f=function(b){delete b.data.bj[e]};return d.ld["foldertree.foldertree"].on("beforeContextMenu",f),function(){d.ld["foldertree.foldertree"].removeListener("beforeContextMenu",f)}},addFolderDropMenuOption:function(c,d,e){var f=b(this.id),g="FolderDropMenu_"+c.command;f.bD(g,{exec:function(a){d(a.cg,a.cK.oa())}}),c.command=g;var h=new a.iD(f,g,c);f.ld["foldertree.foldertree"].on("beforeDropMenu",function(b){(e?e.call(f.cg,b.data.folder):1)&&(b.data.iG[g]=h)})},disableFolderDropMenuOption:function(a,c){var d=b(this.id),e=c?"FolderDropMenu_"+a:a,f=function(b){delete b.data.iG[e]};return d.ld["foldertree.foldertree"].on("beforeDropMenu",f),function(){d.ld["foldertree.foldertree"].removeListener("beforeDropMenu",f)}},getSelectedFile:function(){return b(this.id).ld["filesview.filesview"].tools.dH()},getSelectedFiles:function(){return b(this.id).ld["filesview.filesview"].tools.oO()},getSelectedFolder:function(){return b(this.id).aV},filterFiles:function(a){b(this.id).ld["filesview.filesview"].oW("requestRenderFiles",{lookup:a})},setUiColor:function(a){return b(this.id).setUiColor(a)},destroy:function(a){b(this.id).destroy(),a&&a()},openDialog:function(c,d){var e=this,f=new a.dom.document(window.document).getHead();b(e.id).document.getWindow();return(e.inFrame||e.inPopup||e.inIframe)&&(a.document=b(e.id).document),b(e.id).openDialog(c,d,f)},openMsgDialog:function(a,c){b(this.id).msgDialog(a,c)},openConfirmDialog:function(a,c,d){b(this.id).fe(a,c,d)},openInputDialog:function(a,c,d,e){b(this.id).hs(a,c,d,e)},openSkippedFilesDialog:function(a,c,d,e){b(this.id).skippedFilesDialog(a,c,d,e)},addTool:function(a){return b(this.id).plugins.tools.addTool(a)},addToolPanel:function(a){return b(this.id).plugins.tools.addToolPanel(a)},removeTool:function(a){b(this.id).plugins.tools.removeTool(a)},showTool:function(a){b(this.id).plugins.tools.showTool(a)},hideTool:function(a){b(this.id).plugins.tools.hideTool(a)},getResourceType:function(a){return b(this.id).getResourceType(a)},log:function(b){a.log.apply(a.log,arguments)},getLog:function(){return a.mZ()},emptyBasket:function(){b(this.id).execCommand("TruncateBasket")},replaceUploadForm:function(c,d,e,f){var g=b(this.id);if(f||(f=10),!(f>=(g.dC||20)))return g.dC=f,g.ld["formpanel.formpanel"].on("beforeUploadFileForm",function(b){if(2==b.data.step&&!(f>g.dC)){b.cancel(!0);var h=this.data();b.data.folder;try{"upload"==h.dc?this.oW("requestUnloadForm",function(){this.app.cS("upload").bR(a.aS)}):(this.data().dc&&this.oW("requestUnloadForm"),e||this.eh.removeClass("show_border"),this.oW("requestLoadForm",{html:c,command:"upload"}),d&&d())}catch(c){throw this.oW("failedUploadFileForm",b.data),this.oW("afterUploadFileForm",b.data),a.ba(c)}}}),{hide:function(){g.oW("requestUnloadForm",function(){g.cS("upload").bR(a.aS)})}}},resizeFormPanel:function(a){var c=b(this.id);if(void 0===a)c.document.getById("panel_view").setStyle("height",""),c.document.getById("panel_widget").setStyle("height","");else{var d=Math.min(a,Math.max(90,c.document.getById("main_container").$.offsetHeight-300));c.document.getById("panel_view").setStyle("height",d+"px"),c.document.getById("panel_widget").setStyle("height",d-3+"px")}c.layout.ea(!0)},refreshOpenedFolder:function(){var a=b(this.id),c=a.ld["filesview.filesview"].tools.currentFolder();a.oW("requestSelectFolder",{folder:c})},selectFile:function(a){b(this.id).oW("requestSelectFile",{file:a,scrollTo:1})},closePopup:function(){this.inPopup&&b(this.id).element.getDocument().getWindow().$.close()},openFolder:function(a,c){var d=b(this.id);c=c.replace(/\/$/,""),a=a.toLowerCase();for(var e=0;e<d.folders.length;e++){var f=d.folders[e];if(f.getPath().replace(/\/$/,"")==c&&a==f.type.toLowerCase())return d.oW("requestSelectFolder",{folder:f}),void d.oW("requestShowFolderFiles",{folder:f})}},setUiColor:function(a){b(this.id).setUiColor(a)},execCommand:function(a){b(this.id).execCommand(a)}},function(){function b(a){for(var b=1;CKFinder._.instanceConfig[b];)b++;return CKFinder._.instanceConfig[b]=a,b}window.CKFinder=function(a,b){if(a)for(var c in a)a.hasOwnProperty(c)&&("function"==typeof a[c]&&"callback"!=c||(this[c]=a[c]));this.callback=b},CKFinder.prototype={create:function(b){var c="ckf"+Math.random().toString().substr(2,9);document.write('<span id="'+c+'"></span>'),b=a.tools.extend(a.jd.call(this),b,!0);var d=a.replace(c,b,CKFinder);return this.api=d.cg,d.cg},appendTo:function(b,c){c=a.tools.extend(a.jd.call(this),c,!0);var d=a.appendTo(b,c,CKFinder);return this.api=d.cg,d.cg},replace:function(b,c){c=a.tools.extend(a.jd.call(this),c,!0);var d=a.replace(b,c,CKFinder);return this.api=d.cg,d.cg},popup:function(b,c){var d=this;b=b||"80%",c=c||"70%","string"==typeof b&&b.length>1&&"%"==b.substr(b.length-1,1)&&(b=parseInt(window.screen.width*parseInt(b,10)/100,10)),"string"==typeof c&&c.length>1&&"%"==c.substr(c.length-1,1)&&(c=parseInt(window.screen.height*parseInt(c,10)/100,10)),b<200&&(b=200),c<200&&(c=200);var e=parseInt((window.screen.height-c)/2,10),f=parseInt((window.screen.width-b)/2,10),g="location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,width="+b+",height="+c+",top="+e+",left="+f,h=a.env.webkit?"about:blank":"",i=window.open(h,"CKFinderpopup",g,!0);if(!i)return!1;d.width=d.height="100%";var k=new a.dom.document(i.document);k.$.open(),a.env.isCustomDomain()&&(k.$.domain=window.document.domain),k.$.write('<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html><head><title>CKFinder 2</title><style type="text/css">body, html, iframe, #ckfinder { margin: 0; padding: 0; border: 0; width: 100%; height: 100%; overflow: hidden; }</style></head><body></body></html>'),k.$.close();try{return-1==navigator.userAgent.toLowerCase().indexOf(" chrome/")&&(i.moveTo(f,e),i.resizeTo(b,c)),i.focus(),d.appendTo(k.bH())}catch(a){return d.appendTo(k.bH())}return!1}},CKFinder._={},CKFinder._.instanceConfig=[],CKFinder.lang={},CKFinder.version="2.4.2",CKFinder.revision="2731",CKFinder.addPlugin=function(b,c,d){var e={bM:d||[]};"function"==typeof c&&(c={appReady:c});for(var f in c)c.hasOwnProperty(f)&&"connectorInitialized"!=f&&"uiReady"!=f&&(e[f]=c[f]);e.bz=function(a){if(a.config.readOnly&&!1===e.readOnly)return null;c.connectorInitialized&&a.on("connectorInitialized",function(b){var d=c.connectorInitialized;d&&d.call(d,a.cg,b.data.xml)},null,null,1e3),c.connectorResponse&&a.on("connectorResponse",function(b){var d=c.connectorResponse;d&&d.call(d,a.cg,b.data.xml)}),c.galleryCallback&&a.on("launchGallery",function(b){var d=c.galleryCallback;d&&(b.data.bx=d.call(d,a.cg,b.data.selected,b.data.files))}),c.uiReady&&a.on("uiReady",function(){var b=c.uiReady;b.call(b,a.cg)},null,null,1e3),c.appReady&&a.on("appReady",function(){var b=c.appReady;b.call(b,a.cg)},null,null,1e3)},a.plugins.add(b,e)},CKFinder.getPluginPath=function(b){return a.plugins.getPath(b)},CKFinder.addExternalPlugin=function(b,c,d){a.plugins.tR(b,c,d)},CKFinder.setPluginLang=function(b,c,d){a.plugins.rX(b,c,d)},CKFinder.dialog={add:function(b,c){"function"==typeof c&&(c=a.tools.override(c,function(a){return function(b){return a(b.cg)}})),a.dialog.add(b,c)}},CKFinder.tools={},CKFinder.env={},CKFinder.dom={},CKFinder.create=function(a,b,c,d,e){var f;if(null!==a&&"object"==typeof a){f=new CKFinder;for(var g in a)f[g]=a[g]}else f=new CKFinder,f.basePath=a,b&&(f.width=b),c&&(f.height=b),d&&(f.selectActionFunction=d),e&&(f.callback=e);return f.create()},CKFinder.popup=function(a,b,c,d,e){var f;if(null!==a&&"object"==typeof a){f=new CKFinder;for(var g in a)f[g]=a[g]}else f=new CKFinder,f.basePath=a,d&&(f.selectActionFunction=d),e&&(f.callback=e);return f.popup(b,c)},CKFinder.setupFCKeditor=function(c,d,e,f){var g,h;if(null!==d&&"object"==typeof d){h=b(d),g=new CKFinder;for(var i in d)if(g[i]=d[i],"width"==i){var j=g[i]||800;"string"==typeof j&&j.length>1&&"%"==j.substr(j.length-1,1)&&(j=parseInt(window.screen.width*parseInt(j,10)/100,10)),c.Config.LinkBrowserWindowWidth=j,c.Config.ImageBrowserWindowWidth=j,c.Config.FlashBrowserWindowWidth=j}else if("height"==i){var k=g[i]||600;"string"==typeof k&&k.length>1&&"%"==k.substr(k.length-1,1)&&(k=parseInt(window.screen.height*parseInt(k,10)/100,10)),c.Config.LinkBrowserWindowHeight=k,c.Config.ImageBrowserWindowHeight=k,c.Config.FlashBrowserWindowHeight=k}}else g=new CKFinder,g.basePath=d;var l=g.basePath;"/"!=l.substr(0,1)&&-1==l.indexOf("://")&&(l=document.location.pathname.substring(0,document.location.pathname.lastIndexOf("/")+1)+l),l=a.lj.call(g,l);var m=-1!==l.indexOf("?")?"&":"?";h&&(l+=m+"configId="+h,m="&"),c.Config.LinkBrowserURL=l,c.Config.ImageBrowserURL=l+m+"type="+(e||"Images"),c.Config.FlashBrowserURL=l+m+"type="+(f||"Flash");var n=l.substring(0,1+l.lastIndexOf("/"));c.Config.LinkUploadURL=n+"core/connector/"+CKFinder.config.connectorLanguage+"/connector."+CKFinder.config.connectorLanguage+"?command=QuickUpload&type=Files",c.Config.ImageUploadURL=n+"core/connector/"+CKFinder.config.connectorLanguage+"/connector."+CKFinder.config.connectorLanguage+"?command=QuickUpload&type="+(e||"Images"),c.Config.FlashUploadURL=n+"core/connector/"+CKFinder.config.connectorLanguage+"/connector."+CKFinder.config.connectorLanguage+"?command=QuickUpload&type="+(f||"Flash")},CKFinder.setupCKEditor=function(c,d,e,f){if(null===c){for(var g in CKEDITOR.instances)CKFinder.setupCKEditor(CKEDITOR.instances[g],d,e,f);return void CKEDITOR.on("instanceCreated",function(a){CKFinder.setupCKEditor(a.editor,d,e,f)})}var h,i;if(null!==d&&"object"==typeof d){i=b(d),h=new CKFinder;for(var j in d)if(h[j]=d[j],"width"==j){var k=h[j]||800;"string"==typeof k&&k.length>1&&"%"==k.substr(k.length-1,1)&&(k=parseInt(window.screen.width*parseInt(k,10)/100,10)),c.config.filebrowserWindowWidth=k}else if("height"==j){var l=h[j]||600;"string"==typeof l&&l.length>1&&"%"==l.substr(l.length-1,1)&&(l=parseInt(window.screen.height*parseInt(l,10)/100,10)),c.config.filebrowserWindowHeight=l}}else h=new CKFinder,h.basePath=d;var m=h.basePath;"/"!=m.substr(0,1)&&-1==m.indexOf("://")&&(m=document.location.pathname.substring(0,document.location.pathname.lastIndexOf("/")+1)+m),m=a.lj.call(h,m);var n=-1!==m.indexOf("?")?"&":"?";i&&(m+=n+"configId="+i,n="&"),c.config.filebrowserBrowseUrl=m,c.config.filebrowserImageBrowseUrl=m+n+"type="+(e||"Images"),c.config.filebrowserFlashBrowseUrl=m+n+"type="+(f||"Flash");var o=m.substring(0,1+m.lastIndexOf("/"));c.config.filebrowserUploadUrl=o+"core/connector/"+CKFinder.config.connectorLanguage+"/connector."+CKFinder.config.connectorLanguage+"?command=QuickUpload&type=Files",c.config.filebrowserImageUploadUrl=o+"core/connector/"+CKFinder.config.connectorLanguage+"/connector."+CKFinder.config.connectorLanguage+"?command=QuickUpload&type="+(e||"Images"),c.config.filebrowserFlashUploadUrl=o+"core/connector/"+CKFinder.config.connectorLanguage+"/connector."+CKFinder.config.connectorLanguage+"?command=QuickUpload&type="+(f||"Flash")}}(),a.event||(a.event=function(){},a.event.du=function(b,c){var d=a.event.prototype;for(var e in d)void 0==b[e]&&(b[e]=d[e])},a.event.prototype=function(){var b=function(a){var b=a.kk&&a.kk()||a._||(a._={});return b.cC||(b.cC={})},c=function(a){this.name=a,this.dF=[]};return c.prototype={mi:function(a){for(var b=0,c=this.dF;b<c.length;b++)if(c[b].fn==a)return b;return-1}},{on:function(a,d,e,f,g){var h=b(this),i=h[a]||(h[a]=new c(a));if(i.mi(d)<0){var j=i.dF;e||(e=this),isNaN(g)&&(g=10);var k=this,l=function(b,c,g,h){var i={name:a,jN:this,application:b,data:c,jO:f,stop:g,cancel:h,removeListener:function(){k.removeListener(a,d)}};return d.call(e,i),i.data};l.fn=d,l.nT=g;for(var m=j.length-1;m>=0;m--)if(j[m].nT<=g)return void j.splice(m+1,0,l);j.unshift(l)}},oW:function(){var c=!1,d=function(){c=!0},e=!1,f=function(a){e=!a||2};return function(h,i,j,k){"function"==typeof i?(k=i,i=null):"function"==typeof j&&(k=j,j=null),"mousemove"!=h&&a.log("[EVENT] "+h,i,k);var l=b(this)[h],m=c,n=e;if(c=e=!1,l){var o=l.dF;if(o.length){o=o.slice(0);for(var p=0;p<o.length;p++){var q=o[p].call(this,j,i,d,f);if(void 0!==q&&(i=q),c||e&&2!=e)break}}}var r=e||void 0!==i&&(i&&void 0!==i.result?i.result:i);return"function"==typeof k&&2!=e&&(r=k.call(this,e,i)||r),c=m,e=n,r}}(),cr:function(a,c,d){var e=this.oW(a,c,d);return delete b(this)[a],e},removeListener:function(a,c){var d=b(this)[a];if(d){var e=d.mi(c);e>=0&&d.dF.splice(e,1)}},mF:function(){for(var a=b(this),c=0;c<a.length;c++)a[c].dF=[]},rC:function(a){var c=b(this)[a];return c&&c.dF.length>0}}}()),a.application||(a.kZ=0,a.fc=1,a.qE=2,a.application=function(b,c,d,e){var f=this;f._={instanceConfig:b,element:c},f.ff=d||a.kZ,a.event.call(f),f.iI(e)},a.application.replace=function(b,c,d){var e=b;if("object"!=typeof e){if(!(e=document.getElementById(b)))for(var f=0,g=document.getElementsByName(b);(e=g[f++])&&"textarea"!=e.tagName.toLowerCase(););if(!e)throw'[CKFINDER.application.replace] The element with id or name "'+b+'" was not found.'}return new a.application(c,e,a.fc,d)},a.application.appendTo=function(b,c,d){if("object"!=typeof b&&!(b=document.getElementById(b)))throw'[CKFINDER.application.appendTo] The element with id "'+b+'" was not found.';return new a.application(c,b,a.qE,d)},a.application.prototype={iI:function(){(a.application.eb||(a.application.eb=[])).push(this)},oW:function(b,c,d){return a.event.prototype.oW.call(this,b,c,this,d)},cr:function(b,c,d){return a.event.prototype.cr.call(this,b,c,this,d)}},a.event.du(a.application.prototype,!0)),!a.env){var f=/rv:([\d\.]+)/,g=/trident\/([\d]+)/;a.env=function(){var a=navigator.userAgent.toLowerCase(),b=window.opera,c={ie:!1,iemodern:!1,opera:!!b&&b.version,webkit:a.indexOf(" applewebkit/")>-1,air:a.indexOf(" adobeair/")>-1,mac:a.indexOf("macintosh")>-1,quirks:"BackCompat"==document.compatMode,isCustomDomain:function(){return this.ie&&document.domain!=window.location.hostname}};c.gecko="Gecko"==navigator.product&&!c.webkit&&!c.opera,c.chrome=!1,c.safari=!1,c.webkit&&(a.indexOf(" chrome/")>-1?c.chrome=!0:c.safari=!0);var d=0;if(c.ie&&(d=parseFloat(a.match(/msie (\d+)/)[1]),c.ie8=!!document.documentMode,c.ie8Compat=8==document.documentMode,c.ie7Compat=7==d&&!document.documentMode||7==document.documentMode,c.ie6Compat=d<7||c.quirks),c.gecko){var e=a.match(f);e&&(e=e[1].split("."),d=1e4*e[0]+100*(e[1]||0)+ +(e[2]||0)),g.test(a)?(c.gecko=!1,c.iemodern=!0):c.isMobile=a.indexOf("fennec")>-1}return c.opera&&(d=parseFloat(b.version()),c.isMobile=a.indexOf("opera mobi")>-1),c.air&&(d=parseFloat(a.match(/ adobeair\/(\d+)/)[1])),c.webkit&&(d=parseFloat(a.match(/ applewebkit\/(\d+)/)[1]),c.isMobile=a.indexOf("mobile")>-1),c.version=d,c.isCompatible=c.ie&&d>=6||c.iemodern&&d>=11||c.gecko&&d>=10801||c.opera&&d>=9.5||c.air&&d>=1||c.webkit&&d>=522||!1,c.cssClass="browser_"+(c.ie?"ie":c.iemodern?"iemodern":c.gecko?"gecko":c.opera?"opera":c.air?"air":c.webkit?"webkit":"unknown"),c.quirks&&(c.cssClass+=" browser_quirks"),c.ie&&(c.cssClass+=" browser_ie"+(c.version<7?"6":c.version>=8?"8":"7"),c.quirks&&(c.cssClass+=" browser_iequirks"),c.ie7Compat&&(c.cssClass+=" browser_ie7Compat")),c.gecko&&d<10900&&(c.cssClass+=" browser_gecko18"),c}(),CKFinder.env=a.env}var h=a.env,i=h.ie;"unloaded"==a.status&&function(){a.event.du(a),a.dO=function(){if("basic_ready"!=a.status)return void(a.dO.qr=!0);delete a.dO;var b=document.createElement("script");b.type="text/javascript",b.src=a.basePath+"ckfinder.js",document.getElementsByTagName("head")[0].appendChild(b)},a.mS=0,a.uQ="ckfinder",a.uM=!0;var b=function(b,c,d,e){if(h.isCompatible){a.dO&&a.dO();var f=d(b,c,e);return a.add(f),f}return null};a.replace=function(c,d,e){return b(c,d,a.application.replace,e)},a.appendTo=function(c,d,e){return b(c,d,a.application.appendTo,e)},a.add=function(a){(this._.io||(this._.io=[])).push(a)},a.uL=function(){for(var a=document.getElementsByTagName("textarea"),b=0;b<a.length;b++){var c=null,d=a[b];d.name;if(d.name||d.id){if("string"==typeof arguments[0]){if(!new RegExp("(?:^| )"+arguments[0]+"(?:$| )").test(d.className))continue}else if("function"==typeof arguments[0]&&(c={},!1===arguments[0](d,c)))continue;this.replace(d,c)}}},function(){var b=function(){var b=a.dO,c=a.mS;a.status="basic_ready",b&&b.qr?b():c&&setTimeout(function(){a.dO&&a.dO()},1e3*c)};window.addEventListener?window.addEventListener("load",b,!1):window.attachEvent&&window.attachEvent("onload",b)}(),a.status="basic_loaded"}(),a.dom={},CKFinder.dom=a.dom;var j=a.dom;a.ajax=function(){var b=function(){if(!i||"file:"!=location.protocol)try{return new XMLHttpRequest}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(a){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(a){}return null},c=function(a){return 4==a.readyState&&(a.status>=200&&a.status<300||304==a.status||0===a.status||1223==a.status)},d=function(a){return c(a)?a.responseText:null},e=function(b){if(c(b)){var d=b.responseXML,e=new a.xml(d&&d.firstChild&&d.documentElement&&"parsererror"!=d.documentElement.nodeName?d:b.responseText.replace(/^[^<]+/,"").replace(/[^>]+$/,""));if(e&&e.mq&&e.mq.documentElement&&"parsererror"!=e.mq.documentElement.nodeName&&"html"!=e.mq.documentElement.nodeName&&"br"!=e.mq.documentElement.nodeName)return e}var f=a.nG||a.jt,g=b.responseText,h=f.lang.ErrorMsg[g?"XmlError":"XmlEmpty"]+"<br>";return e&&e.mq&&(e.mq.parseError&&e.mq.parseError.reason?h+=e.mq.parseError.reason:e.mq.documentElement&&"parsererror"==e.mq.documentElement.nodeName&&(h+=e.mq.documentElement.textContent)),g?((/text\/plain/.test(b.getResponseHeader("Content-Type"))||/<Connector\s*/.test(g))&&(g=a.tools.htmlEncode(g),g=g.replace(/\n/g,"<br>"),g='<div style="width:600px; overflow:scroll"><font>'+g+"</font></div>"),f.msgDialog(f.lang.SysErrorDlgTitle,h+"<br>"+f.lang.ErrorMsg.XmlRawResponse.replace("%s","<br><br>"+g))):f.msgDialog(f.lang.SysErrorDlgTitle,h),{}},f=function(c,d,e,f){var g=!!d;a.log("[AJAX] "+(f?"POST":"GET")+" "+c);var h=b();return h?(f?h.open("POST",c,g):h.open("GET",c,g),g&&(h.onreadystatechange=function(){4==h.readyState&&(d(e(h)),h=null)}),f?(h.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=utf-8"),h.send(f)):h.send(null),g?"":e(h)):null};return{load:function(a,b,c){return f(a,b,d,c)},loadXml:function(a,b,c){return f(a,b,e,c)}}}(),CKFinder.ajax=a.ajax,function(){var b=[];a.tools={arrayCompare:function(a,b){if(!a&&!b)return!0;if(!a||!b||a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!=b[c])return!1;return!0},clone:function(a){var b;if(a&&a instanceof Array){b=[];for(var c=0;c<a.length;c++)b[c]=this.clone(a[c]);return b}if(null===a||"object"!=typeof a||a instanceof String||a instanceof Number||a instanceof Boolean||a instanceof Date)return a;b=new a.constructor;for(var d in a){var e=a[d];b[d]=this.clone(e)}return b},capitalize:function(a){return a.charAt(0).toUpperCase()+a.substring(1).toLowerCase()},extend:function(a){var c,d,b=arguments.length;"boolean"==typeof(c=arguments[b-1])?b--:"boolean"==typeof(c=arguments[b-2])&&(d=arguments[b-1],b-=2);for(var e=1;e<b;e++){var f=arguments[e];for(var g in f)!0!==c&&void 0!=a[g]||(!d||g in d)&&(a[g]=f[g])}return a},prototypedCopy:function(a){var b=function(){};return b.prototype=a,new b},isArray:function(a){return!!a&&a instanceof Array},cssStyleToDomStyle:function(){var a=document.createElement("div").style,b=void 0!==a.cssFloat?"cssFloat":void 0!==a.styleFloat?"styleFloat":"float";return function(a){return"float"==a?b:a.replace(/-./g,function(a){return a.substr(1).toUpperCase()})}}(),htmlEncode:function(a){var b=function(a){var b=new j.element("span");return b.setText(a),b.getHtml()},c="<br>"==b("\n").toLowerCase()?function(a){return b(a).replace(/<br>/gi,"\n")}:b,d=">"==b(">")?function(a){return c(a).replace(/>/g,"&gt;")}:c,e="&nbsp; "==b("  ")?function(a){return d(a).replace(/&nbsp;/g," ")}:d;return this.htmlEncode=e,this.htmlEncode(a)},getNextNumber:function(){var a=0;return function(){return++a}}(),override:function(a,b){return b(a)},setTimeout:function(a,b,c,d,e){return e||(e=window),c||(c=e),e.setTimeout(function(){d?a.apply(c,[].concat(d)):a.apply(c)},b||0)},trim:function(){var a=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(b){return b?b.replace(a,""):null}}(),ltrim:function(){var a=/^[ \t\n\r]+/g;return function(b){return b?b.replace(a,""):null}}(),rtrim:function(){var a=/[ \t\n\r]+$/g;return function(b){return b?b.replace(a,""):null}}(),indexOf:Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},bind:function(a,b){return function(){return a.apply(b,arguments)}},createClass:function(b){var c=b.$,d=b.base,e=b.vd||b._,f=b.ej,g=b.statics;if(e){var h=c;c=function(){var b=this,c=b._||(b._={});for(var d in e){var f=e[d];c[d]="function"==typeof f?a.tools.bind(f,b):f}h.apply(b,arguments)}}return d&&(c.prototype=this.prototypedCopy(d.prototype),c.prototype.constructor=c,c.prototype.base=function(){this.base=d.prototype.base,d.apply(this,arguments),this.base=arguments.callee}),f&&this.extend(c.prototype,f,!0),g&&this.extend(c,g,!0),c},addFunction:function(a,c){return b.push(function(){a.apply(c||this,arguments)})-1},removeFunction:function(a){b[a]=null},callFunction:function(a){return b[a].apply(window,Array.prototype.slice.call(arguments,1))},cssLength:function(){var a=/^\d+(?:\.\d+)?$/;return function(b){return b+(a.test(b)?"px":"")}}(),repeat:function(a,b){return new Array(b+1).join(a)},deepCopy:function(b){var c={};if("object"==typeof b){void 0!==b.length&&(c=[]);for(var d in b)null===b[d]?c[d]=null:"object"==typeof b[d]?c[d]=a.tools.deepCopy(b[d]):c[d]=b[d]}return c},getUrlParam:function(a,b){var c=new RegExp("(?:[?&]|&amp;)"+a+"=([^&]+)","i"),d=(b||window).location.search.match(c);return d&&d.length>1?d[1]:null},htmlEncode:function(a){return a?(a="string"!=typeof a?a.toString():a,a=a.replace(/&/g,"&amp;"),a=a.replace(/</g,"&lt;"),a=a.replace(/>/g,"&gt;")):""},setCookie:function(a,b,c){document.cookie=a+"="+b+(c?"":"; expires=Thu, 6 Oct 2016 01:00:00 UTC; path=/")},getCookie:function(a){var b=document.cookie.match(new RegExp("(^|\\s|;)"+a+"=([^;]*)"));return b&&b.length>0?b[2]:""},mH:function(a){i?(a.$.onfocusin=function(){a.addClass("focus_inside")},a.$.onfocusout=function(){a.removeClass("focus_inside")}):(a.$.addEventListener("focus",function(){a.addClass("focus_inside")},!0),a.$.addEventListener("blur",function(){a.removeClass("focus_inside")},!0))},formatSize:function(a,b,c){return 0==a?"0":a<1?b.Kb.replace("%1",1):a<1024?(c||(a=a.toFixed(2)),b.Kb.replace("%1",a)):a<1048576?b.Mb.replace("%1",(a/1024).toFixed(2)):b.Gb.replace("%1",(a/1048576).toFixed(2))},formatSpeed:function(a,b){return b.SizePerSecond.replace("%1",this.formatSize(a,b))}},CKFinder._.callFunction=a.tools.callFunction,CKFinder.tools=a.tools}();var k=a.tools;j.event=function(a){this.$=a},j.event.prototype={oV:function(){return this.$.keyCode||this.$.which||0},db:function(){var b=this,c=b.oV();return(b.$.ctrlKey||b.$.metaKey)&&(c+=a.bP),b.$.shiftKey&&(c+=a.dy),b.$.altKey&&(c+=a.eJ),c},preventDefault:function(a){var b=this.$;b.preventDefault?b.preventDefault():b.returnValue=!1,a&&this.stopPropagation()},stopPropagation:function(){var a=this.$;a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},bK:function(){var a=this.$.target||this.$.srcElement;return a?new j.bi(a):null},getButton:function(){if(this.$.which)return this.$.which;switch(this.$.button){case 1:return 1;case 4:return 2;case 2:return 3}},ov:function(){return 1==this.getButton()}},a.bP=1e3,a.dy=2e3,a.eJ=4e3,j.dE=function(a){a&&(this.$=a)},j.dE.prototype=function(){var b=function(b,c){return function(d){void 0!==a&&b.oW(c,new j.event(d))}};return{kk:function(){var a;return(a=this.dw("_"))||this.fL("_",a={}),a},on:function(c){var d=this,e=d.dw("_cke_nativeListeners");if(e||(e={},d.fL("_cke_nativeListeners",e)),!e[c]){var f=e[c]=b(d,c);d.$.addEventListener?d.$.addEventListener(c,f,!!a.event.jP):d.$.attachEvent&&d.$.attachEvent("on"+c,f)}return a.event.prototype.on.apply(d,arguments)},removeListener:function(b){var c=this;if(a.event.prototype.removeListener.apply(c,arguments),!c.rC(b)){var d=c.dw("_cke_nativeListeners"),e=d&&d[b];e&&(c.$.removeEventListener?c.$.removeEventListener(b,e,!1):c.$.detachEvent&&c.$.detachEvent("on"+b,e),delete d[b])}}}}(),function(b){var c={};b.equals=function(a){return a&&a.$===this.$},b.fL=function(a,b){var d=this.iY();return(c[d]||(c[d]={}))[a]=b,this},b.dw=function(a){var b=this.$._ckf_expando,d=b&&c[b];return d&&d[a]},b.jF=function(a){var b=this.$._ckf_expando,d=b&&c[b],e=d&&d[a];return void 0!==e&&delete d[a],e||null},b.iY=function(){return this.$._ckf_expando||(this.$._ckf_expando=k.getNextNumber())},a.event.du(b)}(j.dE.prototype),j.window=function(a){j.dE.call(this,a)},j.window.prototype=new j.dE,k.extend(j.window.prototype,{focus:function(){h.webkit&&this.$.parent&&this.$.parent.focus(),this.$.focus()},eR:function(){var a=this.$.document,b="CSS1Compat"==a.compatMode;return{width:(b?a.documentElement.clientWidth:a.body.clientWidth)||0,height:(b?a.documentElement.clientHeight:a.body.clientHeight)||0}},hV:function(){var a=this.$;if("pageXOffset"in a)return{x:a.pageXOffset||0,y:a.pageYOffset||0};var b=a.document;return{x:b.documentElement.scrollLeft||b.body.scrollLeft||0,y:b.documentElement.scrollTop||b.body.scrollTop||0}}}),j.document=function(a){j.dE.call(this,a)};var l=j.document;l.prototype=new j.dE,k.extend(l.prototype,{appendStyleSheet:function(a){var b=this;if(b.$.createStyleSheet)b.$.createStyleSheet(a);else{var c=new j.element("link",b);c.setAttributes({rel:"stylesheet",type:"text/css",href:a}),b.getHead().append(c)}},createElement:function(a,b){var c=new j.element(a,this);return b&&(b.attributes&&c.setAttributes(b.attributes),b.gS&&c.setStyles(b.gS)),c},jT:function(a){return new j.text(a,this)},focus:function(){this.getWindow().focus()},getById:function(a){var b=this.$.getElementById(a);return b?new j.element(b):null},vu:function(a,b){for(var c=this.$.documentElement,d=0;c&&d<a.length;d++){var e=a[d];if(b)for(var f=-1,g=0;g<c.childNodes.length;g++){var h=c.childNodes[g];if((!0!==b||3!=h.nodeType||!h.previousSibling||3!=h.previousSibling.nodeType)&&++f==e){c=h;break}}else c=c.childNodes[e]}return c?new j.bi(c):null},eG:function(a,b){return!i&&b&&(a=b+":"+a),new j.iT(this.$.getElementsByTagName(a))},getHead:function(){var a=this.$.getElementsByTagName("head")[0];return a=new j.element(a),(this.getHead=function(){return a})()},bH:function(){var a=new j.element(this.$.body);return(this.bH=function(){return a})()},gT:function(){var a=new j.element(this.$.documentElement);return(this.gT=function(){return a})()},getWindow:function(){var a=new j.window(this.$.parentWindow||this.$.defaultView);return(this.getWindow=function(){return a})()}}),j.bi=function(b){if(b){switch(b.nodeType){case a.cv:return new j.element(b);case a.fl:return new j.text(b)}j.dE.call(this,b)}return this},j.bi.prototype=new j.dE,a.cv=1,a.fl=3,a.va=8,a.om=11,a.oh=0,a.op=1,a.gW=2,a.gX=4,a.mo=8,a.lF=16,k.extend(j.bi.prototype,{appendTo:function(a,b){return a.append(this,b),a},clone:function(b,c){var d=this.$.cloneNode(b);if(!c){var e=function(b){if(b.nodeType==a.cv){b.removeAttribute("id",!1),b.removeAttribute("_ckf_expando",!1);for(var c=b.childNodes,d=0;d<c.length;d++)e(c[d])}};e(d)}return new j.bi(d)},gE:function(){return!!this.$.previousSibling},ge:function(){return!!this.$.nextSibling},kB:function(a){return a.$.parentNode.insertBefore(this.$,a.$.nextSibling),a},insertBefore:function(a){return a.$.parentNode.insertBefore(this.$,a.$),a},vP:function(a){return this.$.parentNode.insertBefore(a.$,this.$),a},lU:function(a){for(var b=[],c=this.getDocument().$.documentElement,d=this.$;d&&d!=c;){for(var e=d.parentNode,f=-1,g=0;g<e.childNodes.length;g++){var h=e.childNodes[g];if((!a||3!=h.nodeType||!h.previousSibling||3!=h.previousSibling.nodeType)&&(f++,h==d))break}b.unshift(f),d=d.parentNode}return b},getDocument:function(){var a=new l(this.$.ownerDocument||this.$.parentNode.ownerDocument);return(this.getDocument=function(){return a})()},vA:function(){for(var a=this.$,b=a.parentNode&&a.parentNode.firstChild,c=-1;b;){if(c++,b==a)return c;b=b.nextSibling}return-1},hL:function(b,c,d){if(d&&!d.call){var e=d;d=function(a){return!a.equals(e)}}var g,f=!b&&this.getFirst&&this.getFirst();if(!f){if(this.type==a.cv&&d&&!1===d(this,!0))return null;f=this.dG()}for(;!f&&(g=(g||this).getParent());){if(d&&!1===d(g,!0))return null;f=g.dG()}return f?d&&!1===d(f)?null:c&&c!=f.type?f.hL(!1,c,d):f:null},hZ:function(b,c,d){if(d&&!d.call){var e=d;d=function(a){return!a.equals(e)}}var g,f=!b&&this.dB&&this.dB();if(!f){if(this.type==a.cv&&d&&!1===d(this,!0))return null;f=this.cf()}for(;!f&&(g=(g||this).getParent());){if(d&&!1===d(g,!0))return null;f=g.cf()}return f?d&&!1===d(f)?null:c&&f.type!=c?f.hZ(!1,c,d):f:null},cf:function(a){var c,b=this.$;do{b=b.previousSibling,c=b&&new j.bi(b)}while(c&&a&&!a(c));return c},vs:function(){return this.cf(function(a){return 1==a.$.nodeType})},dG:function(a){var c,b=this.$;do{b=b.nextSibling,c=b&&new j.bi(b)}while(c&&a&&!a(c));return c},vk:function(){return this.dG(function(a){return 1==a.$.nodeType})},getParent:function(){var a=this.$.parentNode;return a&&1==a.nodeType?new j.bi(a):null},vn:function(a){var b=this,c=[];do{c[a?"push":"unshift"](b)}while(b=b.getParent());return c},vv:function(a){var b=this;if(a.equals(b))return b;if(a.contains&&a.contains(b))return a;var c=b.contains?b:b.getParent();do{if(c.contains(a))return c}while(c=c.getParent());return null},gz:function(b){var c=this.$,d=b.$;if(c.compareDocumentPosition)return c.compareDocumentPosition(d);if(c==d)return a.oh;if(this.type==a.cv&&b.type==a.cv){if(c.contains){if(c.contains(d))return a.lF+a.gX;if(d.contains(c))return a.mo+a.gW}if("sourceIndex"in c)return c.sourceIndex<0||d.sourceIndex<0?a.op:c.sourceIndex<d.sourceIndex?a.gX:a.gW}for(var e=this.lU(),f=b.lU(),g=Math.min(e.length,f.length),h=0;h<=g-1;h++)if(e[h]!=f[h]){if(h<g)return e[h]<f[h]?a.gX:a.gW;break}return e.length<f.length?a.lF+a.gX:a.mo+a.gW},vw:function(a,b){var c=this.$;for(b||(c=c.parentNode);c;){if(c.nodeName&&c.nodeName.toLowerCase()==a)return new j.bi(c);c=c.parentNode}return null},vX:function(a,b){var c=this.$;for(b||(c=c.parentNode);c;){if(c.nodeName&&c.nodeName.toLowerCase()==a)return!0;c=c.parentNode}return!1},move:function(a,b){a.append(this.remove(),b)},remove:function(a){var b=this.$,c=b.parentNode;if(c){if(a)for(var d;d=b.firstChild;)c.insertBefore(b.removeChild(d),b);c.removeChild(b)}return this},replace:function(a){this.insertBefore(a),a.remove()},trim:function(){this.ltrim(),this.rtrim()},ltrim:function(){for(var c,b=this;b.getFirst&&(c=b.getFirst());){if(c.type==a.fl){var d=k.ltrim(c.getText()),e=c.hJ();if(!d){c.remove();continue}d.length<e&&(c.split(e-d.length),b.$.removeChild(b.$.firstChild))}break}},rtrim:function(){for(var c,b=this;b.dB&&(c=b.dB());){if(c.type==a.fl){var d=k.rtrim(c.getText()),e=c.hJ();if(!d){c.remove();continue}d.length<e&&(c.split(d.length),b.$.lastChild.parentNode.removeChild(b.$.lastChild))}break}i||h.opera||(c=b.$.lastChild)&&1==c.type&&"br"==c.nodeName.toLowerCase()&&c.parentNode.removeChild(c)}}),j.iT=function(a){this.$=a},j.iT.prototype={count:function(){return this.$.length},getItem:function(a){var b=this.$[a];return b?new j.bi(b):null}},j.element=function(a,b){"string"==typeof a&&(a=(b?b.$:document).createElement(a)),j.dE.call(this,a)};var m=j.element;m.eB=function(a){return a&&(a.$?a:new m(a))},m.prototype=new j.bi,m.kE=function(a,b){var c=new m("div",b);return c.setHtml(a),c.getFirst().remove()},m.rS=function(a,b,c,d){var e=b.dw("list_marker_id")||b.fL("list_marker_id",k.getNextNumber()).dw("list_marker_id"),f=b.dw("list_marker_names")||b.fL("list_marker_names",{}).dw("list_marker_names");return a[e]=b,f[c]=1,b.fL(c,d)},m.sM=function(a){for(var b in a)m.qZ(a,a[b],!0)},m.qZ=function(a,b,c){var d=b.dw("list_marker_names"),e=b.dw("list_marker_id");for(var f in d)b.jF(f);b.jF("list_marker_names"),c&&(b.jF("list_marker_id"),delete a[e])},k.extend(m.prototype,{type:a.cv,addClass:function(a){var b=this.$.className;if(b){new RegExp("(?:^|\\s)"+a+"(?:\\s|$)","").test(b)||(b+=" "+a)}this.$.className=b||a},removeClass:function(a){var b=this.getAttribute("class");if(b){var c=new RegExp("(?:^|\\s+)"+a+"(?=\\s|$)","i");c.test(b)&&(b=b.replace(c,"").replace(/^\s+/,""),b?this.setAttribute("class",b):this.removeAttribute("class"))}},hasClass:function(a){return new RegExp("(?:^|\\s+)"+a+"(?=\\s|$)","").test(this.getAttribute("class"))},append:function(b,c){var d=this;return"string"==typeof b&&(b=d.getDocument().createElement(b)),c?d.$.insertBefore(b.$,d.$.firstChild):d.$.appendChild(b.$),a.log("[DOM] DOM flush into "+d.getName()),b},appendHtml:function(a){var b=this;if(b.$.childNodes.length){var c=new m("div",b.getDocument());c.setHtml(a),c.jg(b)}else b.setHtml(a)},appendText:function(a){void 0!=this.$.text?this.$.text+=a:this.append(new j.text(a))},pd:function(){for(var b=this,c=b.dB();c&&c.type==a.fl&&!k.rtrim(c.getText());)c=c.cf();c&&c.is&&c.is("br")||b.append(h.opera?b.getDocument().jT(""):b.getDocument().createElement("br"))},tV:function(a){var b=this,c=new j.mk(b.getDocument());c.setStartAfter(b),c.setEndAfter(a);var d=c.extractContents();c.insertNode(b.remove()),d.kA(b)},contains:i||h.webkit?function(b){var c=this.$;return b.type!=a.cv?c.contains(b.getParent().$):c!=b.$&&c.contains(b.$)}:function(a){return!!(16&this.$.compareDocumentPosition(a.$))},focus:function(){try{this.$.focus()}catch(a){}},getHtml:function(){return this.$.innerHTML},fH:function(){var a=this;if(a.$.outerHTML)return a.$.outerHTML.replace(/<\?[^>]*>/,"");var b=a.$.ownerDocument.createElement("div");return b.appendChild(a.$.cloneNode(!0)),b.innerHTML},setHtml:function(b){return a.log("[DOM] DOM flush into "+this.getName()),this.$.innerHTML=b},setText:function(b){return m.prototype.setText=void 0!=this.$.innerText?function(b){return a.log("[DOM] Text flush"),this.$.innerText=b}:function(b){return a.log("[DOM] Text flush"),this.$.textContent=b},this.setText(b)},getAttribute:function(){var a=function(a){return this.$.getAttribute(a,2)};return i&&(h.ie7Compat||h.ie6Compat)?function(b){var c=this;switch(b){case"class":b="className";break;case"tabindex":var d=a.call(c,b);return 0!==d&&0===c.$.tabIndex&&(d=null),d;case"checked":return c.$.checked;case"style":return c.$.style.cssText}return a.call(c,b)}:a}(),getChildren:function(){return new j.iT(this.$.childNodes)},getComputedStyle:i?function(a){return this.$.currentStyle[k.cssStyleToDomStyle(a)]}:function(a){return this.getWindow().$.getComputedStyle(this.$,"").getPropertyValue(a)},pf:function(){var b=a.ga[this.getName()];return this.pf=function(){return b},b},eG:l.prototype.eG,vp:i?function(){var b=this.$.tabIndex;return 0!==b||a.ga.ug[this.getName()]||0===parseInt(this.getAttribute("tabindex"),10)||(b=-1),b}:h.webkit?function(){var a=this.$.tabIndex;return void 0==a&&(a=parseInt(this.getAttribute("tabindex"),10),isNaN(a)&&(a=-1)),a}:function(){return this.$.tabIndex},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},dS:function(){return this.$.id||null},data:function(a,b){return a="data-"+a,void 0===b?this.getAttribute(a):(!1===b?this.removeAttribute(a):this.setAttribute(a,b),null)},vm:function(){return this.$.name||null},getName:function(){var a=this.$.nodeName.toLowerCase();if(i&&!(document.documentMode>8)){var b=this.$.scopeName;"HTML"!=b&&(a=b.toLowerCase()+":"+a)}return(this.getName=function(){return a})()},getValue:function(){return this.$.value},getFirst:function(){var a=this.$.firstChild;return a?new j.bi(a):null},dB:function(a){var b=this.$.lastChild,c=b&&new j.bi(b);return c&&a&&!a(c)&&(c=c.cf(a)),c},rd:function(a){return this.$.style[k.cssStyleToDomStyle(a)]},is:function(){for(var a=this.getName(),b=0;b<arguments.length;b++)if(arguments[b]==a)return!0;return!1},vL:function(){var b=this.getName(),c=!a.ga.uj[b]&&(a.ga[b]||a.ga.span);return c&&c["#"]},isIdentical:function(a){if(this.getName()!=a.getName())return!1;var b=this.$.attributes,c=a.$.attributes,d=b.length,e=c.length;if(!i&&d!=e)return!1;for(var f=0;f<d;f++){var g=b[f];if((!i||g.specified&&"_ckf_expando"!=g.nodeName)&&g.nodeValue!=a.getAttribute(g.nodeName))return!1}if(i)for(f=0;f<e;f++)if(g=c[f],(!i||g.specified&&"_ckf_expando"!=g.nodeName)&&g.nodeValue!=b.getAttribute(g.nodeName))return!1;return!0},isVisible:function(){return this.$.offsetWidth&&"hidden"!=this.$.style.visibility},hasAttributes:i&&(h.ie7Compat||h.ie6Compat)?function(){for(var a=this.$.attributes,b=0;b<a.length;b++){var c=a[b];switch(c.nodeName){case"class":if(this.getAttribute("class"))return!0;case"_ckf_expando":continue;default:if(c.specified)return!0}}return!1}:function(){var a=this.$.attributes;return a.length>1||1==a.length&&"_ckf_expando"!=a[0].nodeName},hasAttribute:function(a){var b=this.$.attributes.getNamedItem(a);return!(!b||!b.specified)},hide:function(){this.setStyle("display","none")},jg:function(a,b){var c=this.$;if(a=a.$,c!=a){var d;if(b)for(;d=c.lastChild;)a.insertBefore(c.removeChild(d),a.firstChild);else for(;d=c.firstChild;)a.appendChild(c.removeChild(d))}},show:function(){this.setStyles({display:"",visibility:""})},setAttribute:function(){var a=function(a,b){return this.$.setAttribute(a,b),this};return i&&(h.ie7Compat||h.ie6Compat)?function(b,c){var d=this;return"class"==b?d.$.className=c:"style"==b?d.$.style.cssText=c:"tabindex"==b?d.$.tabIndex=c:"checked"==b?d.$.checked=c:a.apply(d,arguments),d}:a}(),setAttributes:function(a){for(var b in a)this.setAttribute(b,a[b]);return this},setValue:function(a){return this.$.value=a,this},removeAttribute:function(){var a=function(a){this.$.removeAttribute(a)};return i&&(h.ie7Compat||h.ie6Compat)?function(b){"class"==b?b="className":"tabindex"==b&&(b="tabIndex"),a.call(this,b)}:a}(),uW:function(a){for(var b=0;b<a.length;b++)this.removeAttribute(a[b])},removeStyle:function(a){var b=this;b.$.style.removeAttribute?b.$.style.removeAttribute(k.cssStyleToDomStyle(a)):b.setStyle(a,""),b.$.style.cssText||b.removeAttribute("style")},setStyle:function(a,b){return this.$.style[k.cssStyleToDomStyle(a)]=b,this},setStyles:function(a){for(var b in a)this.setStyle(b,a[b]);return this},setOpacity:function(a){i&&h.version<9?(a=Math.round(100*a),this.setStyle("filter",a>=100?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+a+")")):this.setStyle("opacity",a)},unselectable:h.gecko?function(){this.$.style.MozUserSelect="none"}:h.webkit?function(){this.$.style.uE="none"}:function(){if(i||h.opera){var b,a=this.$,c=0;for(a.unselectable="on";b=a.all[c++];)switch(b.tagName.toLowerCase()){case"iframe":case"textarea":case"input":case"select":break;default:b.unselectable="on"}}},vr:function(){for(var a=this;"html"!=a.getName();){if("static"!=a.getComputedStyle("position"))return a;a=a.getParent()}return null},ir:function(a){var b=this,c=0,d=0,e=b.getDocument().bH(),f="BackCompat"==b.getDocument().$.compatMode,g=b.getDocument();if(document.documentElement.getBoundingClientRect){var j=b.$.getBoundingClientRect(),k=g.$,l=k.documentElement,n=l.clientTop||e.$.clientTop||0,o=l.clientLeft||e.$.clientLeft||0,p=!0;if(i){var q=g.gT().contains(b),r=g.bH().contains(b);p=f&&r||!f&&q}p&&(c=j.left+(!f&&l.scrollLeft||e.$.scrollLeft),c-=o,d=j.top+(!f&&l.scrollTop||e.$.scrollTop),d-=n)}else for(var u,s=b,t=null;s&&"body"!=s.getName()&&"html"!=s.getName();){c+=s.$.offsetLeft-s.$.scrollLeft,d+=s.$.offsetTop-s.$.scrollTop,s.equals(b)||(c+=s.$.clientLeft||0,d+=s.$.clientTop||0);for(var v=t;v&&!v.equals(s);)c-=v.$.scrollLeft,d-=v.$.scrollTop,v=v.getParent();t=s,s=(u=s.$.offsetParent)?new m(u):null}if(a){var w=b.getWindow(),x=a.getWindow();if(!w.equals(x)&&w.$.frameElement){var y=new m(w.$.frameElement).ir(a);c+=y.x,d+=y.y}}return document.documentElement.getBoundingClientRect||h.gecko&&!f&&(c+=b.$.clientLeft?1:0,d+=b.$.clientTop?1:0),{x:c,y:d}},scrollIntoView:function(a){var b=this,c=b.getWindow(),d=c.eR().height,e=-1*d;a?e+=d:(e+=b.$.offsetHeight||0,e+=parseInt(b.getComputedStyle("marginBottom")||0,10)||0),e+=b.ir().y,e=e<0?0:e;var g=c.hV().y;(e>g||e<g-d)&&c.$.scrollTo(0,e)},bR:function(b){var c=this;switch(b){case a.eV:c.addClass("cke_on"),c.removeClass("cke_off"),c.removeClass("cke_disabled");break;case a.aY:c.addClass("cke_disabled"),c.removeClass("cke_off"),c.removeClass("cke_on");break;default:c.addClass("cke_off"),c.removeClass("cke_on"),c.removeClass("cke_disabled")}},getFrameDocument:function(){var a=this.$;try{a.contentWindow.document}catch(b){a.src=a.src,i&&h.version<7&&window.showModalDialog('javascript:document.write("<script>window.setTimeout(function(){window.close();},50);<\/script>")')}return a&&new l(a.contentWindow.document)},qw:function(a,b){var c=this,d=c.$.attributes;b=b||{};for(var e=0;e<d.length;e++){var f=d[e];if(f.specified||i&&f.nodeValue&&"value"==f.nodeName.toLowerCase()){var g=f.nodeName;if(g in b)continue;var h=c.getAttribute(g);null===h&&(h=f.nodeValue),a.setAttribute(g,h)}}""!==c.$.style.cssText&&(a.$.style.cssText=c.$.style.cssText)},renameNode:function(a){var b=this;if(b.getName()!=a){var c=b.getDocument(),d=new m(a,c);b.qw(d),b.jg(d),b.$.parentNode.replaceChild(d.$,b.$),d.$._ckf_expando=b.$._ckf_expando,b.$=d.$}},getChild:function(a){var b=this.$;if(a.slice)for(;a.length>0&&b;)b=b.childNodes[a.shift()];else b=b.childNodes[a];return b?new j.bi(b):null},iu:function(){return this.$.childNodes.length},hX:function(){this.on("contextmenu",function(a){a.data.bK().hasClass("cke_enable_context_menu")||a.data.preventDefault()})},toString:function(){return this.getName()+"#"+this.dS()+"."+this.getAttribute("class")}}),function(){function b(b){for(var c=0,d=0,e=a[b].length;d<e;d++)c+=parseInt(this.getComputedStyle(a[b][d])||0,10)||0;return c}var a={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};m.prototype.setSize=function(a,c,d){"number"==typeof c&&(!d||i&&h.quirks||(c-=b.call(this,a)),this.setStyle(a,c+"px"))},m.prototype.hR=function(a,c){var d=Math.max(this.$["offset"+k.capitalize(a)],this.$["client"+k.capitalize(a)])||0;return c&&(d-=b.call(this,a)),d}}(),a.command=function(b,c){this.pW=[],this.exec=function(d){return!(this.bu==a.aY||!1===this.readOnly&&b.config.readOnly)&&(c.oD&&b.focus(),!1!==c.exec.call(this,b,d))},k.extend(this,c,{iH:{qt:1},oD:!0,bu:a.aS}),a.event.call(this)},a.command.prototype={enable:function(){var b=this;b.bu==a.aY&&b.bR(b.vf&&void 0!==b.lJ?b.lJ:a.aS)},disable:function(){this.bR(a.aY)},bR:function(a){var b=this;return b.bu!=a&&(b.lJ=b.bu,b.bu=a,b.oW("bu"),!0)},rJ:function(){var b=this;b.bu==a.aS?b.bR(a.eV):b.bu==a.eV&&b.bR(a.aS)}},a.event.du(a.command.prototype,!0),a.config={customConfig:a.getUrl("config.js"),connectorLanguage:"php",language:"",defaultLanguage:"en",defaultViewType:"thumbnails",defaultSortBy:"filename",defaultDisplayFilename:!0,defaultDisplayDate:!0,defaultDisplayFilesize:!0,pO:"",height:400,plugins:"foldertree,folder,filebrowser,container,connector,resource,search,toolbar,formpanel,filesview,status,contextmenu,uploadform,keystrokes,dragdrop,basket,dialog,tools,resize,maximize,help,flashupload,mobile,html5upload,gallery",extraPlugins:"",fileIcons:"ai|avi|bmp|cs|dll|doc|docx|exe|fla|gif|jpg|js|mdb|mp3|ogg|pdf|ppt|pptx|rdp|swf|swt|txt|vsd|xls|xlsx|xml|zip",removePlugins:"",tabIndex:0,thumbnailDelay:100,theme:"default",skin:"kama",width:"100%",baseFloatZIndex:1e4,directDownload:!1,log:!1,logStackTrace:!1,rememberLastFolder:!0,id:null,startupPath:"",startupFolderExpanded:!0,selectActionFunction:null,selectActionData:null,selectThumbnailActionFunction:null,selectThumbnailActionData:null,disableThumbnailSelection:!1,thumbsUrl:null,thumbsDirectAccess:!1,imagesMaxWidth:0,imagesMaxHeight:0,selectActionType:"js",resourceType:null,disableHelpButton:!1,connectorPath:"",connectorInfo:"",uiColor:null,showContextMenuArrow:!1,useNativeIcons:!1,maxSimultaneousUploads:1,readOnly:!1,selectMultiple:!0},CKFinder.config=a.config;var n=a.config;a.dU=function(a,b){this.rG=a,this.message=b},a.fs=function(a){return a.fs?a.fs:(this.hasFocus=!1,this._={application:a},this)},a.fs.prototype={focus:function(){var b=this;if(b._.fW&&clearTimeout(b._.fW),!b.hasFocus){a.nG&&a.nG.fs.ly();var c=b._.application;c.container.getFirst().addClass("cke_focus"),b.hasFocus=!0,c.oW("focus")}},blur:function(){var a=this;a._.fW&&clearTimeout(a._.fW),a._.fW=setTimeout(function(){delete a._.fW,a.ly()},100)},ly:function(){if(this.hasFocus){var a=this._.application;a.container.getFirst().removeClass("cke_focus"),this.hasFocus=!1,a.oW("blur")}}},function(){a.lang={ko:{bg:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,en:1,eo:1,es:1,"es-mx":1,et:1,fa:1,fi:1,fr:1,gu:1,he:1,hi:1,hr:1,hu:1,it:1,ja:1,lv:1,lt:1,nb:1,nl:1,no:1,nn:1,pl:1,"pt-br":1,ro:1,ru:1,sk:1,sl:1,sr:1,sv:1,tr:1,vi:1,"zh-cn":1,"zh-tw":1},load:function(b,c,d){b&&a.lang.ko[b]||(b=this.jV(c,b)),this[b]?d(b,this[b]):a.scriptLoader.load(a.getUrl("lang/"+b+".js"),function(){d(b,CKFinder.lang[b])},this)},jV:function(b,c){var d=this.ko;c=c||navigator.userLanguage||navigator.language;var e=c.toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/),f=e[1],g=e[2];return d[f+"-"+g]?f=f+"-"+g:d[f]||(f=null),a.lang.jV=f?function(){return f}:function(a){return a},f||b}}}(),function(){a.log=function(){if(n.log||window.CKFINDER_LOG){for(var b="",c=0;c<arguments.length;c++){var d=arguments[c];if(d)switch(b&&(b+="; "),typeof d){case"function":var e=/function (\w+?)\(/.exec(d.toString());e=e?e[1]:"anonymous func",b+=e;break;default:b+=d?d.toString():""}}a._.log.push(b),"object"==typeof window.console&&(console.log.apply?console.log.apply(console,arguments):console.log(b))}},a.ba=function(b){return n.logStackTrace&&a.log("[EXCEPTION] "+b.toString()),b},a.mZ=function(b){for(var c="",d=0;d<a._.log.length;d++)c+=d+1+". "+a._.log[d]+"\n";return c},a._.log=[]}(),a.scriptLoader=function(){var b={},c={};return{load:function(d,e,f,g,h,j){var k="string"==typeof d;k&&(d=[d]),f||(f=a);var l=d.length,n=[],o=[],p=function(a){e&&(k?e.call(f,a):e.call(f,n,o))};if(0===l)return void p(!0);for(var q=function(a,b){(b?n:o).push(a),--l<=0&&p(b)},r=function(a,d){b[a]=1;var e=c[a];delete c[a];for(var f=0;f<e.length;f++)e[f](a,d)},s=function(d){if(!0!==g&&b[d])return void q(d,!0);var f=c[d]||(c[d]=[]);if(f.push(q),!(f.length>1)){var k=new m("script",j);k.setAttributes({type:"text/javascript",src:d}),e&&(i?k.$.onreadystatechange=function(){"loaded"!=k.$.readyState&&"complete"!=k.$.readyState||(k.$.onreadystatechange=null,a.log("[LOADED] "+d),r(d,!0))}:(k.$.onload=function(){setTimeout(function(){a.log("[LOADED] "+d),r(d,!0)},0)},k.$.onerror=function(){r(d,!1)})),k.appendTo(h||a.document.getHead())}},t=0,u=l;t<u;t++)s(d[t])},uq:function(b){var c=new m("script");c.setAttribute("type","text/javascript"),c.appendText(b),c.appendTo(a.document.getHead())}}}(),CKFinder.scriptLoader=a.scriptLoader,a.fQ=function(a,b){var c=this;c.basePath=a,c.fileName=b,c.bX={},c.loaded={},c.jn={},c._={rZ:{}}},a.fQ.prototype={add:function(a,b){if(this.bX[a])throw'[CKFINDER.fQ.add] The resource name "'+a+'" is already bX.';this.bX[a]=b||{}},eB:function(a){return this.bX[a]||null},getPath:function(b){var c=this.jn[b];return a.getUrl(c&&c.dir||this.basePath+b+"/")},pi:function(b){var c=this.jn[b];return a.getUrl(this.getPath(b)+(c&&c.file||this.fileName+".js"))},tR:function(a,b,c){a=a.split(",");for(var d=0;d<a.length;d++){var e=a[d];this.jn[e]={dir:b,file:c}}},load:function(b,c,d){k.isArray(b)||(b=b?[b]:[]);for(var e=this.loaded,f=this.bX,g=[],h={},i={},j=0;j<b.length;j++){var l=b[j];if(l)if(e[l]||f[l])i[l]=this.eB(l);else{var m=this.pi(l);g.push(m),m in h||(h[m]=[]),h[m].push(l)}}a.scriptLoader.load(g,function(a,b){if(b.length)throw'[CKFINDER.fQ.load] Resource name "'+h[b[0]].join(",")+'" was not found at "'+b[0]+'".';for(var f=0;f<a.length;f++)for(var g=h[a[f]],j=0;j<g.length;j++){var k=g[j];i[k]=this.eB(k),e[k]=1}c.call(d,i)},this)}},a.plugins=new a.fQ("plugins/","plugin");var o=a.plugins;o.load=k.override(o.load,function(a){return function(b,c,d){var e={},f=function(b){a.call(this,b,function(a){k.extend(e,a);var b=[];for(var g in a){var h=a[g],i=h&&h.bM;if(i)for(var j=0;j<i.length;j++)e[i[j]]||b.push(i[j])}if(b.length)f.call(this,b);else{for(g in e)h=e[g],h.onLoad&&!h.onLoad.qK&&(h.onLoad(),h.onLoad.qK=1);c&&c.call(d||window,e)}},this)};f.call(this,b)}}),o.rX=function(a,b,c){this.eB(a).lang[b]=c},function(){var b={},c=function(a,c){var d=function(){b[a]=1,c()},e=new m("img");e.on("load",d),e.on("error",d),e.setAttribute("src",a)};a.rw={load:function(a,d){for(var e=a.length,f=function(){0==--e&&d()},g=0;g<a.length;g++){var h=a[g];b[h]?f():c(h,f)}}}}(),a.skins=function(){var b={},c={},d={},e=function(f,g,h,i){var j=b[g];f.skin||(f.skin=j,j.bz&&j.bz(f));var k=function(b){for(var c=0;c<b.length;c++)b[c]=a.getUrl(d[g]+b[c])};if(!c[g]){var l=j.ls;if(l&&l.length>0)return k(l),void a.rw.load(l,function(){c[g]=1,e(f,g,h,i)});c[g]=1}h=j[h];var m=0;if(h?h.iB?h.iB[f.name]&&(m=1):h.iB=[]:m=1,m)i&&i();else{void 0===h.eb&&(h.eb=[]),void 0===h.eb[f.name]&&(h.eb[f.name]=[]);var n=h.eb[f.name];if(n.push(i),n.length>1)return;var o=!h.css||!h.css.length,p=!h.js||!h.js.length,q=function(){if(o&&p){h.iB[f.name]=1;for(var a=0;a<n.length;a++)n[a]&&n[a]()}};if(!o){if(h.rr||(k(h.css),h.rr=1),h.qx)for(var r=0;r<h.css.length;r++)a.oC.appendStyleSheet(h.css[r]);else f.on("themeSpace",function(a){if("head"==a.data.space)for(var b=0;b<h.css.length;b++)a.data.html+="<link rel='stylesheet' href='"+h.css[b]+"'>\n";a.removeListener()});o=1}p||(k(h.js),f.scriptLoader.load(h.js,function(){p=1,q()})),q()}};return{add:function(c,e){b[c]=e,e.fh=d[c]||(d[c]=a.getUrl("skins/"+c+"/"))},loaded:b,load:function(c,f,g){var h=c.gd,i=c.fh;if(b[h]){e(c,h,f,g);b[h]}else d[h]=i,a.scriptLoader.load(i+"skin.js",function(){e(c,h,f,g)})}}}(),a.gc=new a.fQ("gc/","theme"),a.bY=function(a){return a.bY?a.bY:(this._={jZ:{},items:{},application:a},this)};var p=a.bY;if(p.prototype={add:function(a,b,c){this._.items[a]={type:b,command:c.command||null,mp:Array.prototype.slice.call(arguments,2)}},create:function(a){var b=this,c=b._.items[a],d=c&&b._.jZ[c.type],e=c&&c.command&&b._.application.cS(c.command),f=d&&d.create.apply(b,c.mp);return e&&e.pW.push(f),f},kd:function(a,b){this._.jZ[a]=b}},function(){var b=0,c=function(){var d="ckfinder"+ ++b;return a.instances&&a.instances[d]?c():d},f={},g=function(b){var c=b.config.customConfig;if(!c)return!1;var d=f[c]||(f[c]={});return d.fn?setTimeout(function(){d.fn.call(b,b.config),b.config.customConfig!=c&&g(b)||b.cr("customConfigLoaded")},0):a.scriptLoader.load(c,function(){CKFinder.customConfig?d.fn=CKFinder.customConfig:d.fn=function(){},g(b)}),!0},i=function(a,b){a.on("customConfigLoaded",function(){if(b){if(b.on)for(var c in b.on)a.on(c,b.on[c]);k.extend(a.config,b,!0),delete a.config.on}j(a)}),b&&b.id&&(a.config.id=b.id),b&&void 0!=b.customConfig&&(a.config.customConfig=b.customConfig),g(a)||a.cr("customConfigLoaded")},j=function(b){var c=b.config.skin.split(","),d=c[0],e=a.getUrl(c[1]||"skins/"+d+"/");b.gd=d,b.fh=e,b.iy="cke_skin_"+d+" skin_"+d,b.qn=b.ox(),b.on("uiReady",function(){b.document.getWindow().on("lW",function(){k.setCookie("CKFinder_UTime",Math.round((new Date).getTime()/1e3),!0),k.setCookie("CKFinder_UId",encodeURIComponent(b.id?b.id:location.href),!0)})}),b.cr("configLoaded"),t(b)},q=function(b,c){a.event.jP=!0,b.document.on("keydown",function(d){var e=d.data,f=e.oV(),g=e.db();if(116==f||g==a.bP+82||g==a.bP+a.dy+82){b.execCommand("refresh"),c.$.event&&c.$.event.keyCode&&(c.$.event.keyCode=5055);try{d.data.preventDefault()}catch(d){}}}),a.event.jP=!1},r=function(a,b,c){var e,f,d=[];for(f=0;f<c.length;f++)e=c[f],d.push({evt:"onbeforeunload",bi:e.bH().$,fO:e.bH().$.onbeforeunload},{evt:"onunload",bi:e.getWindow().$,fO:e.getWindow().$.onunload},{evt:"onbeforeunload",bi:e.getWindow().$,fO:e.getWindow().$.onbeforeunload});b.$.onunload=b.$.onbeforeunload=function(){var a;for(a=0;a<d.length;a+=1)d[a].bi[d[a].evt]=d[a].fO}},s=function(b,c){var e,d=[a.oC];if(c.$.top.location.href.match(/ckfinder.html/)||"CKFinderpopup"==c.$.top.name){if(b.document.focus(),b.focus(),b.cg.inUrlPopup)try{d.push(new l(a.oC.getWindow().$.opener.document))}catch(a){}for(q(b,c),r(b,c,d),e=0;e<d.length;e+=1)d[e].bH().$.onbeforeunload=d[e].getWindow().$.onunload=d[e].getWindow().$.onbeforeunload=function(){var a=b.element&&b.element.getDocument().getWindow().$;a.closed||a.close()}}},t=function(b){a.lang.load(b.config.language,b.config.defaultLanguage,function(a,c){b.langCode=a,b.lang=k.prototypedCopy(c),b.lB=function(){var a="['"+b.lang.DateAmPm.join("','")+"']",c=b.lang.DateTime.replace(/dd|mm|yyyy|hh|HH|MM|aa|d|m|yy|h|H|M|a/g,function(b){var c;switch(b){case"d":c="day.replace(/^0/,'')";break;case"dd":c="day";break;case"m":c="month.replace(/^0/,'')";break;case"mm":c="month";break;case"yy":c="year.substr(2)";break;case"yyyy":c="year";break;case"H":c="hour.replace(/^0/,'')";break;case"HH":c="hour";break;case"h":c="( hour < 12 ? hour : ( ( hour - 12 ) + 100 ).toString().substr( 1 ) ).replace(/^0/,'')";break;case"hh":c="( hour < 12 ? hour : ( ( hour - 12 ) + 100 ).toString().substr( 1 ) )";break;case"M":c="minute.replace(/^0/,'')";break;case"MM":c="minute";break;case"a":c=a+"[ hour < 12 ? 0 : 1 ].charAt(0)";break;case"aa":c=a+"[ hour < 12 ? 0 : 1 ]";break;default:c="'"+b+"'"}return"',"+c+",'"});return c="'"+c+"'",c=c.replace(/('',)|,''$/g,""),new Function("day","month","year","hour","minute","return ["+c+"].join('');")}(),h.gecko&&h.version<10900&&"rtl"==b.lang.dir&&(b.lang.dir="ltr"),u(b)})},u=function(b){var c=b.config,d=c.plugins,e=c.extraPlugins,f=c.removePlugins;if(e){var g=new RegExp("(?:^|,)(?:"+e.replace(/\s*,\s*/g,"|")+")(?=,|$)","g");d=d.replace(g,""),d+=","+e}f&&(g=new RegExp("(?:^|,)(?:"+f.replace(/\s*,\s*/g,"|")+")(?=,|$)","g"),d=d.replace(g,"")),o.load(d.split(","),function(c){var g,d=[],e=[],f=[];if(b.config.readOnly)for(var g in c)!1===c[g].readOnly&&delete c[g];b.plugins=c;for(g in c){var h=c[g],i=h.lang,j=o.getPath(g),l=null;c[g].name=g,h.pathName=j,i&&(l=k.indexOf(i,b.langCode)>=0?b.langCode:i[0],h.lang[l]?(k.extend(b.lang,h.lang[l]),l=null):f.push(a.getUrl(j+"lang/"+l+".js"))),e.push(l),d.push(h)}a.scriptLoader.load(f,function(){for(var c=["eK","bz","gr"],f=0;f<c.length;f++)for(var g=0;g<d.length;g++){var h=d[g];0===f&&e[g]&&h.lang&&k.extend(b.lang,h.lang[e[g]]),h[c[f]]&&(a.log("[PLUGIN] "+h.name+"."+c[f]),h[c[f]](b))}b.oW("pluginsLoaded"),v(b)})})},v=function(b){a.skins.load(b,"application",function(){a.skins.load(b,"host",function(){w(b)})})},w=function(b){var c=b.config.theme;a.gc.load(c,function(){(b.theme=a.gc.eB(c)).pathName=a.gc.getPath(c),b.oW("themeAvailable")})};a.application.prototype.iI=function(b){var f=m.eB(this._.element),g=this._.instanceConfig;if(delete this._.element,delete this._.instanceConfig,this._.ky={},this._.gS=[],f.getDocument().getWindow().$.CKFinder=b,this.element=f,this.document=null,this.rQ={},this.name=c(),this.name in a.instances)throw'[CKFINDER.application] The instance "'+this.name+'" already exists.';this.config=k.prototypedCopy(n),this.bY=new p(this),this.fs=new a.fs(this),this.aL={},this.ld={},this.on("uiReady",function(a){var b=this,c=b.document.getWindow();c.on("lW",b.destroy,b),b.cg.inPopup&&s(b,c)},this),this.cg=new d(this),this.on("configLoaded",function(a){var b=this;e(b.cg,b,b.config.callback),b.id=b.config.id},this),i(this,g),a.oW("instanceCreated",null,this)}}(),k.extend(a.application.prototype,{bD:function(b,c){return this._.ky[b]=new a.command(this,c)},destroy:function(){var b=this;b.theme.destroy(b),b.oW("destroy"),a.remove(b)},execCommand:function(b,c){a.log("[COMMAND] "+b);var d=this.cS(b),e={name:b,rm:c,command:d};return!(!d||d.bu==a.aY||!0===this.oW("beforeCommandExec",e)||(e.returnValue=d.exec(e.rm),d.async||!0===this.oW("afterCommandExec",e)))&&e.returnValue},cS:function(a){return this._.ky[a]},ox:function(){var a=Math.round((new Date).getTime()/1e3),b=k.getCookie("CKFinder_UTime"),c=decodeURIComponent(k.getCookie("CKFinder_UId"));return c&&b&&c==(this.id?this.id:location.href)&&Math.abs(a-b)<5?1:0},bs:""}),function(){for(var b="",c=49;c<58;c++)b+=String.fromCharCode(c);for(c=65;c<91;c++)73!=c&&79!=c&&(b+=String.fromCharCode(c));a.bs=b,a.nd="lo",a.jG="ho",a.hf=new window.RegExp("^www\\."),a.hg=new window.RegExp(":\\d+$"),a.lS=function(b){return b.toLowerCase().replace(a.hf,"").replace(a.hg,"")}}(),a.on("loaded",function(){var b=a.application.eb;if(b){delete a.application.eb;for(var c=0;c<b.length;c++)b[c].iI()}}),delete a.dO,a.instances={},a.document=new l(document),a.oC=a.document.getWindow().$!=a.document.getWindow().$.top?new l(a.document.getWindow().$.top.document):a.document,a.add=function(b){a.instances[b.name]=b,a.jt=b,b.on("focus",function(){a.nG!=b&&(a.nG=b,a.oW("nG"))}),b.on("blur",function(){a.nG==b&&(a.nG=null,a.oW("nG"))})},a.remove=function(b){delete a.instances[b.name]},a.aL={},a.eV=1,a.aS=2,a.aY=0,a.bF="",function(){function b(a,b){return a+"."+(b.name||b||a)}a.ld={bX:{},hS:function(c,e,f){var g=b(c,e);if(void 0!==this.bX[g])throw"[CKFINDER] Widget "+g+" already bX!";return a.log("[WIDGET] bX "+g),this.bX[g]=new d(g,f),this.bX[g]},bz:function(c,d,e,f,g){var h=b(d,e),i=this.bX[h],j=k.deepCopy(i.hF),l=function(a,b,c){this.app=a,this.eh=b instanceof m?b:new m(b),this.hF=j?k.extend(j,c):c||{},this._={};var d=function(a){this.ib=a};d.prototype=this.tools,this.tools=new d(this);var e=i.dT;if(e.length)for(var f=0;f<e.length;f++)e[f].call(this,a,this)};l.prototype=i;var n=new l(c,f,g);for(var o in n.fw)n.fw[o].readOnly&&c.config.readOnly?n.ke(o):n.gA(o);if(c.ld[h])throw"[CKFINDER Widget "+h+" already initiated.";return c.ld[h]=n,a.log("[WIDGET] instanced "+h),n}};var c={click:1,mouseover:1,mouseout:1,focus:1,blur:1,submit:1,dblclick:1,mousedown:1,mouseup:1,mousemove:1,keypress:1,keydown:1,keyup:1,load:1,lW:1,abort:1,error:1,resize:1,scroll:1,select:1,change:1,reset:1},d=function(a,b){var c=this;c.id=a,c.readOnly=!0,c.fw={},c.hF=b||{},c.dT=[],c.tools=new c.tools(c)};d.prototype={gA:function(b){var d=this;a.log("[WIDGET] Enabling behavior "+b);var e=d.fw[b];if(e)for(var f=d,g=0;g<e.cC.length;g++){var h=e.cC[g];c[h]?d.eh.on(h,e.fO,f):(d.on(h,e.fO,f),d.app.on(h,e.fO,f))}},ke:function(b){a.log("[WIDGET] Disabling behavior "+b);var d=this.fw[b];if(d)for(var e=0;e<d.cC.length;e++){var f=d.cC[e];c[f]?this.eh.removeListener(f,d.fO):this.removeListener(f,d.fO)}},bh:function(a,b,c,d){k.isArray(b)||(b=[b]),this.fw[a]={cC:b,fO:c,readOnly:!1===d},this.eh&&this.gA(a)},removeBehavior:function(a){delete this.fw[a]},ur:function(){return this.fw},bn:function(){return this.eh},oE:function(){return this.hF},data:function(){return this.hF},tools:function(){}},d.prototype.tools.prototype={kg:function(a){if(a.target==this.ib.eh)return 1}},a.event.du(d.prototype)}(),a.xml=function(a){var b=null;if("object"==typeof a)b=a;else{var c=(a||"").replace(/&nbsp;/g," ");if(window.DOMParser)b=(new DOMParser).parseFromString(c,"text/xml");else if(window.ActiveXObject){try{b=new ActiveXObject("MSXML2.DOMDocument")}catch(a){try{b=new ActiveXObject("Microsoft.XmlDom")}catch(a){}}b&&(b.async=!1,b.resolveExternals=!1,b.validateOnParse=!1,b.loadXML(c))}}this.mq=b},a.xml.prototype={selectSingleNode:function(a,b){var c=this.mq;if(b||(b=c)){if("selectSingleNode"in b)return b.selectSingleNode(a);if(c.evaluate){var d=c.evaluate(a,b,null,9,null);return d&&d.singleNodeValue||null}if(b.querySelectorAll){var e=this.selectNodes(a,b);if(1==e.length){var d=a.match(/\/@(.*$)/);return d?e[0].getAttributeNode(d[1]):e[0]}}else alert("XPath is not supported in your browser")}return null},selectNodes:function(a,b){var c=this.mq,d=[];if(b||(b=c)){if("selectNodes"in b)return b.selectNodes(a);if(c.evaluate){var e=c.evaluate(a,b,null,5,null);if(e)for(var f;f=e.iterateNext();)d.push(f)}else{if(b.querySelectorAll){var g=a.replace(/\/@(.*$)/,"[$1]").replace(/\//gi,">");return b.querySelectorAll(g)}alert("XPath is not supported in your browser")}}return d},vB:function(a,b){var c=this.selectSingleNode(a,b),d=[];if(c)for(c=c.firstChild;c;)c.xml?d.push(c.xml):window.XMLSerializer&&d.push((new XMLSerializer).serializeToString(c)),c=c.nextSibling;return d.length?d.join(""):null}},function(){var b={address:1,tY:1,dl:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,li:1,dt:1,de:1},c={body:1,div:1,table:1,tbody:1,tr:1,td:1,th:1,caption:1,form:1},d=function(b){for(var c=b.getChildren(),d=0,e=c.count();d<e;d++){var f=c.getItem(d);if(f.type==a.cv&&a.ga.um[f.getName()])return!0}return!1};j.qS=function(e){for(var f=this,g=null,h=null,j=[],k=e;k;){if(k.type==a.cv){f.qH||(f.qH=k);var l=k.getName();if(i&&"HTML"!=k.$.scopeName&&(l=k.$.scopeName.toLowerCase()+":"+l),h||(!g&&b[l]&&(g=k),c[l]&&(g||"div"!=l||d(k)?h=k:g=k)),j.push(k),"body"==l)break}k=k.getParent()}f.block=g,f.tX=h,f.elements=j}}(),j.qS.prototype={sJ:function(a){var b=this.elements,c=a&&a.elements;if(!c||b.length!=c.length)return!1;for(var d=0;d<b.length;d++)if(!b[d].equals(c[d]))return!1;return!0}},j.text=function(a,b){"string"==typeof a&&(a=(b?b.$:document).createTextNode(a)),this.$=a},j.text.prototype=new j.bi,k.extend(j.text.prototype,{type:a.fl,hJ:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},split:function(a){var b=this;if(i&&a==b.hJ()){var c=b.getDocument().jT("");return c.kB(b),c}var d=b.getDocument(),e=new j.text(b.$.splitText(a),d);if(h.ie8){var f=new j.text("",d);f.kB(e),f.remove()}return e},substring:function(a,b){return"number"!=typeof b?this.$.nodeValue.substr(a):this.$.nodeValue.substring(a,b)}}),j.pa=function(b){b=b||a.document,this.$=b.$.createDocumentFragment()},k.extend(j.pa.prototype,m.prototype,{type:a.om,kA:function(a){a=a.$,a.parentNode.insertBefore(this.$,a.nextSibling)}},!0,{append:1,pd:1,getFirst:1,dB:1,appendTo:1,jg:1,insertBefore:1,kA:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,iu:1,getChild:1,getChildren:1}),function(){function b(b,c){if(this._.end)return null;var d,f,e=this.mk,g=this.vR,h=this.type,i=b?"getPreviousSourceNode":"getNextSourceNode";if(!this._.start&&(this._.start=1,e.trim(),e.collapsed))return this.end(),null;if(!b&&!this._.kp){var j=e.endContainer,k=j.getChild(e.endOffset);this._.kp=function(b,c){return!(c&&j.equals(b)||k&&b.equals(k)||b.type==a.cv&&"body"==b.getName())}}if(b&&!this._.ka){var l=e.startContainer,m=e.startOffset>0&&l.getChild(e.startOffset-1);this._.ka=function(b,c){return!(c&&l.equals(b)||m&&b.equals(m)||b.type==a.cv&&"body"==b.getName())}}var n=b?this._.ka:this._.kp;for(f=g?function(a,b){return!1!==n(a,b)&&g(a)}:n,this.current?d=this.current[i](!1,h,f):b?(d=e.endContainer,e.endOffset>0?(d=d.getChild(e.endOffset-1),!1===f(d)&&(d=null)):d=!1===f(d)?null:d.hZ(!0,h,f)):(d=e.startContainer,d=d.getChild(e.startOffset),d?!1===f(d)&&(d=null):d=!1===f(e.startContainer)?null:e.startContainer.hL(!0,h,f));d&&!this._.end;){if(this.current=d,this.lf&&!1===this.lf(d)){if(c&&this.lf)return!1}else if(!c)return d;d=d[i](!1,h,f)}return this.end(),this.current=null}function c(a){for(var c,d=null;c=b.call(this,a);)d=c;return d}j.gm=k.createClass({$:function(a){this.mk=a,this._={}},ej:{end:function(){this._.end=1},next:function(){return b.call(this)},previous:function(){return b.call(this,!0)},sC:function(){return!1!==b.call(this,!1,!0)},sD:function(){return!1!==b.call(this,!0,!0)},uF:function(){return c.call(this)},uB:function(){return c.call(this,!0)},reset:function(){delete this.current,this._={}}}});var d={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,"table-column":1,"table-cell":1,"table-caption":1},e={hr:1};m.prototype.qy=function(a){var b=k.extend({},e,a||{});return d[this.getComputedStyle("display")]||b[this.getName()]},j.gm.pQ=function(b){return function(c,d){return!(c.type==a.cv&&c.qy(b))}},j.gm.us=function(){return this.pQ({br:1})},j.gm.tU=function(a){},j.gm.tW=function(a,b){function c(a){return a&&a.getName&&"span"==a.getName()&&a.hasAttribute("_fck_bookmark")}return function(d){var e,f;return e=d&&!d.getName&&(f=d.getParent())&&c(f),e=a?e:e||c(d),b^e}},j.gm.sf=function(b){return function(c){var d=c&&c.type==a.fl&&!k.trim(c.getText());return b^d}}}(),function(){if(h.webkit)return void(h.hc=!1);var b=m.kE('<div style="width:0px;height:0px;position:absolute;left:-10000px;border:1px solid;border-color:red blue;"></div>',a.document);b.appendTo(a.document.getHead());try{h.hc=b.getComputedStyle("border-top-color")==b.getComputedStyle("border-right-color")}catch(a){h.hc=!1}h.hc&&(h.cssClass+=" cke_hc"),b.remove()}(),o.load(n.pO.split(","),function(){a.status="loaded",a.oW("loaded");var b=a._.io;if(b){delete a._.io;for(var c=0;c<b.length;c++)a.add(b[c])}}),i)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(a){}CKFinder.lang.en={appTitle:"CKFinder",common:{unavailable:'%1<span class="cke_accessibility">, unavailable</span>',confirmCancel:"Some of the options were changed. Are you sure you want to close the dialog window?",ok:"OK",cancel:"Cancel",confirmationTitle:"Confirmation",messageTitle:"Information",inputTitle:"Question",undo:"Undo",redo:"Redo",skip:"Skip",skipAll:"Skip all",makeDecision:"What action should be taken?",rememberDecision:"Remember my decision"},dir:"ltr",HelpLang:"en",LangCode:"en",DateTime:"m/d/yyyy h:MM aa",DateAmPm:["AM","PM"],FoldersTitle:"Folders",FolderLoading:"Loading...",FolderNew:"Please type the new folder name: ",FolderRename:"Please type the new folder name: ",FolderDelete:'Are you sure you want to delete the "%1" folder?',FolderRenaming:" (Renaming...)",FolderDeleting:" (Deleting...)",DestinationFolder:"Destination Folder",FileRename:"Please type the new file name: ",FileRenameExt:"Are you sure you want to change the file extension? The file may become unusable.",FileRenaming:"Renaming...",FileDelete:'Are you sure you want to delete the file "%1"?',FilesDelete:"Are you sure you want to delete %1 files?",FilesLoading:"Loading...",FilesEmpty:"The folder is empty.",DestinationFile:"Destination File",SkippedFiles:"List of skipped files:",BasketFolder:"Basket",BasketClear:"Clear Basket",BasketRemove:"Remove from Basket",BasketOpenFolder:"Open Parent Folder",BasketTruncateConfirm:"Do you really want to remove all files from the basket?",BasketRemoveConfirm:'Do you really want to remove the file "%1" from the basket?',BasketRemoveConfirmMultiple:"Do you really want to remove %1 files from the basket?",BasketEmpty:"No files in the basket, drag and drop some.",BasketCopyFilesHere:"Copy Files from Basket",BasketMoveFilesHere:"Move Files from Basket",OperationCompletedSuccess:"Operation completed successfully.",OperationCompletedErrors:"Operation completed with errors.",FileError:"%s: %e",MovedFilesNumber:"Number of files moved: %s.",CopiedFilesNumber:"Number of files copied: %s.",MoveFailedList:"The following files could not be moved:<br />%s",CopyFailedList:"The following files could not be copied:<br />%s",Upload:"Upload",UploadTip:"Upload New File",Refresh:"Refresh",Settings:"Settings",Help:"Help",HelpTip:"Help",Select:"Select",SelectThumbnail:"Select Thumbnail",View:"View",Download:"Download",NewSubFolder:"New Subfolder",Rename:"Rename",Delete:"Delete",DeleteFiles:"Delete Files",CopyDragDrop:"Copy Here",MoveDragDrop:"Move Here",RenameDlgTitle:"Rename",NewNameDlgTitle:"New Name",FileExistsDlgTitle:"File Already Exists",SysErrorDlgTitle:"System Error",FileOverwrite:"Overwrite",FileAutorename:"Auto-rename",ManuallyRename:"Manually rename",OkBtn:"OK",CancelBtn:"Cancel",CloseBtn:"Close",UploadTitle:"Upload New File",UploadSelectLbl:"Select a file to upload",UploadProgressLbl:"(Upload in progress, please wait...)",UploadBtn:"Upload Selected File",UploadBtnCancel:"Cancel",UploadNoFileMsg:"Please select a file from your computer.",UploadNoFolder:"Please select a folder before uploading.",UploadNoPerms:"File upload not allowed.",UploadUnknError:"Error sending the file.",UploadExtIncorrect:"File extension not allowed in this folder.",UploadLabel:"Files to Upload",UploadTotalFiles:"Total Files:",UploadTotalSize:"Total Size:",UploadSend:"Upload",UploadAddFiles:"Add Files",UploadClearFiles:"Clear Files",UploadCancel:"Cancel Upload",UploadRemove:"Remove",UploadRemoveTip:"Remove !f",UploadUploaded:"Uploaded !n%",UploadProcessing:"Processing...",SetTitle:"Settings",SetView:"View:",SetViewThumb:"Thumbnails",SetViewList:"List",SetDisplay:"Display:",SetDisplayName:"File Name",SetDisplayDate:"Date",SetDisplaySize:"File Size",SetSort:"Sorting:",SetSortName:"by File Name",SetSortDate:"by Date",SetSortSize:"by Size",SetSortExtension:"by Extension",FilesCountEmpty:"<Empty Folder>",FilesCountOne:"1 file",FilesCountMany:"%1 files",Kb:"%1 KB",Mb:"%1 MB",Gb:"%1 GB",SizePerSecond:"%1/s",ErrorUnknown:"It was not possible to complete the request. (Error %1)",Errors:{10:"Invalid command.",11:"The resource type was not specified in the request.",12:"The requested resource type is not valid.",102:"Invalid file or folder name.",103:"It was not possible to complete the request due to authorization restrictions.",104:"It was not possible to complete the request due to file system permission restrictions.",105:"Invalid file extension.",109:"Invalid request.",110:"Unknown error.",111:"It was not possible to complete the request due to resulting file size.",115:"A file or folder with the same name already exists.",116:"Folder not found. Please refresh and try again.",117:"File not found. Please refresh the files list and try again.",118:"Source and target paths are equal.",201:'A file with the same name is already available. The uploaded file was renamed to "%1".',202:"Invalid file.",203:"Invalid file. The file size is too big.",204:"The uploaded file is corrupt.",205:"No temporary folder is available for upload in the server.",206:"Upload cancelled due to security reasons. The file contains HTML-like data.",207:'The uploaded file was renamed to "%1".',300:"Moving file(s) failed.",301:"Copying file(s) failed.",500:"The file browser is disabled for security reasons. Please contact your system administrator and check the CKFinder configuration file.",501:"The thumbnails support is disabled."},ErrorMsg:{FileEmpty:"The file name cannot be empty.",FileExists:"File %s already exists.",FolderEmpty:"The folder name cannot be empty.",FolderExists:"Folder %s already exists.",FolderNameExists:"Folder already exists.",FileInvChar:'The file name cannot contain any of the following characters: \n\\ / : * ? " < > |',FolderInvChar:'The folder name cannot contain any of the following characters: \n\\ / : * ? " < > |',PopupBlockView:"It was not possible to open the file in a new window. Please configure your browser and disable all popup blockers for this site.",XmlError:"It was not possible to properly load the XML response from the web server.",XmlEmpty:"It was not possible to load the XML response from the web server. The server returned an empty response.",XmlRawResponse:"Raw response from the server: %s"},Imageresize:{dialogTitle:"Resize %s",sizeTooBig:"Cannot set image height or width to a value bigger than the original size (%size).",resizeSuccess:"Image resized successfully.",thumbnailNew:"Create a new thumbnail",thumbnailSmall:"Small (%s)",thumbnailMedium:"Medium (%s)",thumbnailLarge:"Large (%s)",newSize:"Set a new size",width:"Width",height:"Height",invalidHeight:"Invalid height.",invalidWidth:"Invalid width.",invalidName:"Invalid file name.",newImage:"Create a new image",noExtensionChange:"File extension cannot be changed.",imageSmall:"Source image is too small.",contextMenuName:"Resize",lockRatio:"Lock ratio",resetSize:"Reset size"},Fileeditor:{save:"Save",fileOpenError:"Unable to open file.",fileSaveSuccess:"File saved successfully.",contextMenuName:"Edit",loadingFile:"Loading file, please wait..."},Maximize:{maximize:"Maximize",minimize:"Minimize"},Gallery:{current:"Image {current} of {total}"},Zip:{extractHereLabel:"Extract here",extractToLabel:"Extract to...",downloadZipLabel:"Download as zip",compressZipLabel:"Compress to zip",removeAndExtract:"Remove existing and extract",extractAndOverwrite:"Extract overwriting existing files",extractSuccess:"File extracted successfully."},Search:{searchPlaceholder:"Search"}},function(){var b=1,c=2,d=4,e=8,f=16,g=32,h=64,i=128;a.aL.Acl=function(a){var j=this;a||(a=0),j.folderView=(a&b)==b,j.folderCreate=(a&c)==c,j.folderRename=(a&d)==d,j.folderDelete=(a&e)==e,j.fileView=(a&f)==f,j.fileUpload=(a&g)==g,j.fileRename=(a&h)==h,j.fileDelete=(a&i)==i},o.add("acl")}(),function(){o.add("connector",{bM:[],bz:function(b){b.on("appReady",function(){b.connector=new a.aL.Connector(b);var c=b.config.resourceType,d=c?{type:c}:null;b.connector.sendCommand("Init",d,function(c){var d;if(!c.checkError()){var e="Connector/ConnectorInfo/";a.ed=c.selectSingleNode(e+"@s").value,a.bF=c.selectSingleNode(e+"@c").value+"----",b.config.thumbsEnabled="true"==c.selectSingleNode(e+"@thumbsEnabled").value,b.config.thumbsDirectAccess=!1,b.config.thumbsEnabled?(d=c.selectSingleNode(e+"@thumbsUrl"),d&&(b.config.thumbsUrl=d.value),d=c.selectSingleNode(e+"@thumbsDirectAccess"),d&&(b.config.thumbsDirectAccess="true"==d.value),d=c.selectSingleNode(e+"@thumbsWidth"),b.config.thumbsWidth=(d?parseInt(d.value,10):100)||100,d=c.selectSingleNode(e+"@thumbsHeight"),b.config.thumbsHeight=(d?parseInt(d.value,10):100)||100):(b.config.thumbsWidth=100,b.config.thumbsHeight=100),b.config.imagesMaxWidth=parseInt(c.selectSingleNode(e+"@imgWidth").value,10),b.config.imagesMaxHeight=parseInt(c.selectSingleNode(e+"@imgHeight").value,10),d=c.selectSingleNode(e+"@uploadMaxSize"),b.config.uploadMaxSize=d?parseInt(d.value,10):0,d=c.selectSingleNode(e+"@uploadCheckImages"),b.config.uploadCheckImages=!!d&&"true"==d.value;var f=c.selectSingleNode(e+"@plugins"),g=f&&f.value;g&&g.length?o.load(g.split(","),function(d){var e=[],f=[],g=[];for(var h in d){var i=d[h],j=i.lang,l=o.getPath(h),m=null;b.plugins[h]||(b.plugins[h]=d[h],d[h].name=h,i.pathName=l,j&&(m=k.indexOf(j,b.langCode)>=0?b.langCode:j[0],i.lang[m]?(k.extend(b.lang,i.lang[m]),m=null):g.push(a.getUrl(l+"lang/"+m+".js"))),f.push(m),e.push(i))}a.scriptLoader.load(g,function(){for(var d=["eK","bz","gr"],g=0;g<d.length;g++)for(var h=0;h<e.length;h++){var i=e[h];0===g&&f[h]&&i.lang&&k.extend(b.lang,i.lang[f[h]]),i[d[g]]&&(a.log("[PLUGIN] "+i.name+"."+d[g]),i[d[g]](b))}b.cr("uiReady"),b.cr("appReady"),b.oW("pluginsLoaded",{step:2,jN:b.connector}),b.cr("connectorInitialized",{xml:c})})}):(b.oW("pluginsLoaded",{step:2,jN:b.connector}),b.cr("connectorInitialized",{xml:c}))}})})}}),a.aL.Connector=function(b){this.app=b;var c=b.config.connectorLanguage||"php";b.config.connectorPath?this.oN=b.config.connectorPath:this.oN=a.basePath+"core/connector/"+c+"/connector."+c},a.aL.Connector.prototype={ERROR_NONE:0,ERROR_CUSTOMERROR:1,ERROR_INVALIDCOMMAND:10,ERROR_TYPENOTSPECIFIED:11,ERROR_INVALIDTYPE:12,ERROR_INVALIDNAME:102,ERROR_UNAUTHORIZED:103,ERROR_ACCESSDENIED:104,ERROR_INVALIDEXTENSION:105,ERROR_INVALIDREQUEST:109,ERROR_UNKNOWN:110,ERROR_ALREADYEXIST:115,ERROR_FOLDERNOTFOUND:116,ERROR_FILENOTFOUND:117,ERROR_SOURCE_AND_TARGET_PATH_EQUAL:118,ERROR_UPLOADEDFILERENAMED:201,ERROR_UPLOADEDINVALID:202,ERROR_UPLOADEDTOOBIG:203,ERROR_UPLOADEDCORRUPT:204,ERROR_UPLOADEDNOTMPDIR:205,ERROR_UPLOADEDWRONGHTMLFILE:206,ERROR_UPLOADEDINVALIDNAMERENAMED:207,ERROR_MOVE_FAILED:300,ERROR_COPY_FAILED:301,ERROR_CONNECTORDISABLED:500,ERROR_THUMBNAILSDISABLED:501,currentFolderUrl:function(){if(this.app.aV)return this.app.aV.getUrl()},currentType:function(){if(this.app.aV)return this.app.aV.type},currentTypeHash:function(){if(this.app.aV)return a.getResourceType(this.app.aV.type).hash},currentResourceType:function(){return a.getResourceType(this.currentType())},sendCommand:function(c,d,e,f,g){var h=this.composeUrl(c,d,f,g),i=this;return e?a.ajax.loadXml(h,function(a){a.hy=i.app,i.app.oW("connectorResponse",{xml:a}),e(k.extend(a,b))}):a.ajax.loadXml(h,function(a){i.app.oW("connectorResponse",{xml:a})})},sendCommandPost:function(c,d,e,f,g,h){var i=this.composeUrl(c,d,g,h),j=this;return e||(e={}),e.CKFinderCommand=!0,f?a.ajax.loadXml(i,function(a){a.hy=j.app,j.app.oW("connectorResponse",{xml:a}),f(k.extend(a,b))},this.composeUrlParams(e)):a.ajax.loadXml(i,function(a){j.app.oW("connectorResponse",{xml:a})},this.composeUrlParams(e))},composeUrl:function(a,b,c,d){var e=this,f=e.oN+"?command="+encodeURIComponent(a);if("Init"!=a){var g="";d||(d=e.app.aV),g=c?e.app.getResourceType(c).hash:e.app.getResourceType(d.type).hash,f+="&type="+encodeURIComponent(c||e.app.aV.type)+"&currentFolder="+encodeURIComponent(d.getPath()||"")+"&langCode="+e.app.langCode+"&hash="+g}if(b){var h=e.composeUrlParams(b);h&&(f+="&"+h)}return e.app.id&&(f+="&id="+encodeURIComponent(e.app.id)),e.app.config.connectorInfo&&(f+=("&"!=e.app.config.connectorInfo.charAt(0)?"&":"")+e.app.config.connectorInfo),f},composeUrlParams:function(a){if(!a)return"";var b="";for(var c in a)b.length&&(b+="&"),b+=encodeURIComponent(c)+"="+encodeURIComponent(a[c]);return b}};var b={checkError:function(){var b=this,c=b.getErrorNumber(),d=b.hy.connector;if(c==d.ERROR_NONE)return!1;if(-1===c)return!0;var e=b.getErrorMessage();a.log("[ERROR] "+c);var f;if(c==d.ERROR_CUSTOMERROR)f=e;else if(f=b.hy.lang.Errors[c])for(var g=0;g<=arguments.length;g++){var h=0===g?e:arguments[g-1];f=f.replace(/%(\d+)/,h)}else f=b.hy.lang.ErrorUnknown.replace(/%1/,c);return b.hy.msgDialog("",f),c!=d.ERROR_UPLOADEDFILERENAMED},getErrorNumber:function(){var a=this.selectSingleNode&&this.selectSingleNode("Connector/Error/@number");return a?parseInt(a.value,10):-1},getErrorMessage:function(){var a=this.selectSingleNode&&this.selectSingleNode("Connector/Error/@text");return a?a.value:""}}}(),o.add("resource",{bM:["connector"],bz:function(b){b.resourceTypes=[],b.on("connectorInitialized",function(c){for(var d=c.data.xml.selectNodes("Connector/ResourceTypes/ResourceType"),e=0;e<d.length;e++){var f=d[e].attributes;b.resourceTypes.push(new a.aL.ResourceType(b,{name:f.getNamedItem("name").value,url:f.getNamedItem("url").value,hasChildren:f.getNamedItem("hasChildren").value,allowedExtensions:f.getNamedItem("allowedExtensions").value,deniedExtensions:f.getNamedItem("deniedExtensions").value,acl:f.getNamedItem("acl").value,hash:f.getNamedItem("hash").value,maxSize:f.getNamedItem("maxSize").value}))}b.cr("resourcesReceived",{hK:b.resourceTypes})}),b.getResourceType=function(a){for(var b=0;b<this.resourceTypes.length;b++){var c=this.resourceTypes[b];if(c.name==a)return c}return null}}}),function(){function b(a){var b={};if(a.length>0)for(var c=a.toLowerCase().split(","),d=0;d<c.length;d++)b[c[d]]=!0;return b}a.aL.ResourceType=function(a,c){var d=this;d.app=a,d.name=c.name,d.url=c.url,d.hasChildren="true"===c.hasChildren,d.defaultView="Thumbnails",d.allowedExtensions=c.allowedExtensions,d.deniedExtensions=c.deniedExtensions,d.oT=b(c.allowedExtensions),d.ms=b(c.deniedExtensions),d.nS=c.acl,d.hash=c.hash,d.maxSize=c.maxSize},a.aL.ResourceType.prototype={isExtensionAllowed:function(a){var b=this;return a=a.toLowerCase(),!(0!==b.deniedExtensions.length&&b.ms[a]||0!==b.allowedExtensions.length&&!b.oT[a])},allowedExtensions:function(){return this.allowedExtensions},getRootFolder:function(){for(var a=0;a<this.app.folders.length;a++){var b=this.app.folders[a];if(b.isRoot&&b.type==this.name)return b}}}}(),function(){var a=function(a){this.app=a};a.prototype.er=function(a,b){var c=this;if(!c.id){c.toolbarId="cke_"+k.getNextNumber(),c.id="cke_"+k.getNextNumber(),c.placeholderId="cke_"+k.getNextNumber();var d={id:c.id,placeholderId:c.placeholderId,lastTimeout:-1,app:a},e=k.addFunction(a.search.doSearch,d),f=k.addFunction(a.search.onFocus,d);b.push('<span class="cke_search_box" id="',c.toolbarId,'" class="cke_toolbar" role="presentation"><span class="cke_toolbar_start"></span>'),b.push('<input id="'+c.id+'" '),b.push(' onkeyup="window.parent.CKFinder._.callFunction(',e,', this);"'),b.push(' oninput="window.parent.CKFinder._.callFunction(',e,', this);"'),b.push(' onfocus="window.parent.CKFinder._.callFunction(',f,', this);"'),b.push(">"),b.push('<span id="'+c.placeholderId+'" class="cke_search_placeholder" onclick="window.parent.CKFinder._.callFunction(',f,', this);">'+a.lang.Search.searchPlaceholder+"</span>"),b.push('<span class="cke_toolbar_end"></span></span>')}},a.prototype.doSearch=function(){var a=this.app.ld["filesview.filesview"].oE().shownFiles.length,b=this.app.document.getById(this.id).getValue(),c=this.app;this.lastTimeout&&(clearTimeout(this.lastTimeout),this.lastTimeout=null),a<200?c.ld["filesview.filesview"].oW("requestRenderFiles",{lookup:b}):this.lastTimeout=setTimeout(function(){c.ld["filesview.filesview"].oW("requestRenderFiles",{lookup:b})},1e3)},a.prototype.onFocus=function(){var a=this;a.app.document.getById(a.placeholderId).setStyle("display","none"),a.app.document.getById(a.id).$.focus()},a.prototype.reset=function(){var a=this;a.app.document.getById(a.id).setValue(""),a.app.document.getById(a.placeholderId).setStyle("display","inline")},o.add("search",{bM:["foldertree"],eK:function(b){b.search=new a(b)},bz:function(a){a.on("appReady",function(){a.ld["foldertree.foldertree"].on("beforeSelectFolder",function(){a.search.reset()}),a.ld["formpanel.formpanel"].on("afterUploadFile",function(){a.search.reset()})})}})}(),function(){function c(b,c,d,e,f){null===b.childFolders&&(b.childFolders=[]);var g=new a.aL.Folder(b.app,c,d,e,f);return g.parent=b,g.nh=b.isRoot?0:b.nh+1,b.childFolders.push(g),g}function d(a){return a.folders||(a.folders=[]),a.folders}function e(c,d){if(!c||0===c.length)throw new a.dU("name_empty",d.lang.ErrorMsg.FolderEmpty);if(b.iz.test(c))throw new a.dU("name_invalid_chars",d.lang.ErrorMsg.FolderInvChar);return!0}var b={iz:/[\\\/:\*\?"<>\|]/};o.add("folder",{bM:["resource","connector","acl"],bz:function(b){b.folders=d(b),b.aV=null,b.on("resourcesReceived",function(d){for(var e=[],f=d.data.hK,g=0;g<f.length;g++){var h=f[g];e.push(new a.aL.Folder(b,h.name,h.name,h.hasChildren,h.nS)),e[e.length-1].isRoot=!0}b.oW("requestAddFolder",{folders:e},function(){var d=b.config.startupPath||"",e=0,f="",g="";if(b.config.rememberLastFolder){var h=b.id?"CKFinder_Path_"+b.id:"CKFinder_Path";f=decodeURIComponent(k.getCookie(h))||""}if(d&&!b.qn?(g=d,e=1):f?g=f:d?g=d:b.resourceTypes.length&&(g=b.resourceTypes[0].name+"/"),g){a.log("[FOLDER] Opening startup path: "+g);var i=g.split(":");(!b.getResourceType(i[0])||i.length<2)&&(i=[b.resourceTypes[0].name,"/"]);var j=b.ld["foldertree.foldertree"],l=/(.*\/)(.*)$/.exec(i[1]);j.tools.jL(i[0],l[1],function(d){if(d){a.log("[FOLDER] Opening startup folder: ",d);var f=!e&&("1"==i[2]||void 0===i[2]);f&&!1===b.config.startupFolderExpanded&&(f=0),j.oW("requestSelectFolder",{folder:d,expand:f,file:l[2]&&d.type==i[0]&&d.getPath()==l[1]?l[2]:""})}})}})}),b.bD("RemoveFolder",{readOnly:!1,exec:function(a){var b=a.aV;if(b){if(b.isRoot||!b.acl.folderDelete)return;a.fe("",a.lang.FolderDelete.replace("%1",b.name),function(){a.oW("requestProcessingFolder",{folder:b}),b.remove()})}}}),b.bD("CreateSubFolder",{readOnly:!1,exec:function(b){var c=b.aV;c&&b.hs(b.lang.NewNameDlgTitle,b.lang.FolderRename,"",function(d){if(d=k.trim(d))try{b.oW("requestProcessingFolder",{folder:c}),c.createNewFolder(d)}catch(d){if(!(d instanceof a.dU))throw d;b.oW("requestRepaintFolder",{folder:c}),b.msgDialog("",d.message)}})}}),b.bD("RenameFolder",{readOnly:!1,exec:function(b){var c=b.aV;if(c){if(c.isRoot||!c.acl.folderRename)return;b.hs(b.lang.RenameDlgTitle,b.lang.FolderRename,b.aV.name,function(d){if(d=k.trim(d))try{c.rename(d)}catch(d){if(!(d instanceof a.dU))throw d;b.oW("requestRepaintFolder",{folder:c}),b.msgDialog("",d.message)}})}}}),b.eU&&(b.dZ("folder0",99),b.dZ("folder1",100),b.dZ("folder2",101),b.dZ("folder3",102),b.eU({createSubFolder:{label:b.lang.NewSubFolder,command:"CreateSubFolder",group:"folder1"},renameFolder:{label:b.lang.Rename,command:"RenameFolder",group:"folder1"},removeFolder:{label:b.lang.Delete,command:"RemoveFolder",group:"folder2"}}))}}),a.aL.Folder=function(b,c,e,f,g){var h=this;h.app=b,h.type=c||"",h.name=e||"",h.hasChildren=void 0==f||null===f||!!f,h.isRoot=!1,h.isOpened=!1,h.parent=null,h.isDirty=!1,h.acl=new a.aL.Acl(g),h.index=d(b).push(h)-1,h.childFolders=null},a.aL.Folder.prototype={getPath:function(){for(var a=this,b=a.isRoot?"/":a.name;a.parent;)a=a.parent,b=a.isRoot?"/"+b:a.name+"/"+b;return a!=this?b+"/":b},getUrl:function(){for(var a=this,b="";a;)b=a.isRoot?this.app.getResourceType(a.type).url+b:encodeURIComponent(a.name)+"/"+b,a=a.parent;return b},getUploadUrl:function(){return this.app.connector.composeUrl("FileUpload",{},this.type,this)},getResourceType:function(){return this.app.getResourceType(this.type)},updateReference:function(){var a=this;if(a.app.folders[a.index]==a)return a;for(var b=0;b<a.parent.childFolders.length;b++)if(a.parent.childFolders[b].name==a.name)return a.parent.childFolders[b]},getChildren:function(b,d){var e=this,f=e.childFolders;if(e.hl&&!d){a.log("[FOLDER] getChildrenLock active, defering callback..."),e.app.oW("requestLoadingFolder",{folder:e});var g=100;return void setTimeout(function(){e.hl?g<=3e3?setTimeout(arguments.callee,g*=2):(a.log("[FOLDER] TIMEOUT for getChildrenLock defered callback!"),e.hl=!1,e.getChildren(b)):b(f)})}if(f&&!e.isDirty&&!d)return b(f),f;if(e.hl=!0,e.isDirty&&f){a.log("[FOLDER] Clearing folder children cache.");for(var h=0;h<f.length;h++)delete e.app.folders[f[h].index]}return e.app.oW("requestLoadingFolder",{folder:e}),this.app.connector.sendCommand("GetFolders",null,function(a){if(a.checkError())return void e.app.oW("requestRepaintFolder",{folder:e});var d=a.selectSingleNode("Connector/@resourceType").value;e.hm=!0;var f=a.selectNodes("Connector/Folders/Folder"),g=[];e.childFolders=null;for(var h=0;h<f.length;h++){var i=f[h].attributes.getNamedItem("name").value,j="true"==f[h].attributes.getNamedItem("hasChildren").value,k=parseInt(f[h].attributes.getNamedItem("acl").value,10);g.push(c(e,d,i,j,k))}e.hasChildren=!!f.length,e.isDirty=!1,e.hl=null,e.app.oW("requestRepaintFolder",{folder:e}),b(g)},e.type,e),null},mapLoadedDescendants:function(a){if(this.childFolders)for(var b=0;b<this.childFolders.length;b++){var c=this.childFolders[b];c.mapLoadedDescendants(a),a(c)}},select:function(){this.app.oW("requestSelectFolder",{folder:this})},isSelected:function(){return this.app.aV&&this==this.app.aV},deselect:function(){this.app.oW("requestSelectFolder")},open:function(a){a&&!this.hm||this.app.oW("requestExpandFolder",{folder:this})},close:function(){this.app.oW("requestExpandFolder",{folder:this,collapse:1})},hU:function(){for(var a=1,b=this;b;)a++,b=b.parent;return a},toggle:function(){var a=this;a.hasChildren&&(a.isOpened?a.close():a.open())},createNewFolder:function(a){e(a,this.app);var b=this;b.isDirty=!0,b.app.connector.sendCommandPost("CreateFolder",{NewFolderName:a},null,function(c){if(c.checkError())return void b.app.oW("requestRepaintFolder",{folder:b});b.hasChildren=!0,b.app.oW("afterCommandExecDefered",{name:"CreateFolder",ip:b,uv:a})},this.type,this)},rename:function(a){e(a,this.app);var b=this;if(this.app.oW("requestProcessingFolder",{folder:b}),b.parent.isDirty=!0,b.name==a)return void b.app.oW("requestRepaintFolder",{folder:b});b.app.connector.sendCommandPost("RenameFolder",{NewFolderName:a},null,function(a){if(a.checkError())return void b.app.oW("requestRepaintFolder",{folder:b});b.parent.isDirty=!1,b.name=a.selectSingleNode("Connector/RenamedFolder/@newName").value,b.app.oW("requestRepaintFolder",{folder:b})},this.type,this)},remove:function(){var a=this;a.deselect(),a.parent.isDirty=!0,this.app.oW("requestProcessingFolder",{folder:a}),a.app.connector.sendCommandPost("DeleteFolder",null,null,function(b){if(b.checkError())return void a.app.oW("requestRepaintFolder",{folder:a});a.app.oW("requestRemoveFolder",{folder:a},function(){var b=k.indexOf(a.parent.childFolders,a),c=a.index,d=a.parent,e=a.app;d.childFolders[b].mapLoadedDescendants(function(a){e.folders[a.index].isDeleted=!0,delete e.folders[a.index]}),d.childFolders.splice(b,1),e.folders[c].isDeleted=!0,delete e.folders[c],0===d.childFolders.length&&(d.childFolders=null,d.hasChildren=!1),a.releaseDomNodes&&a.releaseDomNodes(),e.oW("afterCommandExecDefered",{name:"RemoveFolder",ip:d,uN:c,folder:a})})},this.type,this)},toString:function(){return this.getPath()}}}(),function(){function c(){function c(a){this.ib=a,this.bi=a.tools.kI().cf()}var b=a.ld.hS("foldertree","foldertree");b.dT.push(function(){var a=this.bn();a.hasClass("view")||(a=a.getParent()),k.mH(a)}),b.bh("KeyboardNavigation",["keydown","requestKeyboardNavigation"],function(c){var d=this,e=this.tools.cq(c),f=0;if(c.data&&c.data.bK){var g=c.data.bK();f=g.$==d.bn().$}if(e||f){var h=k.extend({},c.data,{folder:e},!0);this.oW("beforeKeyboardNavigation",h,function(g,h){if(!g)try{var i=c.data.db();if(f&&i>=37&&i<=40){var j=d.app.folders[0];j&&this.tools.cT(j)}else{var k;if(38==i)if(c.data.preventDefault(),k=e.liNode(),k.gE()){for(var l=this.tools.cq(k.cf());l.isOpened&&l.hasChildren&&l.childFolders.length;)l=l.childFolders[l.childFolders.length-1];this.tools.cT(l)}else e.isRoot||this.tools.cT(e.parent);else 39==i&&e.hasChildren?e.isOpened?e.getChildren(function(a){d.tools.cT(a[0])}):this.oW("requestExpandFolder",{folder:e}):40==i?(c.data.preventDefault(),k=e.liNode(),e.isOpened&&e.hasChildren?e.getChildren(function(a){d.tools.cT(a[0])}):k.ge()?this.tools.cT(this.tools.cq(k.dG())):!e.isRoot&&e.parent&&function(a){var b=a.liNode();b.ge()?d.tools.cT(d.tools.cq(b.dG())):a.parent&&arguments.callee(a.parent)}(e.parent)):37==i?e.isOpened?this.oW("requestExpandFolder",{folder:e,collapse:1}):!e.isRoot&&e.parent&&this.tools.cT(e.parent):46==i?(d.app.oW("requestSelectFolder",{folder:e}),d.app.execCommand("RemoveFolder")):113==i&&(d.app.oW("requestSelectFolder",{folder:e}),d.app.execCommand("RenameFolder"))}this.oW("successKeyboardNavigation",h),this.oW("afterKeyboardNavigation",h)}catch(b){throw b=a.ba(b),this.oW("failedKeyboardNavigation",h),this.oW("afterKeyboardNavigation",h),b}})}}),b.dT.push(function(a,b){a.on("afterCommandExecDefered",function(c){if(c.data){var d=c.data.folder;if("RemoveFolder"==c.data.name){d==b.tools.ew&&(b.tools.cT(),b.bn().focus());var e=a.ld["filesview.filesview"].tools.folder,f=d==e;d.mapLoadedDescendants(function(a){e==d&&(f=!0)}),b.oW("requestSelectFolder",{folder:d.parent,expand:f})}else"RenameFolder"==c.data.name&&d==b.tools.ew&&d.focus()}})}),b.bh("RemoveFolder","requestRemoveFolder",function(c){var e=this.tools.cq(c),f=k.extend({},c.data,{folder:e},!0);this.oW("beforeRemoveFolder",f,function(c,d){var f=this;if(!c)try{e.liNode().remove(),f.oW("successRemoveFolder",d),f.oW("afterRemoveFolder",d)}catch(b){throw f.oW("failedRemoveFolder",d),f.oW("afterRemoveFolder",d),a.ba(b)}})},!1),b.bh("LoadingFolder","requestLoadingFolder",function(c){var d=this,e=this.tools.cq(c);if(e){var f=k.extend({},c.data,{folder:e},!0);this.oW("beforeLoadingFolder",f,function(c,e){if(!c){var f=e.folder;try{this.on("afterExpandFolder",function(a){if(a.data&&a.data.folder==f){a.removeListener();var b=f.childrenRootNode().getChild(0);b&&b.hasClass("loading")&&(b.remove(),this.oW("requestRepaintFolder",{folder:f}),e.step=2,d.oW("successLoadingFolder",e),d.oW("afterLoadingFolder",e))}},null,null,1),f.childrenRootNode()&&f.childrenRootNode().setHtml('<li class="loading">'+d.app.lang.FolderLoading+"</li>"),this.oW("requestProcessingFolder",{folder:f}),e.step=1,this.oW("successLoadingFolder",e)}catch(b){throw this.oW("failedLoadingFolder",e),this.oW("afterLoadingFolder",e),a.ba(b)}}})}}),b.bh("ProcessingFolder",["requestProcessingFolder"],function(c){c.result=this.oW("beforeProcessingFolder",c.data,function(c,d){var e=this;if(!c)try{e.tools.cq(d.folder).aNode().addClass("processing"),e.oW("successProcessingFolder",d),e.oW("afterProcessingFolder",d)}catch(b){throw b=a.ba(b),e.oW("failedProcessingFolder",d),e.oW("afterProcessingFolder",d),b}})}),b.bh("RepaintFolder",["requestRepaintFolder"],function(c){this.oW("beforeRepaintFolder",c.data,function(c,d){var e=this;if(!c)try{var f=e.tools.cq(d.folder),g=f.liNode(),h=f.expanderNode(),i=f.aNode(),j=f.childrenRootNode(),l=f.name;i.getHtml()!=l&&i.setHtml(k.htmlEncode(f.name)),i.removeClass("processing"),f.hasChildren?f.hasChildren&&(j.$.hasChildNodes()?(g.addClass("closable"),g.removeClass("openable"),h.setAttribute("aria-expanded","true")):(g.addClass("openable"),g.removeClass("closable"),h.removeAttribute("aria-expanded"))):(g.removeClass("openable"),g.removeClass("closable"),g.addClass("nochildren"),h.removeAttribute("aria-expanded"),j.$.hasChildNodes()&&j.setHtml("")),e.oW("successRepaintFolder"),e.oW("afterRepaintFolder")}catch(b){throw e.oW("failedRepaintFolder"),e.oW("afterRepaintFolder"),a.ba(b)}})}),b.dT.push(function(a,b){a.on("afterCommandExecDefered",function(a){a.data&&"RemoveFolder"==a.data.name&&b.oW("requestRepaintFolder",{folder:a.data.ip})})}),b.bh("AddFolder","requestAddFolder",function(c){var d=this,g={folders:c.data.folder?[c.data.folder]:c.data.folders,root:c.data.root};this.oW("beforeAddFolder",g,function(c,g){if(!c){var j,k,h=g.folders,i=g.root?this.tools.cq(g.root):null;try{if(i)!1===i.hasChildren?i.liNode().addClass("nochildren"):(i.liNode().removeClass("nochildren"),j=f(h,e),i.childrenRootNode().appendHtml(j));else{for(var l={},m=0;m<h.length;m++)k=h[m].parent?h[m].parent.index:-1,l[k]||(l[k]=[]),l[k].push(h[m]);for(var n in l)j=f(l[n],e),-1==n?this.tools.kI().appendHtml(j):(k=this.tools.cq(n),k.liNode().removeClass("nochildren"),k.childrenRootNode().appendHtml(j));(1==a.bs.indexOf(a.bF.substr(1,1))%5&&a.lS(window.top[a.nd+"cation"][a.jG+"st"])!=a.lS(a.ed)||a.bF.substr(3,1)!=a.bs.substr(9*(a.bs.indexOf(a.bF.substr(0,1))+a.bs.indexOf(a.bF.substr(2,1)))%(a.bs.length-1),1))&&setTimeout(function(){d.app.layout.ea()},100)}this.oW("successAddFolder"),this.oW("afterAddFolder")}catch(b){throw this.oW("failedAddFolder"),this.oW("afterAddFolder"),a.ba(b)}}})}),b.bh("SelectFolder",["click","requestSelectFolder","requestSelectFolderRefresh"],function(c){var d=this,e="click"==c.name,f=e&&c.data.bK();if(!this.tools.kg(c)){var g=this.tools.cq(c);if(e&&f.hasClass("dropdown"))return c.jN.oW("contextmenu",c.data),void c.cancel();if(e||"requestSelectFolder"==c.name){if(e&&!g)return;if(e&&g.aNode()&&g.aNode().$!=f.$)return;var h=k.extend({jR:1,expand:0},c.data,{folder:g},!0);this.oW("beforeSelectFolder",h,function(c,f){if(!c){var g=f.folder;try{if(this.app.aV&&(!g||g!=this.app.aV)){var h=this.app.aV.liNode();h&&h.removeClass("selected"),d.tools.hk().mc(),this.app.aV=null}return g?(e&&this.tools.cT(g),f.expand&&d.oW("requestExpandFolder",{folder:g}),g.liNode().addClass("selected"),this.app.aV=g,d.tools.hk().select(g.aNode()),f.jR&&(d.oW("requestProcessingFolder",{folder:g}),d.tools.mV(g,1),d.app.oW("requestShowFolderFiles",{folder:g,mw:f.file},function(a,b){b.ib&&b.ib.on("afterShowFolderFiles",function(a){a.data.folder==g&&(a.removeListener(),d.oW("requestRepaintFolder",{folder:g}))})})),this.oW("successSelectFolder"),this.oW("afterSelectFolder"),g):(this.oW("successSelectFolder"),void this.oW("afterSelectFolder"))}catch(b){throw this.oW("failedSelectFolder"),this.oW("afterSelectFolder"),a.ba(b)}}})}else"requestSelectFolderRefresh"==c.name&&this.oW("beforeSelectFolderRefresh",function(c){var d=this;if(!c)try{if(d.app.aV){var e=d.app.aV.aNode();e?d.tools.hk().select(e):(d.tools.hk().mc(),d.oW("failedSelectFolderRefresh"))}else d.oW("successSelectFolderRefresh");return d.oW("afterSelectFolderRefresh"),g}catch(b){throw d.oW("failedSelectFolderRefresh"),d.oW("afterSelectFolderRefresh"),a.ba(b)}})}}),b.dT.push(function(a,b){b.on("afterExpandFolder",function(){b.oW("requestSelectFolderRefresh")},null,null,999),b.on("successRemoveFolder",function(){b.oW("requestSelectFolderRefresh")}),b.on("successLoadingFolder",function(a){1==a.data.step&&b.oW("requestSelectFolderRefresh")})}),b.bh("ExpandFolder",["click","requestExpandFolder"],function(c){var d=this,e="click"==c.name,f=e&&c.data.bK();if(!this.tools.kg(c)&&(!e||f.hasClass("expander"))){var g=this.tools.cq(c),h=k.extend({collapse:0},c.data,{folder:g,hE:e},!0);this.oW("beforeExpandFolder",h,function(c,e){if(!c)try{var f=e.folder,g=f.liNode(),h=f.expanderNode();if(!f.acl.folderView)throw d.app.msgDialog("",d.app.lang.Errors[104]),"[CKFINDER] No permissions to view folder.";if(f.hasChildren){var i=e.hE&&g.hasClass("openable"),j=!e.hE&&!e.collapse&&!g.hasClass("closable"),k=!e.hE&&!e.collapse&&g.hasClass("closable"),l=!e.collapse&&e.force;i||j||l?(g.removeClass("openable"),g.addClass("closable"),h.setAttribute("aria-expanded","true"),f.getChildren(function(a){a?(d.oW("requestAddFolder",{folders:a,root:f}),f.isOpened=!0):(d.oW("requestRepaintFolder",{folder:f}),f.isOpened=!1),e.step=2,d.oW("successExpandFolder",e),d.oW("afterExpandFolder",e)}),e.step=1,d.oW("successExpandFolder",e)):e.hE||!e.hE&&e.collapse?(g.removeClass("closable"),g.addClass("openable"),h.setAttribute("aria-expanded","false"),f.childrenRootNode().setHtml(""),f.isOpened=!1,f.hm?f.getChildren(function(a){f.mapLoadedDescendants(function(a){a.releaseDomNodes()}),d.oW("successExpandFolder",e),d.oW("afterExpandFolder",e)}):(this.oW("requestRepaintFolder",{folder:f}),this.oW("failedExpandFolder"),this.oW("afterExpandFolder"))):k&&(d.oW("successExpandFolder",e),d.oW("afterExpandFolder",e))}else this.oW("failedExpandFolder"),this.oW("afterExpandFolder");return f}catch(b){throw this.oW("failedExpandFolder"),this.oW("afterExpandFolder"),a.ba(b)}})}}),b.dT.push(function(a,b){a.on("afterCommandExecDefered",function(a){a.data&&"CreateFolder"==a.data.name&&b.oW("requestExpandFolder",{folder:a.data.ip,force:1})})}),b.tools.jL=function(b,c,d){var e=this.ib,f=this.ib.app.getResourceType(b).getRootFolder(),g=f,h="/"==c?[]:c.split("/").slice(1);if(""===h[h.length-1]&&(h=h.slice(0,-1)),0===h.length)return void d(f);e.on("successExpandFolder",function(a){if(2==a.data.step){var b=a.data.folder;if(b==g)for(var c=h.shift(),f=0;f<b.childFolders.length;f++){var i=b.childFolders[f];if(i.name==c){if(0===h.length)return a.removeListener(),void d(i);g=i,e.oW("requestExpandFolder",{folder:i})}}}}),e.oW("requestExpandFolder",{folder:f})},b.tools.cq=function(b){var d,c=this,e=0;if(b.data&&b.data.folder instanceof m?(b=b.data.folder,e=1):b.data&&b.data.bK?(b=b.data.bK(),e=1):b instanceof j.bi&&(e=1),e){for(var f=b;f&&!f.is("li")&&f!=c.ib.eh;)f=f.getParent();if(f&&f.is("li")){var g=f.dS();g&&(d=c.ib.app.folders[g.slice(1)])}}else"number"==typeof b?d=c.ib.app.folders[b]:"string"==typeof b?d=c.ib.app.folders[f.dS().slice(1)]:b.data&&b.data.folder instanceof a.aL.Folder?d=b.data.folder:b.data&&b.data.folders&&b.data.folders.length&&b.data.folders[0]instanceof a.aL.Folder?d=b.data.folders[0]:b instanceof a.aL.Folder&&(d=b);return d},b.tools.mV=function(a,b){var c=a.type,d=a.getPath(),e=this.ib.app.id;b=void 0===b?a.isOpened:!!b+1-1,k.setCookie(e?"CKFinder_Path_"+e:"CKFinder_Path",encodeURIComponent(c+":"+d+":"+b))},c.prototype={select:function(a){this.bi.setStyles({height:a.$.offsetHeight+"px",top:a.$.offsetTop+"px",display:"block"})},mc:function(a){this.bi.setStyles({display:"none"})},ie6FixParentNode:function(){var a=this;return a.kv||(a.kv=a.ib.app.document.getById("folders_view").getChild(1)),a.kv}},b.tools.hk=function(){var a=this.ib.oE();return a.la||(a.la=new c(this.ib)),a.la},b.tools.kI=function(){var a=this;return a.kW||(a.kW=l(i(a.ib.bn().getChild(1).$.childNodes,"ul"))),a.kW},b.tools.cT=function(a){var b=this;a?(b.ew?b.ew.blur():b.ib.bn().setAttribute("tabindex",-1),b.ew=a,a.focus()):(delete b.ew,b.ib.bn().setAttribute("tabindex",0))}}function d(){k.extend(a.aL.Folder.prototype,{liNode:function(){var a=this;if(void 0===a.iC){var b=a.app.document.getById("f"+a.index);b&&(a.iC=b)}return a.iC},aNode:function(){var a=this;if(void 0===a.dM){var b=a.liNode();b&&(a.dM=l(i(b.$.childNodes,"a")))}return a.dM},expanderNode:function(){var a=this;if(void 0===a.iR){var b=a.liNode();b&&(a.iR=l(i(b.$.childNodes,"span")))}return a.iR},childrenRootNode:function(){var a=this;if(void 0===a.iM){var b=a.liNode();b&&(a.iM=l(i(b.$.childNodes,"ul")))}return a.iM},releaseDomNodes:function(){var a=this;delete a.iC,delete a.dM,delete a.iR,delete a.iM},focus:function(){var a=this.aNode();a&&(a.setAttribute("tabindex",0),a.focus())},blur:function(){this.aNode()&&this.aNode().setAttribute("tabindex",-1)}})}function e(a){var c=a.hasChildren?"":" nochildren";return'<li id="f'+a.index+'" role="presentation" class="openable'+c+'"><span role="presentation" class="expander"'+(a.hasChildren?' onclick="void(0)"':"")+'></span><a tabindex="-1" role="treeitem" href="javascript:void(0)" aria-level="'+a.hU()+'">'+k.htmlEncode(a.name)+"</a>"+(a.isBasket?"":b)+"<ul></ul></li>"}function f(a,b){for(var c="",d=0;d<a.length;d++)c+=b(a[d]);return c}function g(a,b){for(var c in a)if(void 0!==b(a[c]))return a[c]}function i(a,b,c){return g(a,function(a){if(a.tagName&&a.tagName.toLowerCase()==b&&!c--)return a})}function l(a){return new m(a)}var b='<a href="javascript:void(0)" class="dropdown">▼</a>';o.add("foldertree",{bM:["folder"],onLoad:function(){c(),d()},bz:function(d){var e=this;d.on("themeSpace",function(b){"sidebar"==b.data.space&&(b.data.html+="<div id='folders_view' class='view widget' tabindex='0'><h2 id='folders_view_label'>"+d.lang.FoldersTitle+"</h2><div class='folder_tree_wrapper wrapper'><div class='selection'></div><ul class='folder_tree no_list' role='tree navigation' aria-labelledby='folders_view_label'></ul></div></div>")}),d.on("uiReady",function(f){d.config.showContextMenuArrow||(b="");var g=d.document.getById("folders_view");g.hX(),h.opera&&g.on("dblclick",function(a){a.data.preventDefault()});var i=a.ld.bz(d,"foldertree",e,g);d.bj&&(d.bj.lX(g),d.bj.kh(function(c,e){if("folders_view"!=c.dS()){var f=!0;if(d.aV){var g=d.aV.liNode().dS();c.dS()!==g&&c.getParent().dS()!==g||(f=!1)}f&&(d.oW("requestSelectFolder",{folder:null}),d.oW("requestSelectFolder",{folder:c}));var h=d.aV;if(h&&!d.config.readOnly){var j=h.acl,k=h.isRoot,l={createSubFolder:j.folderCreate?a.aS:a.aY,renameFolder:!k&&j.folderRename?a.aS:a.aY,removeFolder:!k&&j.folderDelete?a.aS:a.aY};return i.oW("beforeContextMenu",{bj:l,folder:h}),l}}},g))}),d.bD("foldertreeFocus",{exec:function(a){var b=a.layout.pS(),c=a.ld["foldertree.foldertree"],d=c.tools.ew;b.focus(),d&&d.focus()}})}})}(),function(){function g(b){return a.bs.substr(9*b%32,1)}function p(a){var c=(n.reverse().join(""),a.tools.of());c.setHtml.call(c,a.qX()),a.bn().addClass("files_"+n[0])}function q(b){var c=[a.bF.substr(6,1),a.bF.substr(8,1)];a.ed&&c[0]!=g(a.ed.length+a.bs.indexOf(c[1]))&&p(b)}function r(){return 1==a.bs.indexOf(a.bF.substr(1,1))%5&&window.top[a.nd+"cation"][a.jG+"st"].toLowerCase().replace(a.hf,"").replace(a.hg,"")!=a.lS(a.ed)||a.bF.substr(3,1)!=a.bs.substr(9*(a.bs.indexOf(a.bF.substr(0,1))+a.bs.indexOf(a.bF.substr(2,1)))%(a.bs.length-1),1)}function s(){function p(){var a=this,b=k.getCookie("CKFinder_Settings");if(!b||5!=b.length)return a.app.config.defaultViewType&&(a.data().dA=a.app.config.defaultViewType),a.app.config.defaultSortBy&&(a.data().cN=a.app.config.defaultSortBy),void 0!==a.app.config.defaultDisplayFilename&&(a.data().display.filename=a.app.config.defaultDisplayFilename),void 0!==a.app.config.defaultDisplayDate&&(a.data().display.date=a.app.config.defaultDisplayDate),void(void 0!==a.app.config.defaultDisplayFilesize&&(a.data().display.filesize=a.app.config.defaultDisplayFilesize));switch(a.data().dA="L"==b.substr(0,1)?"list":"thumbnails",a._.nV=!0,b.substr(1,1)){case"D":a.data().cN="date";break;case"S":a.data().cN="size";break;case"E":a.data().cN="extension";break;default:a.data().cN="filename"}a.data().display.filename="N"==b.substr(2,1),a.data().display.date="D"==b.substr(3,1),a.data().display.filesize="S"==b.substr(4,1)}function v(a,b,c,d,e,f,g,h){var i=a.aNode();if(i){var j=i.getChild([b,0]);if(j&&!j.$.style.backgroundImage){g!=t&&(u=0),t=g;var k=c(j.$);if(k<d+e+f&&k>=e){var l=a.getThumbnailUrl(!0);l&&function(){var a=j,b=l;u+=h,setTimeout(function(){if(!(g<s-1))try{a.$.style.backgroundImage='url("'+b+'")'}catch(a){}},u)}()}}}}var d=a.ld.hS("filesview","filesview",{dA:"thumbnails",display:{filename:1,date:1,filesize:1},cN:"filename",files:[],hA:null,pq:0,shownFiles:[]}),g="Please visit the <a href='http://cksource.com/ckfinder' target='_blank'>CKFinder web site</a> to obtain a valid license.",n="This is the DEMO version of CKFinder. "+g,o="Product license has expired. "+g;d.qX=function(){return n},d.dT.push(p),d.dT.push(function(){k.mH(this.bn())}),d.bh("SelectAction",["dblclick","click","requestSelectAction","requestSelectThumbnailAction"],function(c){var d=this,e=this.tools.bZ(c);if(e){if(!i||h.version>=9){var f=d.data();if("click"==c.name)return f.nQ||(f.nQ=[null,null]),f.nQ[1]=f.nQ[0],void(f.nQ[0]=e.name);if("dblclick"==c.name&&f.nQ[1]!=e.name)return}else if("click"==c.name)return;var g=k.extend({},c.data,{file:e,jw:"requestSelectThumbnailAction"==c.name},!0);d.oW("beforeSelectAction",g,function(c,f){if(!c)try{var g,j=!0,l=e.getUrl(),m=e.getThumbnailUrl(),n=[];if(f.jw?!(g=d.app.config.selectThumbnailActionFunction)&&d.app.config.thumbsDirectAccess&&(g=d.app.config.selectActionFunction):g=d.app.config.selectActionFunction,g){var o=f.jw?m:l,p={fileUrl:l,fileSize:e.size,fileDate:e.date};f.jw?(p.thumbnailUrl=m,d.app.config.selectThumbnailActionFunction?p.selectThumbnailActionData=d.app.config.selectThumbnailActionData:p.selectActionData=d.app.config.selectActionData):p.selectActionData=d.app.config.selectActionData;for(var r,q=d.tools.oO(),s=0,t=q.length;s<t;s++)r=q[s].getUrl(),n[s]={url:f.jw&&q[s].isImage()?q[s].getThumbnailUrl():q[s].getUrl(),data:k.extend({fileUrl:r,fileSize:q[s].size,fileDate:q[s].date},p.selectThumbnailActionData?{selectThumbnailActionData:p.selectThumbnailActionData}:{selectActionData:p.selectActionData})};var u;switch(d.app.config.selectActionType){case"fckeditor":u=g(o);break;case"ckeditor":u=g(o,p);break;case"js":u=g.call(d.app.cg,o,p,n)}j=!1!==u}else d.app.execCommand("ViewFile");var v=d.app.document.getWindow();if(j&&d.app.cg.inPopup&&(!i&&!h.opera||v.$.top.location.href.match(/ckfinder.html/)||"CKFinderpopup"==v.$.top.name)){var w=v.$.top.opener;v.$.top.close(),w&&w.focus()}d.oW("successSelectAction",f),d.oW("afterSelectAction",f)}catch(b){throw b=a.ba(b),d.oW("failedSelectAction",f),d.oW("afterSelectAction",f),b}})}}),d.bh("KeyboardNavigation",["keydown","requestKeyboardNavigation"],function(c){var d=this,e=0;if(c.data&&c.data.bK){var f=c.data.bK();e=f.$==d.bn().$}var g=this.tools.bZ(c);if(g||e){var h=k.extend({},c.data,{file:g},!0);this.oW("beforeKeyboardNavigation",h,function(f,h){var i=this;if(!f)try{var j,k,l,m=c.data.db();if(m>a.dy&&i.app.config.selectMultiple)m-=a.dy,l=1;else if(m==a.bP+65&&i.app.config.selectMultiple){d.tools.dH()&&d.tools.dH().deselect();for(var n=d.data().shownFiles,o=0;o<n.length;o++)if(!n[o].isDeleted){j=n[o].rowNode();break}do{d.tools.bZ(j).select(!0)}while((j=j.dG())&&j.ge());d.tools.cR(d.tools.bZ(j),!0),c.data.preventDefault()}if(e&&m>=37&&m<=40){for(var n=d.data().shownFiles,o=0;o<n.length;o++)if(!n[o].isDeleted){i.tools.cR(n[o],l);break}}else{if("list"==d.data().dA)38==m?(c.data.preventDefault(),j=g.rowNode(),j.gE()&&i.tools.cR(i.tools.bZ(i.cf()),l)):40==m&&(c.data.preventDefault(),j=g.rowNode(),j.ge()&&i.tools.cR(i.tools.bZ(j.dG()),l));else if(38==m){if(c.data.preventDefault(),j=g.rowNode(),j.gE()){for(k=j.cf();k&&k.$.offsetLeft!=j.$.offsetLeft;)k=k.cf();k&&i.tools.cR(i.tools.bZ(k),l)}}else if(m==("rtl"==d.app.lang.dir?37:39))c.data.preventDefault(),j=g.rowNode(),j.ge()&&i.tools.cR(i.tools.bZ(j.dG()),l);else if(40==m){if(c.data.preventDefault(),j=g.rowNode(),j.ge()){for(k=j.dG();k&&k.$.offsetLeft!=j.$.offsetLeft;)k=k.dG();k&&i.tools.cR(i.tools.bZ(k),l)}}else m==("rtl"==d.app.lang.dir?39:37)&&(c.data.preventDefault(),j=g.rowNode(),j.gE()&&i.tools.cR(i.tools.bZ(j.cf()),l));!e&&g&&(13==m&&d.oW("requestSelectAction",{file:g}),46==m&&d.app.execCommand("DeleteFile"),113==m&&d.app.execCommand("RenameFile"))}i.oW("successKeyboardNavigation",h),i.oW("afterKeyboardNavigation",h)}catch(b){throw b=a.ba(b),i.oW("failedKeyboardNavigation",h),i.oW("afterKeyboardNavigation",h),b}})}}),d.bh("ProcessingFile",["requestProcessingFile"],function(c){var d=this.tools.bZ(c),e=k.extend({},c.data,{file:d},!0);this.oW("beforeProcessingFile",e,function(c,d){if(!c)try{var e=d.file;if(e){var f=e.rowNode();f&&f.addClass("processing"),this.on("afterProcessingFile",function(a){a.data.file==e&&(d.step=2,this.oW("successProcessingFile",d),this.oW("afterProcessingFile",d),a.removeListener())}),d.step=1,this.oW("successProcessingFile",d)}else this.oW("failedProcessingFile",d)}catch(b){throw this.oW("failedProcessingFile",d),this.oW("afterProcessingFile",d),a.ba(b)}})}),d.bh("RepaintFile",["requestRepaintFile"],function(c){var d=this.tools.bZ(c),e=k.extend({},c.data,{file:d},!0);this.oW("beforeRepaintFile",e,function(c,d){var e=this;if(!c)try{var f=d.file;if(f){var g=f.filenameNode();g&&g.getHtml()!=k.htmlEncode(f.name)&&g.setHtml(k.htmlEncode(f.name));var h=f.rowNode();h&&h.removeClass("processing"),e.oW("successRepaintFile",d)}else e.oW("failedRepaintFile",d);e.oW("afterRepaintFile",d)}catch(b){throw e.oW("failedRepaintFile",d),e.oW("afterRepaintFile",d),a.ba(b)}})}),i&&h.ie6Compat&&!h.ie7Compat&&!h.ie8&&d.bh("HoverFile",["mouseover","mouseout"],function(c){if("list"==this.data().dA){var d=this.tools.bZ(c);if(d){var e=k.extend({},c.data,{bi:d.rowNode()},!0);this.oW("beforeHoverFile",e,function(d,e){var f=this;if(!d)try{"mouseover"==c.name?(f.data().ho&&f.data().ho.removeClass("hover"),e.bi.addClass("hover"),f.data().ho=e.bi):(f.data().ho.removeClass("hover"),delete f.data().ho),f.oW("successHoverFile",e),f.oW("afterHoverFile",e)}catch(b){throw f.oW("failedHoverFile",e),f.oW("afterHoverFile",e),a.ba(b)}})}}});var s=0,t=0,u=0;d.bh("RenderThumbnails",["requestRenderThumbnails"],function(b){var c=this;c.tq||(c.tq=!0,setTimeout(function(){var a=c.hF.shownFiles;if(!a[0])return void(c.tq=!1);for(var b=function(a){for(var b=0;a;)b+=a.offsetTop,a=a.offsetParent;return b},d=c.eh.$.offsetHeight,e=c.eh.$.scrollTop,f=b(c.eh.$),g=c.app.config.showContextMenuArrow?1:0,h=0,j=a.length;h<j;h++)v(a[h],g,b,d,e,f,s,c.app.config.thumbnailDelay);s++,c.tq=!1},50))}),d.bh("RenderFiles",["requestRenderFiles"],function(e){var g,l,f=this.data(),h=e.data&&(e.data.lookup||e.data.lastView&&e.data.lastView.lookup),i=e.data&&(!!e.data.ma||!!e.data.lK||!!h),j=e.data&&e.data.ma;if(n){if(e.data&&e.data.files){for(this.tools.kR(),l=0;l<e.data.files.length;l++)f.files[l]=e.data.files[l];g=f.files,i=1,this.data().folder=e.data.folder}var m=this.data().folder;if(!j||j==m){(i||!f.cP||f.pq)&&(f.cP={}),p.call(this);var o=m.type;if(this._.nV||(this.app.config["defaultViewType_"+o]&&(f.dA=this.app.config["defaultViewType_"+o]),this.app.config["defaultSortBy_"+o]&&(f.cN=this.app.config["defaultSortBy_"+o]),void 0!==this.app.config["defaultDisplayFilename_"+o]&&(f.display.filename=this.app.config["defaultDisplayFilename_"+o]),void 0!==this.app.config["defaultDisplayDate_"+o]&&(f.display.date=this.app.config["defaultDisplayDate_"+o]),void 0!==this.app.config["defaultDisplayFilesize_"+o]&&(f.display.filesize=this.app.config["defaultDisplayFilesize_"+o])),f.files.length||h||f._fullSet)if("date"!=f.cN||!f.cP.date||h||f._fullSet)if("size"!=f.cN||!f.cP.size||h||f._fullSet)if("extension"!=f.cN||!f.cP.extension||h||f._fullSet)if("filename"!=f.cN||!f.cP.filename||h||f._fullSet){a.log("[FILES VIEW] Sorting files");var q=f.files,r=h?new RegExp(h.replace(/[-\/ \\^$* + ?.()|[\]{}]/g,"\\$&"),"i"):null;f.lookup=h,g=[];var s=[];for(l=0;l<q.length;l++)if(!q[l].isDeleted){var t=g.length;q[l].index=t,g[t]=q[l]}for(f._fullSet=h?s:void 0,f.files.length=0,l=0;l<g.length;l++)f.files[l]=g[l];for(g=[],l=0;l<f.files.length;l++)g[l]=f.files[l],g[l].releaseDomNodes();var u=function(a,b){var c=a.name.toLowerCase(),d=b.name.toLowerCase();return c<d?-1:c>d?1:0};"date"==f.cN?(g.sort(function(a,b){return a.date>b.date?-1:a.date<b.date?1:0}),f.cP.date=g):"size"==f.cN?(g.sort(function(a,b){return a.size>b.size?-1:a.size<b.size?1:0}),f.cP.size=g):"extension"==f.cN?(g.sort(function(a,b){return a.ext>b.ext?1:a.ext<b.ext?-1:u(a,b)}),f.cP.extension=g):(g.sort(u),f.cP.filename=g)}else g=f.cP.filename;else g=f.cP.extension;else g=f.cP.size;else g=f.cP.date;else g=f.files;if(h)for(q=g,g=[],l=0;l<q.length;l++)!q[l].isDeleted&&r.test(q[l].name)&&g.push(q[l]);var v=k.extend({eu:1,dA:this.data().dA,display:this.data().display},e.data,{files:g},!0);if(this.oW("beforeRenderFiles",v,function(e,g){if(!e&&"t"==n.charAt(8)){c=a.bF.substr(2,1),b=a.bF.substr(7,1);try{for(var h=0;h<g.files.length;h++)g.files[h].releaseDomNodes();this.data().shownFiles=g.files,this.tools.cR(),this.oW("requestAddFiles",g,function(a){a||(f.hA=g.dA)}),this.oW("successRenderFiles",g),this.oW("afterRenderFiles",g)}catch(b){throw this.oW("failedRenderFiles",g),this.oW("afterRenderFiles",g),a.ba(b)}}}),this._.initialized)"thumbnails"==this.hF.dA&&this.oW("requestRenderThumbnails");else{var w=this.eh,x=this;w.on("scroll",function(){"thumbnails"==x.hF.dA&&this.oW("requestRenderThumbnails")},this),this.app.on("afterRepaintLayout",function(){"thumbnails"==x.hF.dA&&setTimeout(function(){x.oW("requestRenderThumbnails")},0)}),this._.initialized=!0}}}}),d.dT.push(function(a,b){b=this,a.on("afterCommandExecDefered",function(a){if(a.data){var d,c=a.data.name;if("RenameFile"==c){var e=a.data.file,f=b.tools.oO().length>1;if(d=e&&e.folder,b.tools.currentFolder()!=d)return;b.oW("requestRenderFiles",{folder:d,lK:1},function(c){c||(e.deselect(!0),b.oW("requestSelectFile",{file:a.data.file,multiple:f},function(){c||e.focus(f)}))})}else if("RemoveFiles"==c){if(d=a.data.folder,b.tools.currentFolder()!=d)return;b.tools.cR(),b.bn().focus(),b.oW("requestRenderFiles",{folder:d,lK:1})}}})}),d.bh("SelectFile",["click","requestSelectFile"],function(c){var d=this.tools.bZ(c),e="click"==c.name,f=c.data&&c.data.multiple&&this.app.config.selectMultiple;if(n.length>>4){if(e&&c.data.db()>=a.bP&&(c.data.preventDefault(),f=(c.data.$.ctrlKey||c.data.$.metaKey)&&this.app.config.selectMultiple),e&&c.data.bK().hasClass("dropdown"))return c.jN.oW("contextmenu",c.data),void c.cancel();var g=k.extend({},c.data,{file:d},!0);this.oW("beforeSelectFile",g,function(c,d){var g=this;if(!c){var h=d.file;try{if(g.tools.dH()&&!f){for(var i=g.tools.oO(),j=0;j<i.length;j++)i[j].rowNode()&&i[j].rowNode().removeClass("selected");g.data().nY=[]}if(h&&f&&h.rowNode().hasClass("selected")&&g.tools.dH()){for(var i=g.tools.oO(),k=[],j=0;j<i.length;j++)i[j].isSameFile(h)?i[j].rowNode().removeClass("selected"):(i[j].rowNode().hasClass("selected")||i[j].rowNode().addClass("selected"),k.push(i[j]));g.data().nY=k,g.data().cG.isSameFile(h)&&(g.data().cG=g.data().nY[k.length-1]),e&&g.tools.cR(g.tools.dH(),!0,k.length>1)}else h?(h.rowNode().addClass("selected"),g.data().nY||(g.data().nY=[]),g.data().cG=h,g.data().nY.push(h),e&&g.tools.cR(h,f,f)):g.tools.dH()&&!f&&(g.data().cG=null,g.data().nY=[],g.tools.cR());g.oW("successSelectFile",d),g.oW("afterSelectFile",d)}catch(b){throw g.oW("failedSelectFile",d),g.oW("afterSelectFile",d),a.ba(b)}}})}}),d.bh("AddFiles",["requestAddFiles"],function(f){var g=k.extend({eu:0,view:"thumbnails",mj:null},f.data,{files:f.data.file?[f.data.file]:f.data.files},!0);this.oW("beforeAddFiles",g,function(f,g){if(!f)try{var q,s,h=this,j=h.bn(),m=h.data().hA,p=0;j.removeClass("files_message"),r()&&(g.files.length&&(g.mj=n),p=1);var t=a.bs.indexOf(c),u=a.bs.indexOf(a.bF.substr(0,1)),v=t-u;if("list"==g.dA){this.data().kQ||(this.data().kQ=k.bind(this.tools.qc,this.tools)),j.removeClass("files_thumbnails"),j.addClass("files_details"),q=z(g.files,this.data().kQ),s=this.tools.fF();var w=this.tools.kj();if(m&&"list"!=m&&this.tools.lP().setHtml(""),i){if(w&&m&&"list"==m&&!g.eu&&(q=w.getHtml()+q),s&&s.remove(),q){var x=l[0]+this.tools.lz()+l[1]+q+l[2]+l[3];j.appendHtml(x)}this.tools.releaseDomNodes(["kj","fF"])}else q?g.eu?this.tools.fF().setHtml(this.tools.lz()+l[1]+q+l[2]):w.appendHtml(q):s.setHtml("")}else{j.removeClass("files_details"),j.addClass("files_thumbnails");var y=this.data().display;if(q=z(g.files,function(a){var b="r"+a.index,c=[];return c.push('<a id="',b),c.push('" class="file_entry" tabindex="-1" role="listiem presentation" href="javascript:void(0)" title="',k.htmlEncode(a.name).replace('"',"&quot;"),'" aria-labelledby="',b),c.push('_label" aria-describedby="',b,'_details" style="width: '+(h.app.config.thumbsWidth+10)+'px">'),c.push(e,'<div class="image"><div role="img" style="width: '+h.app.config.thumbsWidth+"px; height: "+h.app.config.thumbsHeight+'px"></div></div>'),y.filename&&c.push('<h5 id="',b,'_label">',k.htmlEncode(a.name),"</h5>"),c.push('<span id="'+b+'_details" class="details" role="list presentation">'),y.date&&c.push('<span role="listitem" class="extra">',a.dateF,"</span>"),y.filesize&&c.push('<span role="listitem" aria-label="Size">',k.formatSize(a.size,h.app.lang,!0),"</span>"),c.push("</span></a>"),c.join("")}),s=this.tools.lP(),m&&"list"==m){var A=this.tools.fF();A&&i?A.remove():A&&A.setHtml("")}g.eu?s.setHtml(q):s.appendHtml(q)}0>v&&(v=t-u+33),p||b&&!(a.bs.indexOf(b)%(v?8:33)<7)||(g.mj=o,p=1),(g.eu&&!q||p)&&g.mj&&(j.addClass("files_message"),this.tools.of().setHtml(g.mj)),b||p||s.setHtml(""),this.oW("successAddFiles"),this.oW("afterAddFiles")}catch(b){throw this.oW("failedAddFiles"),this.oW("afterAddFiles"),a.ba(b)}})}),d.bh("ShowFolderFiles",["requestShowFolderFiles"],function(c){var d=this,e=a.ld.bX["foldertree.foldertree"].tools.cq(c),f=k.extend({},c.data,{folder:e},!0);this.oW("beforeShowFolderFiles",f,function(e,f){if(!e){this.tools.dH()&&this.oW("requestSelectFile"),this.app.cS("refresh").bR(a.aY);try{var i,g=f.folder;if(!g.acl.folderView)throw d.app.msgDialog("",d.app.lang.Errors[103]),"[CKFINDER] No permissions to view folder.";c.data.ib=this,this.data().folder=g,d.tools.kR();var j=c.data.lookup?c.data.lookup:null;this.oW("requestRenderFiles",{eu:1,mj:d.app.lang.FilesLoading}),this.app.connector.sendCommand("GetFiles",i,function(b){if(d.app.cS("refresh").bR(a.aS),d.app.aV!=g)return d.oW("failedShowFolderFiles",f),void d.oW("afterShowFolderFiles",f);if(!(b.checkError()||r.toString().length<200)){d.tools.kR();for(var c,e=b.selectNodes("Connector/Files/File"),i=0;i<e.length;i++){var k=e[i].attributes.getNamedItem("date").value,l=e[i].attributes.getNamedItem("name").value,m=d.tools.rg(new a.aL.File(l,parseInt(e[i].attributes.getNamedItem("size").value,10),!!e[i].attributes.getNamedItem("thumb")&&e[i].attributes.getNamedItem("thumb").value,k,d.app.lB(k.substr(6,2),k.substr(4,2),k.substr(0,4),k.substr(8,2),k.substr(10,2)),g));f.mw&&l==f.mw&&(c=m)}d.oW("requestRenderFiles",{mj:d.app.lang.FilesEmpty,lookup:j}),c&&(d.app.oW("requestSelectFile",{file:c,scrollTo:1}),setTimeout(function(){c.aNode().$.scrollIntoView(1),d.app.layout.mB().getFirst().$.scrollIntoView(0)},h.opera?500:100)),d.oW("successShowFolderFiles",f),d.oW("afterShowFolderFiles",f),q(d)}},g.type,g)}catch(b){throw this.oW("failedShowFolderFiles",f),this.oW("afterShowFolderFiles",f),a.ba(b)}}})}),d.tools.bZ=function(b){var d,c=this,e=0;if(b.data&&b.data.file instanceof m?(b=b.data.file,e=1):b.data&&b.data.bK?(b=b.data.bK(),e=1):b instanceof j.bi&&(e=1),e){for(var f=b;f&&(!f.is("a")||!f.hasAttribute("id"))&&!f.is("tr")&&f!=c.ib.eh;)f=f.getParent();if(f){f.dS()&&(f.is("a")||f.is("tr"))&&(d=c.ib.data().files[f.dS().slice(1)])}}else"number"==typeof b?d=c.ib.data().files[b]:"String"==typeof b?d=c.ib.data().files[f.dS().slice(1)]:b.data&&b.data.file&&b.data.file instanceof a.aL.File?d=b.data.file:b.data&&b.data.files&&b.data.files.length&&b.data.files[0]&&b.data.files[0]instanceof a.aL.File?d=b.data.files[0]:b instanceof a.aL.File&&(d=b);return d},d.tools.kR=function(){var a=this.ib.data();a.files.length=0,a.cP={}},d.tools.oR=function(a,b){var d=(a.thumb,a.name),e=this.ib.app,f=d.match(e.rQ.jf);return f&&(f=f[0])&&e.rQ.jh.test(f)?e.fh+"images/icons/"+(b?"32":"16")+"/"+f.toLowerCase()+".gif":e.fh+"images/icons/"+(b?"32":"16")+"/default.icon.gif"},d.tools.rg=function(a){var b=this.ib.data().files,c=b.push(a);return a.index=--c,a.app=this.ib.app,a},d.tools.lP=function(a){var b=this;return b.jl||(b.jl=b.ib.bn().getChild(1)),b.jl},d.tools.kj=function(a){var b=this;if(void 0===b.iJ){var c=b.fF();b.iJ=c?C(B(c.$.childNodes,"tbody")):null}return b.iJ},d.tools.sn=function(a){var b=this;if(void 0===b.kT){var c=b.fF();b.kT=c?C(B(c.$.childNodes,"thead")):null}return b.kT},d.tools.fF=function(a){var b=this;return void 0===b.iO&&(b.iO=C(B(b.ib.bn().$.childNodes,"table"))),b.iO},d.tools.of=function(a){var b=this;return b.iF||(b.iF=b.ib.bn().getChild(0)),b.iF},d.tools.releaseDomNodes=function(a){var b=this;b.jl=void 0,b.iO=void 0,b.iJ=void 0,b.iF=void 0},d.tools.lz=function(){var a=this,b=a.ib.data().display,c=[];c.push('<td class="name">'+a.ib.app.lang.SetDisplayName+"</td>"),b.filesize&&c.push("<td>"+a.ib.app.lang.SetDisplaySize+"</td>"),b.date&&c.push("<td>"+a.ib.app.lang.SetDisplayDate+"</td>");var d=c.length-1;return c[d]=d?'<td class="last">'+c[d].substr(4):'<td class="last '+c[d].substr(11),"<thead><tr><td>&nbsp;</td>"+c.join("")+"</tr></thead>"},d.tools.qc=function(a){var b=this.oR(a),c="r"+a.index,d=this.ib.data().display,e=[];e.push('<td class="name">'+f+'<a tabindex="-1">'+(d.filename?k.htmlEncode(a.name):"")+"</a></td>"),d.filesize&&e.push("<td>"+k.formatSize(a.size,this.ib.app.lang,!0)+"</td>"),d.date&&e.push("<td>"+a.dateF+"</td>");var g=e.length-1;return e[g]=g?'<td class="last">'+e[g].substr(4):'<td class="last '+e[g].substr(11),'<tr id="'+c+'"><td class="image"><img src="'+b+'" alt="img alt" /></td>'+e.join("")+"</tr>"},d.tools.dH=function(){var a=this.ib.data();if(a.cG)return a.cG.isDeleted?a.cG=null:a.cG},d.tools.oO=function(a){var b=this.ib.data(),c=[];if(b.nY){for(var d=0;d<b.nY.length;d++)b.nY[d]&&!b.nY[d].isDeleted&&c.push(b.nY[d]);if(a){var e=c,f={},c=[];for(d=0;d<e.length;d++)e[d].name in f||(c.push(e[d]),f[e[d].name]=1)}}return b.nY=c},d.tools.currentFolder=function(){return this.ib.data().folder},d.tools.cR=function(a,b,c){var d=this;a?(d.iS?d.iS.blur():d.ib.bn().setAttribute("tabindex",-1),d.iS=a,a.focus(b,c)):(delete d.iS,d.ib.bn().setAttribute("tabindex",0))},d.tools.downloadFile=function(a,b){var c=a.getById("downloadIframe");c||(c=a.createElement("iframe"),c.setAttribute("id","downloadIframe"),c.setStyle("display","none"),a.bH().append(c)),c.setAttribute("src",b)}}function t(a,b,c,d,e,f){for(var g={},h=0,i=b.files,j=[b.destination],l=0,m=b.files.length;l<m;l++)b.destination!=i[l].folder&&(g["files["+h+"][name]"]=i[l].name,g["files["+h+"][type]"]=i[l].folder.type,g["files["+h+"][folder]"]=i[l].folder.getPath(),g["files["+h+"][options]"]=e&&e[l]||"",h++,c&&!d&&j.push(i[l].folder));if(d||(f||(f=function(){}),f=k.override(f,function(b){return function(){for(var c=a.ld["filesview.filesview"],d=c.tools.currentFolder(),e=0,f=j.length;e<f;e++)if(j[e]==d){a.oW("requestSelectFolder",{folder:d});break}return b}})),!h)return void(f&&f());var n=a.connector,o=0,p=c?"MoveFiles":"CopyFiles";n.sendCommandPost(p,null,g,function(g){var m,p,q,h=g.getErrorNumber(),j=[],l=[];for(m=0,p=i.length;m<p;m++)l.push(i[m]);if(h==n.ERROR_COPY_FAILED||h==n.ERROR_MOVE_FAILED){o=1;var y,z,A,B,r=g.selectNodes("Connector/Errors/Error"),s=parseInt(g.selectSingleNode("Connector/"+(c?"MoveFiles/@moved":"CopyFiles/@copied")).value,10),w=0,x=[];for(m=0,p=r.length;m<p;m++)for(y=r[m].getAttribute("code"),y==n.ERROR_ALREADYEXIST?w=1:x.push([r[m].getAttribute("name"),a.lang.Errors[y]]),z=0,A=l.length;z<A;z++)if((B=l[z])&&B.name==r[m].getAttribute("name")&&B.folder.getPath()==r[m].getAttribute("folder")&&B.folder.type==r[m].getAttribute("type")){r[m].getAttribute("code")==n.ERROR_ALREADYEXIST&&j.push(B),delete l[z];break}for(m=0,p=x.length;m<p;m++)x[m]=a.lang.FileError.replace("%s",x[m][0]).replace("%e",x[m][1]);s||w?x.length==l.length-s&&(q=a.lang.OperationCompletedErrors+" "+a.lang[c?"MovedFilesNumber":"CopiedFilesNumber"].replace("%s",s)+"<br /><br />",q+=a.lang[c?"MoveFailedList":"CopyFailedList"].replace("%s",v(x)),a.msgDialog("",q,f||null)):a.msgDialog("",a.lang.Errors[c?300:301]+"<br /><br />"+v(x),f||null);var C=u(a,l,b.fileCallback);if(w&&a.cg.openDialog("moveFileExists",function(d){var e=arguments.callee;q="",x.length&&(q+=a.lang.OperationCompletedErrors+" "),q+=s?a.lang[c?"MovedFilesNumber":"CopiedFilesNumber"].replace("%s",s):"",x.length&&(q+=(q?"<br /><br />":"")+a.lang[c?"MoveFailedList":"CopyFailedList"].replace("%s",v(x))),q&&(q+="<br /><br />");var g=a.lang.ErrorMsg.FileExists;g=g.replace("%s",j[0]),q+="<strong>"+g+"</strong>",d.show(),d.getContentElement("tab1","msg").getElement().setHtml(q),d.on("ok",function(h){h.removeListener();var m,i=d.getContentElement("tab1","option").getValue(),l=d.getContentElement("tab1","remember").getValue();switch(i){case"autorename":case"overwrite":m=[i];break;case"skip":return void(l?f&&f():(j.shift(),j.length&&setTimeout(function(){a.cg.openDialog("moveFileExists",e)},0)))}if(l)for(var n=1,o=j.length;n<o;n++)m.push(m[0]);t(a,k.extend({files:j},b),c,1,m,f)})}),d)return}else g.checkError()&&(o=1);if(o)return void(b.errorCallback&&b.errorCallback());var C=u(a,l,b.fileCallback);C?(q=a.lang.OperationCompletedSuccess+"<br />"+a.lang[c?"MovedFilesNumber":"CopiedFilesNumber"].replace("%s",C),a.msgDialog("",q,f||null)):f&&f()},b.destination.type,b.destination)}function u(a,b,c){for(var e,d=0,f=0,g=b.length;f<g;f++)(e=b[f])&&(d++,c&&c(a,e));return d}function v(a){return'<ul class="cke_files_list'+(a.length>3?" cke_files_list_many":"")+'"><li>'+a.join("</li><li>")+"</li></ul>"}function w(b,c){if(!b||0===b.length)throw new a.dU("name_empty",c.lang.ErrorMsg.FileEmpty);if(d.iz.test(b))throw new a.dU("name_invalid_chars",c.lang.ErrorMsg.FileInvChar);return!0}function x(a,b){for(var c={},d=b[0].folder,e=d.getPath(),f=0,g=b.length;f<g;f++)c["files["+f+"][name]"]=b[f].name,c["files["+f+"][type]"]=d.type,c["files["+f+"][folder]"]=e,a.oW("requestProcessingFile",{file:b[f]});a.connector.sendCommandPost("DeleteFiles",null,c,function(c){var f,g,e={};if(302==c.getErrorNumber()){if(!(b.length-parseInt(c.selectSingleNode("Connector/DeleteFiles/@deleted").value,10)))return void c.checkError();var i=c.selectNodes("Connector/Errors/Error");for(f=0,g=i.length;f<g;f++)e[i[f].attributes.getNamedItem("name").value]=1;a.skippedFilesDialog(null,i)}else if(c.checkError())return;for(f=0,g=b.length;f<g;f++)e[b[f]]||(b[f].isDeleted=!0,b[f].releaseDomNodes());a.oW("afterCommandExecDefered",{name:"RemoveFiles",folder:d})},d.type,d)}function y(){k.extend(a.aL.Folder.prototype,{getFiles:function(b){var c=this,d=this.app;d.connector.sendCommand("GetFiles",{},function(e){for(var f=[],g=e.selectNodes("Connector/Files/File"),h=0;h<g.length;h++){var i=g[h].attributes.getNamedItem("date").value;f.push(new a.aL.File(g[h].attributes.getNamedItem("name").value,parseInt(g[h].attributes.getNamedItem("size").value,10),!!g[h].attributes.getNamedItem("thumb")&&g[h].attributes.getNamedItem("thumb").value,i,d.lB(i.substr(6,2),i.substr(4,2),i.substr(0,4),i.substr(8,2),i.substr(10,2)),c))}b&&b.call(c,f)},c.type,c)},showFiles:function(a){this.app.oW("requestShowFolderFiles",{folder:this,mw:a})}})}function z(a,b){if(a){for(var c=[],d=0;d<a.length;d++)c.push(b(a[d]));return c.join("")}}function A(a,b){for(var c in a)if(void 0!==b(a[c]))return a[c]}function B(a,b,c){return A(a,function(a){if(a.tagName&&a.tagName.toLowerCase()==b&&!c--)return a})}function C(a){return a?new m(a):null}var b,c,d={fX:/[^\.]+$/,iz:/[\\\/:\*\?"<>\|]/},e='<span class="dropdown">▼</span>',f='<a href="javascript:void(0)" class="dropdown">▼</a>',l=["<table class='files_details' role='region' aria-controls='status_view'>","<tbody>","</tbody>","</table>"],n=["Node","message"];o.add("filesview",{bM:["foldertree"],onLoad:function(){y(),s(),a.dialog.add("moveFileExists",function(a){return{title:a.lang.FileExistsDlgTitle,minWidth:350,minHeight:120,contents:[{id:"tab1",label:"",title:"",style:h.ie7Compat?"height:auto":"",expand:!0,padding:0,elements:[{id:"msg",className:"cke_dialog_error_msg",type:"html",widths:["70%","30%"],html:""},{type:"hbox",className:"cke_dialog_file_exist_options",children:[{type:"radio",id:"option",label:a.lang.common.makeDecision,default:"autorename",items:[[a.lang.FileAutorename,"autorename"],[a.lang.FileOverwrite,"overwrite"],[a.lang.common.skip,"skip"]]}]},{type:"hbox",className:"cke_dialog_remember_decision",children:[{type:"checkbox",id:"remember",label:a.lang.common.rememberDecision}]}]}],buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]}})},bz:function(c){var g=this;c.rQ.jh=new RegExp("^("+c.config.fileIcons+")$","i"),c.rQ.rO=/^(jpg|gif|png|bmp|jpeg)$/i,c.rQ.jf=d.fX,c.on("themeSpace",function(b){if("mainMiddle"==b.data.space){var c="";i||(c=l[0]+l[3]),b.data.html+="<div id='files_view' class='view widget files_thumbnails' aria-live='polite' role='main' tabindex='0' aria-controls='status_view'><h4 class='message_content'></h4><div class='files_thumbnails fake no_list' role='list'></div>"+c+"</div>"}}),c.on("uiReady",function(d){c.config.showContextMenuArrow||(e="",f="");var h=c.document.getById("files_view");h.hX();var i=a.ld.bz(c,"filesview",g,h);c.config.selectMultiple&&h.on("click",function(a){if(a.data.$.shiftKey){var b=i.tools.dH(),c=i.tools.bZ(a),d=!b;if(c){b&&(b.rowNode().$.offsetTop<c.rowNode().$.offsetTop?d=1:"list"!=i.data().dA&&b.rowNode().$.offsetTop==c.rowNode().$.offsetTop&&(d=b.rowNode().$.offsetLeft<c.rowNode().$.offsetLeft));for(var f,e=c.rowNode();(e=d?e.cf():e.dG())&&(f=i.tools.bZ(e),!b||!f.isSameFile(b));)f.select(!0);i.tools.cR(c,!0),a.cancel(),a.data.preventDefault()}}},null,null,1),c.bD("ViewFile",{exec:function(a){var b=i.data().cG;if(b){if(!0===a.oW("launchGallery",{selected:b,files:i.data().files}).bx)return;var c=.8*window.screen.width,d=.7*window.screen.height,e="menubar=no,location=no,status=no,toolbar=no,scrollbars=yes,resizable=yes";e+=",width="+c,e+=",height="+d,e+=",left="+(window.screen.width-c)/2,e+=",top="+(window.screen.height-d)/2;(a.cg.inPopup?a.document.getWindow().$.parent:window).open(b.folder.getUrl()+encodeURIComponent(b.name),"_blank",e)||a.msgDialog("",a.lang.ErrorMsg.PopupBlockView)}}}),c.bD("DownloadFile",{exec:function(a){var b=i.data().cG;if(b){var c;c=a.config.directDownload?b.folder.getUrl()+b.name+"?download":a.connector.composeUrl("DownloadFile",{FileName:b.name},b.folder.type,b.folder),i.tools.downloadFile(a.document,c)}}}),c.bD("RenameFile",{readOnly:!1,exec:function(b){var c=function(c,e){try{d.rename(e)}catch(c){if(!(c instanceof a.dU))throw c;b.msgDialog("",c.message)}},d=i.data().cG;d&&d.folder.acl.fileRename&&b.hs(b.lang.RenameDlgTitle,b.lang.FileRename,d.name,function(a){if(a=k.trim(a)){a.match(b.rQ.jf)[0].toLowerCase()!=d.ext.toLowerCase()?b.fe("",b.lang.FileRenameExt,function(){c(d,a)}):c(d,a)}})}}),c.bD("DeleteFile",{readOnly:!1,exec:function(a){var b=i.tools.oO(!0);b&&0!=b.length&&b[0].folder.acl.fileDelete&&a.fe("",1==b.length?a.lang.FileDelete.replace("%1",b[0].name):a.lang.FilesDelete.replace("%1",b.length),function(){x(a,b)})}}),c.bD("copyFilesToFolder",{readOnly:!1,exec:function(a,b){b.files||(b.files=i.tools.oO()),b.files.length&&b.destination&&b.destination.acl.fileUpload&&t(a,b,0,0,[],b.callback)}}),c.bD("moveFilesToFolder",{readOnly:!1,exec:function(a,b){b.files||(b.files=i.tools.oO()),b.files.length&&b.destination&&b.destination.acl.fileUpload&&b.files[0].folder.acl.fileDelete&&t(a,b,1,0,[],b.callback)}}),c.eU&&(c.dZ("file0",90),c.dZ("file1",100),c.dZ("file2",110),c.dZ("file3",120),c.eU({selectFile:{label:c.lang.Select,onClick:function(){var a=c.ld["filesview.filesview"],b=a.tools.dH();b&&a.oW("requestSelectAction",{file:b})},group:"file0"},selectFileThumbnail:{label:c.lang.SelectThumbnail,onClick:function(){var a=c.ld["filesview.filesview"],b=a.tools.dH();b&&a.oW("requestSelectThumbnailAction",{file:b})},group:"file0"},viewFile:{label:c.lang.View,command:"ViewFile",group:"file1"},downloadFile:{label:c.lang.Download,command:"DownloadFile",group:"file1"},renameFile:{label:c.lang.Rename,command:"RenameFile",group:"file2"},deleteFile:{label:c.lang.Delete,command:"DeleteFile",group:"file3"},deleteFiles:{label:c.lang.DeleteFiles,command:"DeleteFile",group:"file3"}})),c.bj&&(c.bj.lX(h),c.bj.kh(function(d,e){var f=i.tools.bZ(d);if(f){f.rowNode().hasClass("selected")?i.data().cG=f:c.oW("requestSelectFile",{file:f});var g=f.folder.acl,h={viewFile:g.fileView?a.aS:a.aY,downloadFile:g.fileView?a.aS:a.aY};return c.config.readOnly||(h.renameFile=g.fileRename?a.aS:a.aY,h[i.tools.oO().length>1?"deleteFiles":"deleteFile"]=g.fileDelete?a.aS:a.aY),c.config.selectActionFunction&&(h.selectFile=g.fileView?a.aS:a.aY),f.isImage()&&!c.config.disableThumbnailSelection&&(c.config.selectThumbnailActionFunction||c.config.thumbsDirectAccess&&c.config.selectActionFunction)&&(h.selectFileThumbnail=g.fileView?a.aS:a.aY),i.oW("beforeContextMenu",{bj:h,file:f,folder:i.data().folder}),h}},h))}),c.bD("filesviewFocus",{exec:function(a){var b=a.layout.pn(),c=a.ld["filesview.filesview"],d=c.tools.dH();b.focus(),d&&d.focus()}})}}),a.aL.File=function(a,b,c,e,f,g){var h=this;h.index=null,h.app=null,h.name=a,h.ext=a.match(d.fX)[0],h.nameL=a.toLowerCase(),h.size=b,h.thumb=c,h.date=e,h.dateF=f,h.folder=g,h.isDeleted=!1},a.aL.File.prototype={rename:function(a){w(a,this.app);var b=this;if(b.name==a)return void b.app.oW("afterCommandExecDefered",{name:"RenameFile",file:b});b.app.oW("requestProcessingFile",{file:b}),b.app.connector.sendCommandPost("RenameFile",{fileName:b.name,newFileName:a},null,function(a){if(a.checkError())return void b.app.oW("requestRepaintFile",{file:b});b.name=a.selectSingleNode("Connector/RenamedFile/@newName").value,b.nameL=b.name.toLowerCase(),b.ext=b.name.match(d.fX)[0],b.thumb=0,b.app.oW("afterCommandExecDefered",{name:"RenameFile",file:b})},b.folder.type,b.folder)},remove:function(){x(this.app,[this])},select:function(a){this.app.oW("requestSelectFile",{file:this,multiple:a})},deselect:function(a){a?this.select(!0):this.app.oW("requestSelectFile")},toString:function(){return this.name},isImage:function(){return this.app.rQ.rO.test(this.ext)},isSameFile:function(a){var b=this;return(b.name==a.name||b.index==a.index)&&b.folder.getPath()==a.folder.getPath()&&b.folder.type==a.folder.type},getUrl:function(){return this.folder.getUrl()+encodeURIComponent(this.name)},rowNode:function(){var a=this;return a.je||(a.je=a.app.document.getById("r"+a.index)),a.je},getThumbnailUrl:function(a){var b=this,c=b.thumb,d=b.name,e=b.app,f=d.match(e.rQ.jf);if(f&&(f=f[0])){if(e.config.thumbsEnabled&&e.rQ.rO.test(f)){var g=encodeURIComponent(b.date+"-"+b.size);if(c&&e.config.thumbsDirectAccess)return e.config.thumbsUrl+b.folder.type+b.folder.getPath()+encodeURIComponent(d)+(a?"?hash="+e.getResourceType(b.folder.type).hash+"&fileHash="+g:"");var i={FileName:d};return a&&(i.fileHash=g),e.connector.composeUrl("Thumbnail",i,b.folder.type,b.folder)}if(e.config.useNativeIcons&&h.gecko)return"moz-icon://."+f.toLowerCase()+"?size=32";if(e.rQ.jh.test(f))return e.fh+"images/icons/32/"+f.toLowerCase()+".gif"}return e.fh+"images/icons/32/default.icon.gif"},filenameNode:function(){var a=this;if(void 0===a.ht){var b=a.rowNode();b&&(b.is("a")?a.ht=C(B(b.$.childNodes,"h5")):a.ht=C(B(a.aNode().$.childNodes,"h5")))}return a.ht},aNode:function(){var a=this;if(void 0===a.dM){var b=a.rowNode();if(b)if(b.is("a"))a.dM=b;else{var c=B(b.$.childNodes,"td",1);a.dM=C(B(c.childNodes,"a"))}}return a.dM},focusNode:function(){return this.aNode()},releaseDomNodes:function(){this.je=void 0,this.dM=void 0,this.ht=void 0},focus:function(a,b){!b&&this.select(a);var c=this.focusNode();c.setAttribute("tabindex",0),c.focus()},blur:function(){this.aNode().setAttribute("tabindex",-1)}}}(),function(){function b(a,b){var c=[];if(!b)return a;for(var d in b)c.push(d+"="+encodeURIComponent(b[d]));return a+(-1!=a.indexOf("?")?"&":"?")+c.join("&")}function d(a){var b=this,c=b.getDialog();return c.getParentApi()._.rb=b,!!c.getContentElement(b.for[0],b.for[1]).getInputElement().$.value&&!!c.getContentElement(b.for[0],b.for[1]).vy()}function e(a,c,d){var e=d.params||{};d.url&&(e.CKFinderFuncNum=a._.ra,e.langCode||(e.langCode=a.langCode),c.action=b(d.url,e),c.filebrowser=d)}function f(a,c,g,h){var i;for(var k in h)if(i=h[k],"hbox"!=i.type&&"vbox"!=i.type||f(a,c,g,i.children),i.filebrowser&&"fileButton"==i.type&&i.for){if("string"==typeof i.filebrowser){var l={target:i.filebrowser};i.filebrowser=l}i.filebrowser.action="QuickUpload";var m=i.filebrowser.url;if(m)i.filebrowser.url=m,i.hidden=!1,e(a,g.vz(i.for[0]).eB(i.for[1]),i.filebrowser);else{var n=i.onShow;i.onShow=function(c){var d=c.jN;if(n&&!1===n.call(d,c))return!1;var e=a.getSelectedFolder();if(e&&(m=e.getUploadUrl()),!m)return!1;var f=i.filebrowser.params||{};f.CKFinderFuncNum=a._.ra,f.langCode||(f.langCode=a.langCode),m=b(m,f);var g=this.getDialog().getContentElement(i.for[0],i.for[1]);return!!g&&(g._.dg.action=m,g.reset(),!0)}}var o=i.onClick;i.onClick=function(a){var b=a.jN;return(!o||!1!==o.call(b,a))&&d.call(b,a)}}}function g(a,b){var c=b.getDialog(),d=b.filebrowser.target||"";if(d){var e=d.split(":"),f=c.getContentElement(e[0],e[1]);f&&(f.setValue(a),c.selectPage(e[0]))}}function h(a,b,c){if(-1!==c.indexOf(";")){for(var d=c.split(";"),e=0;e<d.length;e++)if(h(a,b,d[e]))return!0;return!1}var f=a.vz(b).eB(c).filebrowser;return f&&f.url}function i(a,b){var c=this,d=c._.rb.getDialog(),e=c._.rb.for,f=c._.rb.filebrowser.onSelect;e&&d.getContentElement(e[0],e[1]).reset(),"function"==typeof b&&!1===b.call(c._.rb)||f&&!1===f.call(c._.rb,a,b)||("string"==typeof b&&b&&alert(b),a&&g(a,c._.rb))}o.add("filebrowser",{bz:function(a){a.cg._.ra=k.addFunction(i,a.cg)}}),a.on("dialogDefinition",function(a){var c,b=a.data.dg;for(var d in b.contents)c=b.contents[d],f(a.application.cg,a.data.name,b,c.elements),c.hidden&&c.filebrowser&&(c.hidden=!h(b,c.id,c.filebrowser))})}(),o.add("button",{eK:function(b){b.bY.kd(a.UI_BUTTON,p.button.dq)}}),CKFinder._.UI_BUTTON=a.UI_BUTTON=1,p.button=function(a){k.extend(this,a,{title:a.label,className:a.className||a.command&&"cke_button_"+a.command||"",click:a.click||function(b){a.command?b.execCommand(a.command):a.onClick&&a.onClick(b)}}),this._={}},p.button.dq={create:function(a){return new p.button(a)}},p.button.prototype={canGroup:!0,er:function(b,c){var d=h,e=this._.id="cke_"+k.getNextNumber();this._.app=b;var f={id:e,button:this,app:b,focus:function(){var a=b.document.getById(e);a&&a.focus()},lc:function(){this.button.click(b)}},g=k.addFunction(f.lc,f),i=p.button._.instances.push(f)-1,j="",l=this.command;if(this.iH?b.on("mode",function(){this.bR(this.iH[b.mode]?a.aS:a.aY)},this):l&&(l=b.cS(l))&&(l.on("bu",function(){this.bR(l.bu)},this),j+="cke_"+(l.bu==a.eV?"on":l.bu==a.aY?"disabled":"off")),l||(j+="cke_off"),this.className&&(j+=" "+this.className),c.push('<span class="cke_button">','<a id="',e,'" class="',j,'" href="javascript:void(\'',(this.title||"").replace("'",""),'\')" title="',this.title,'" tabindex="-1" hidefocus="true" role="button" aria-labelledby="'+e+'_label"'+(this.vZ?' aria-haspopup="true"':"")),(d.opera||d.gecko&&d.mac)&&c.push(' onkeypress="return false;"'),d.gecko&&c.push(' onblur="this.style.cssText = this.style.cssText;"'),c.push(' onkeydown="window.parent.CKFinder._.uiButtonKeydown(',i,', event);" onfocus="window.parent.CKFinder._.uiButtonFocus(',i,', event);" onclick="window.parent.CKFinder._.callFunction(',g,', this); return false;">'),!1!==this.icon&&c.push('<span class="cke_icon"'),this.icon){var m=-16*(this.rD||0);c.push(' style="background-image:url(',a.getUrl(this.icon),");background-position:0 "+m+'px;"')}return!1!==this.icon&&c.push("></span>"),c.push('<span id="',e,'_label" class="cke_label">',this.label,"</span>"),this.vZ&&c.push('<span class="cke_buttonarrow"></span>'),c.push("</a>","</span>"),this.onRender&&this.onRender(),f},bR:function(b){var c=this;if(c._.bu==b)return!1;c._.bu=b;var d=c._.app.document.getById(c._.id);if(d){d.bR(b),b==a.aY?d.setAttribute("aria-disabled",!0):d.removeAttribute("aria-disabled"),b==a.eV?d.setAttribute("aria-pressed",!0):d.removeAttribute("aria-pressed");var e=c.title,f=c._.app.lang.common.unavailable,g=d.getChild(1);return b==a.aY&&(e=f.replace("%1",c.title)),g.setHtml(e),!0}return!1}},p.button._={instances:[],keydown:function(a,b){var c=p.button._.instances[a];if(c.onkey)return b=new j.event(b),!1!==c.onkey(c,b.db())},focus:function(a,b){var d,c=p.button._.instances[a];return c.onfocus&&(d=!1!==c.onfocus(c,new j.event(b))),h.gecko&&h.version<10900&&b.preventBubble(),d}},CKFinder._.uiButtonKeydown=p.button._.keydown,CKFinder._.uiButtonFocus=p.button._.focus,p.prototype.qW=function(b,c){this.add(b,a.UI_BUTTON,c)},function(){o.add("container",{bM:[],bz:function(a){var b=this;a.on("themeAvailable",function(){b.pV(a)})},pV:function(b){function o(c){c&&c.removeListener();var d=n.getFrameDocument().$;if(d.open(),j&&(d.domain=document.domain),b.document=new l(d),b.theme.dQ(b),d.close(),(d.defaultView||d.parentWindow).CKFinder=CKFinder,a.skins.load(b,"application",function(){var a=b.dJ;a&&a.oA(b.document)}),!n.isVisible()&&i&&h.version>=8)var e=setInterval(function(){n.isVisible()&&(b.layout.ea(!0),e=clearInterval(e))},500)}var c=b.config.height,d=b.config.tabIndex||b.element.getAttribute("tabindex")||0;isNaN(c)||(c=Math.max(c,200),c+="px");var e="",f=b.config.width;f&&(isNaN(f)||(f+="px"),e+="width: "+f+";");var g=b.config.className?'class="'+b.config.className+'"':"",j=h.isCustomDomain(),k="document.open();"+(j?'document.domain="'+window.document.domain+'";':"")+"document.close();",n=m.kE('<iframe style="'+e+"height:"+c+'"'+g+' frameBorder="0" src="'+(i?"javascript:void(function(){"+encodeURIComponent(k)+"}())":"")+'" tabIndex="'+d+'" allowTransparency="true"></iframe>',b.element.getDocument());i&&h.version>=9&&b.cg.inPopup&&(b.element.getDocument().getWindow().$.ckfinder=function(){b.element.getDocument().getWindow().$.ckfinder=void 0,o()}),n.on("load",o);var p=b.lang.appTitle.replace("%1",b.name);h.gecko?(n.on("load",function(a){a.removeListener()}),b.element.setAttributes({role:"region",title:p}),n.setAttributes({role:"region",title:" "})):h.webkit?(n.setAttribute("title",p),n.setAttribute("name",p)):i&&n.appendTo(b.element),i||b.element.append(n),b.container=n}}),a.application.prototype.focus=function(){var a=this;if(a._.oO&&a._.oO.length>1){a.oW("requestSelectFile");for(var b=0,c=a._.oO.length;b<c;b++)a.oW("requestSelectFile",{file:a._.oO[b],multiple:!0})}(a._.activeElement?m.eB(a._.activeElement):a.document.getWindow()).focus()}}(),o.add("contextmenu",{bM:["menu"],eK:function(a){a.bj=new o.bj(a),a.bD("bj",{exec:function(){var c,d,e,b=a.layout.pn();if(b.hasClass("focus_inside")){e=a.ld["filesview.filesview"];var f=e.tools.dH();if(f)return c=f.dM,d=c.ir(),a.bj.show(a.document.bH().getParent(),null,d.x+5,d.y+5,c,b),a._.activeElement=c,void(a._.oO=e.tools.oO())}if(b=a.layout.pS(),b.hasClass("focus_inside")){e=a.ld["foldertree.foldertree"];var g=e.tools.ew;if(g)return c=g.dM,d=c.ir(),a.bj.show(a.document.bH().getParent(),null,d.x+5,d.y+5,c,b),a._.activeElement=c,void(a._.oO=[])}}})}}),o.bj=k.createClass({$:function(a){this.id="cke_"+k.getNextNumber(),this.app=a,this._.dF=[],this._.vx=k.addFunction(function(b){this._.panel.hide(),a.focus&&a.focus()},this)},_:{onMenu:function(b,c,d,e,f,g){var h=this._.menu,j=this.app;h?(h.hide(),h.ih()):(h=this._.menu=new a.menu(j),h.onClick=k.bind(function(a){h.hide(),i&&j.focus&&j.focus(),a.onClick?a.onClick():a.command&&j.execCommand(a.command)},this)),h.onEscape=function(){j.focus&&j.focus(),f.focus&&f.focus(),j._.activeElement=null};var l=this._.dF;h.onHide=k.bind(function(){h.onHide=null,this.onHide&&this.onHide()},this);for(var n=0;n<l.length;n++){var o=l[n];if(!o[1]||o[1].$==g.$){var p=l[n][0](f);if(p)for(var q in p){var r=this.app.mh(q);r&&(r.bu=p[q],h.add(r))}}}h.items.length&&h.show(b,c||("rtl"==j.lang.dir?2:1),d,e)}},ej:{lX:function(b,c){if(h.opera&&!("oncontextmenu"in document.body)){var d;b.on("mousedown",function(e){if(e=e.data,2!=e.$.button)return void(e.db()==a.bP+1&&b.oW("contextmenu",e));if(!c||!e.$.ctrlKey&&!e.$.metaKey){var f=e.bK();if(!d){var g=f.getDocument();d=g.createElement("input"),d.$.type="button",g.bH().append(d)}d.setAttribute("style","position:absolute;top:"+(e.$.clientY-2)+"px;left:"+(e.$.clientX-2)+"px;width:5px;height:5px;opacity:0.01")}}),b.on("mouseup",function(a){d&&(d.remove(),d=void 0,b.oW("contextmenu",a.data))})}if(b.on("contextmenu",function(a){var d=a.data;if(!c||!(h.webkit?e:d.$.ctrlKey||d.$.metaKey)){d.preventDefault();var f=d.bK(),g=d.bK().getDocument().gT(),i=d.$.clientX,j=d.$.clientY;k.setTimeout(function(){this._.onMenu(g,null,i,j,f,b)},0,this)}},this),h.opera&&b.on("keypress",function(a){var b=a.data;0===b.$.keyCode&&b.preventDefault()}),h.webkit){var e,f=function(a){e=a.data.$.ctrlKey||a.data.$.metaKey},g=function(){e=0};b.on("keydown",f),b.on("keyup",g),b.on("contextmenu",g)}},kh:function(a,b){this._.dF.push([a,b])},show:function(b,c,d,e,f,g){this.app.focus(),this._.onMenu(b||a.document.gT(),c,d||0,e||0,f,g)}}}),function(){function b(a){var b=this;b.jr=null,b.kP=null,b.nK=null,b.app=a}function c(a,b){for(var c=!0,d=b[0].ext.toLowerCase(),e=1,f=b.length;e<f;e++)if(b[e].ext.toLowerCase()!=d){c=!1;break}return'<div style="background-image: url('+(c?a.tools.oR(b[0],!0):a.app.fh+"images/icons/32/default.icon.gif")+')"><span>'+b.length+"</span></div>"}o.add("dragdrop",{bM:["foldertree","filesview","contextmenu","dialog"],readOnly:!1,gr:function(e){e.cK=new b(e);var f,g;e.on("themeSpace",function(b){"mainBottom"==b.data.space&&(b.data.html+='<div id="dragged_container" style="display: none; position: absolute;"></div>')}),e.on("uiReady",function(a){e.document.on("dragstart",function(a){a.data.preventDefault(!0)}),e.document.on("drag",function(a){a.data.preventDefault(!0)});e.ld["filesview.filesview"].gA("Draggable"),e.ld["foldertree.foldertree"].ke("Droppable")}),a.ld.bX["filesview.filesview"].bh("Draggable",["mousedown"],function(b){var d=this,g=d.tools.bZ(b),h=d.tools.oO(!0);if(g&&b.data.ov()){b.data.preventDefault(),g.rowNode().hasClass("selected")||((b.data.$.ctrlKey||b.data.$.metaKey)&&e.config.selectMultiple?h.push(g):h=[g]);var i=k.extend({},{file:g,files:h,step:1},!0);d.oW("beforeDraggable",i,function(b,i){function m(a){if(f.setStyles({left:a.data.$.clientX-("rtl"==e.lang.dir?f.hR("width"):-1)+"px",top:a.data.$.clientY+"px"}),0===k&&(k=a.data.$.clientY+a.data.$.clientX),!(l||Math.abs(a.data.$.clientY+a.data.$.clientX-k)<20)){d.app.cK.kG(j),d.app.cK.kz(h);for(var b=0,g=h.length;b<g;b++)h[b].rowNode().addClass("dragged_source");1==h.length?(f.setStyle("width",j.rd("width")),f.addClass("file_entry")):f.addClass("drag_multiple"),f.show();var m;1==h.length?(m=j.getHtml(),m=m.replace(/url\(&quot;(.+?)&quot;\);?"/,'url($1);"'),m=m.replace(/url\(([^'].+?[^'])\);?"/,"url('$1');\"")):m=c(d,h),f.setHtml(m),l=1,d.app.document.bH().addClass("dragging"),d.app.ld["foldertree.foldertree"].gA("Droppable"),i.step=1,d.oW("successDraggable",i)}}function n(a){f.hide(),f.removeClass("drag_multiple"),f.removeClass("file_entry"),f.setStyle("width","auto"),f.setHtml("");for(var b=0,c=h.length;b<c;b++)h[b].rowNode().removeClass("dragged_source");d.app.cK.kG(null),d.app.cK.kz(null),e.document.removeListener("mousemove",m),a?a.removeListener():e.document.removeListener("mouseup",n),d.app.ld["foldertree.foldertree"].ke("Droppable"),d.app.document.bH().removeClass("dragging"),i.step=2,d.oW("successDraggable",i),d.oW("afterDraggable",i)}if(!b){var j=g.rowNode(),k=0,l=0;f=f||e.document.getById("dragged_container"),f.hide(),e.document.on("mousemove",m),e.document.on("mouseup",n,999);var o=e.document.bH().$;e.document.on("mouseout",function(a){e.cK.qp()&&a.data.bK().$==o&&n()})}})}}),a.ld.bX["foldertree.foldertree"].bh("Droppable",["mouseup","mouseover","mouseout"],function(c){var d=c.data.bK(),f=this,h=c.name;if(!!f.app.cK.qp()&&!d.is("ul")){var j=f.tools.cq(d);if(j)if("mouseup"==h){f.app.cK.iW(0),f.app.cK.nz(j);var l=f.app.cK.pe(),m=k.extend({},{target:j,source:l},!0);f.oW("beforeDroppable",m,function(c,d){if(!c)try{var h=d.target,i=d.source,j=new a.iD(f.app,"copyFilesToFolderDrop",{label:f.app.lang.CopyDragDrop,bu:h!=i[0].folder&&h.acl.fileUpload?a.aS:a.aY,onClick:function(){f.oW("successDroppable",{hH:i,hC:h,step:2}),f.app.execCommand("copyFilesToFolder",{files:i,destination:h,callback:function(){f.oW("successDroppable",{hH:i,hC:h,step:3}),f.oW("afterDroppable",d)},errorCallback:function(){f.oW("failedDroppable",d),f.oW("afterDroppable",d)}})}}),l=window.top[a.nd+"cation"][a.jG+"st"],m=new a.iD(f.app,"moveFilesToFolderDrop",{label:f.app.lang.MoveDragDrop,bu:h!=i[0].folder&&h.acl.fileUpload&&i[0].folder.acl.fileDelete?a.aS:a.aY,onClick:function(){f.oW("successDroppable",{hH:i,hC:h,step:2}),a.bF&&1==a.bs.indexOf(a.bF.substr(1,1))%5&&a.lS(l)!=a.lS(a.ed)||a.bF&&a.bF.substr(3,1)!=a.bs.substr(9*(a.bs.indexOf(a.bF.substr(0,1))+a.bs.indexOf(a.bF.substr(2,1)))%(a.bs.length-1),1)?f.app.msgDialog("","This function is disabled in the demo version of CKFinder.<br />Please visit the <a href='http://cksource.com/ckfinder'>CKFinder web site</a> to obtain a valid license."):f.app.execCommand("moveFilesToFolder",{files:i,destination:h,callback:function(){f.oW("successDroppable",{hH:i,hC:h,step:3}),f.oW("afterDroppable",d)},errorCallback:function(){f.oW("failedDroppable",d),f.oW("afterDroppable",d)}})}}),n={copyFilesToFolder:j,moveFilesToFolder:m};f.oW("beforeDropMenu",{iG:n,folder:h}),g||(g=new a.menu(f.app),g.onClick=k.bind(function(a){g.hide(),a.onClick?a.onClick():a.command&&e.execCommand(a.command)},this)),g.ih();for(var o in n)n.hasOwnProperty(o)&&g.add(n[o]);g.items.length&&g.show(h.aNode(),"rtl"==e.lang.dir?2:1,0,h.aNode().$.offsetHeight),f.oW("successDroppable",{hH:i,hC:h,step:1})}catch(b){throw b=a.ba(b),f.oW("failedDroppable",d),f.oW("afterDroppable",d),b}})}else"mouseover"==h?f.app.cK.fZ||f.app.cK.iW(j.liNode()):"mouseout"==h&&f.app.cK.fZ&&f.app.cK.iW(0)}})}}),b.prototype={iW:function(a){var b=this,c=!!a;c&&!b.fZ?(b.app.document.bH().addClass("drop_accepted"),a.addClass("drop_target")):!c&&b.fZ&&(b.app.document.bH().removeClass("drop_accepted"),b.fZ.removeClass("drop_target")),b.fZ=c?a:null},kG:function(a){this.jr=a,this.jr instanceof m&&this.jr.focus()},vE:function(){return this.jr},kz:function(a){this.kP=a},pe:function(){return this.kP},qp:function(){return!!this.jr},nz:function(a){this.nK=a},oa:function(){return this.nK}}}(),o.add("floatpanel",{bM:["panel"]}),function(){function d(a,c,d,e,f){var g=c.iY()+"-"+d.iY()+"-"+a.gd+"-"+a.lang.dir+(a.uiColor&&"-"+a.uiColor||"")+(e.css&&"-"+e.css||"")+(f&&"-"+f||""),h=b[g];return h||(h=b[g]=new p.panel(c,e,a.gd),h.element=d.append(m.kE(h.nt(a),d.getDocument())),h.element.setStyles({display:"none",position:"absolute"})),h}var b={},c=!1;p.pY=k.createClass({$:function(a,b,c,e){c.lE=!0;var f=b.getDocument(),g=d(a,f,b,c,e||0),h=g.element,i=h.getFirst().getFirst();this.element=h,a.ia?a.ia.push(h):a.ia=[h],this._={panel:g,parentElement:b,dg:c,document:f,iframe:i,children:[],dir:a.lang.dir}},ej:{qq:function(a,b){return this._.panel.qq(a,b)},re:function(a,b){return this._.panel.re(a,b)},iv:function(a){return this._.panel.iv(a)},gf:function(b,d,e,f,g){var l=this._.panel,m=l.gf(b);this.fj(!1),c=!0;var n=this.element,o=this._.iframe,p=this._.dg,q=d.ir(n.getDocument()),r="rtl"==this._.dir,s=q.x+(f||0),t=q.y+(g||0);if(!r||1!=e&&4!=e?r||2!=e&&3!=e||(s+=d.$.offsetWidth-1):s+=d.$.offsetWidth,3!=e&&4!=e||(t+=d.$.offsetHeight-1),this._.panel._.nr=d.dS(),n.setStyles({top:t+"px",left:"-3000px",visibility:"hidden",opacity:"0",display:""}),n.getFirst().removeStyle("width"),!this._.qa){var u=i?o:new j.window(o.$.contentWindow);a.event.jP=!0,u.on("blur",function(a){if(!i||this.fj()){var b=a.data.bK(),d=b.getWindow&&b.getWindow();d&&d.equals(u)||!this.visible||this._.gF||c||(h.webkit&&h.isMobile?k.setTimeout(function(){this.hide()},500,this):this.hide())}},this),u.on("focus",function(){this._.lG=!0,this.gU(),this.fj(!0)},this),a.event.jP=!1,this._.qa=1}l.onEscape=k.bind(function(){this.onEscape&&this.onEscape()},this),k.setTimeout(function(){function b(){var a=n.getFirst(),b=0,c=m.element.$;(h.gecko||h.opera)&&(c=c.parentNode);var d=c.scrollWidth;if(i&&h.version<10){c=c.document.body;for(var e=c.getElementsByTagName("a"),f=0;f<e.length;f++){var g=e[f].children[1],j=g.scrollWidth+g.offsetLeft-d;j>0&&j>b&&(b=j)}}d+=b,i&&h.quirks&&d>0&&(d+=(a.$.offsetWidth||0)-(a.$.clientWidth||0)),d+=4,a.setStyle("width",d+"px"),m.element.addClass("cke_frameLoaded");var k=m.element.$.scrollHeight;i&&h.quirks&&k>0&&(k+=(a.$.offsetHeight||0)-(a.$.clientHeight||0)),a.setStyle("height",k+"px"),l._.iL.element.setStyle("display","none").removeStyle("display")}r&&(s-=n.$.offsetWidth),n.setStyles({left:s+"px",visibility:"",opacity:"1"});var a=n.getFirst();m.oz?l.hm?b():l.onLoad=b:a.removeStyle("height");var c=l.element,d=c.getWindow(),e=d.hV(),f=d.eR(),g={height:c.$.offsetHeight,width:c.$.offsetWidth};(r?s<0:s+g.width>f.width+e.x)&&(s+=g.width*(r?1:-1)),t+g.height>f.height+e.y&&(t-=g.height),n.setStyles({top:t+"px",left:s+"px",opacity:"1"}),k.setTimeout(function(){if(p.ny&&h.gecko){var a=o.getParent();a.setAttribute("role","region"),a.setAttribute("title",p.ny),o.setAttribute("role","region"),o.setAttribute("title"," ")}i&&h.quirks?o.focus():o.$.contentWindow.focus(),i&&!h.quirks&&this.fj(!0)},0,this)},0,this),this.visible=1,this.onShow&&this.onShow.call(this),(h.ie7Compat||h.ie8&&h.ie6Compat)&&k.setTimeout(function(){this._.parentElement.$.style.cssText+=""},0,this),c=!1},hide:function(){var a=this;!a.visible||a.onHide&&!0===a.onHide.call(a)||(a.gU(),a.element.setStyle("display","none"),a.visible=0)},fj:function(a){var b=this._.panel;return void 0!=a&&(b.fj=a),b.fj},rA:function(a,b,c,d,e,f){this._.gF==a&&a._.panel._.nr==c.dS()||(this.gU(),a.onHide=k.bind(function(){k.setTimeout(function(){this._.lG||this.hide()},0,this)},this),this._.gF=a,this._.lG=!1,a.gf(b,c,d,e,f),(h.ie7Compat||h.ie8&&h.ie6Compat)&&setTimeout(function(){a.element.getChild(0).$.style.cssText+=""},100))},gU:function(){var a=this._.gF;a&&(delete a.onHide,delete this._.gF,a.hide())}}})}(),function(){function b(){var b=a.ld.hS("formpanel","formpanel",{dc:null});b.dT.push(function(){k.mH(this.bn())}),b.bh("UnloadForm",["submit","requestUnloadForm"],function(c){("submit"!=c.name||this.data().gM)&&(c.result=this.oW("beforeUnloadForm",function(c,d){var e=this;if(!c)try{if(e.bn().getParent().setStyle("display","none"),e.app.layout.ea(!0),e.data().dc){var f=e.app.cS(e.data().dc);f&&f.bR(a.aS),e.data().dc=null}var g=e.tools.formNode();g&&(g.mF(),g.remove()),e.tools.releaseDomNodes(),e.oW("successUnloadForm",d)}catch(b){throw e.oW("failedUnloadForm",d),e.oW("afterUnloadForm",d),a.ba(b)}}))}),b.bh("LoadForm",["requestLoadForm"],function(c){var d=this,f=k.extend({html:null,dq:null,cC:null,cancelSubmit:1,gM:1,command:null},c.data,!0);c.result=this.oW("beforeLoadForm",f,function(c,f){if(!c){try{var g=this.bn();g.setHtml(f.html),g.getParent().removeStyle("display"),this.app.layout.ea(!0);var h=this.tools.formNode();if(h){if(f.dq)if(f.cC)for(var i in f.cC)h.on(f.cC[i],f.dq);else h.on("submit",f.dq);f.cancelSubmit&&h.on("submit",e);for(var j=h.eG("input"),i=0;i<j.count();i++)if("cancel"==j.getItem(i).getAttribute("name")){j.getItem(i).on("click",function(a){d.oW("requestUnloadForm"),a.removeListener()});break}f.cancelSubmit&&h.on("submit",e)}if(this.data().gM=f.gM,f.command){var k=this.app.cS(f.command);k&&k.bR(a.eV),this.data().dc=f.command}this.oW("successLoadForm",f)}catch(b){throw this.oW("failedLoadForm",f),a.ba(b)}this.oW("afterLoadForm",f)}})}),b.bh("FilesViewSettingsForm",["requestFilesViewSettingsForm"],function(e){e.result=this.oW("beforeFilesViewSettingsForm",{},function(e,f){if(!e)try{if("settings"==this.data().dc)this.oW("requestUnloadForm",function(){this.oW("successFilesViewSettingsForm",f),this.oW("afterFilesViewSettingsForm",f)});else{this.data().dc&&this.oW("requestUnloadForm");var g=this.app.ld["filesview.filesview"].data(),h=d(this.app.lang,g.dA,g.display,g.cN);this.oW("requestLoadForm",{html:h,dq:k.bind(c,this),cC:["click","submit"],command:"settings"},function(){this.eh.addClass("show_border"),this.app.cg.resizeFormPanel(),this.oW("successFilesViewSettingsForm",f)})}}catch(b){throw this.oW("failedFilesViewSettingsForm",f),this.oW("afterFilesViewSettingsForm",f),a.ba(b)}})}),b.tools={formNode:function(){var a=this;return void 0===a.iP&&a.ib.bn().$.childNodes.length&&(a.iP=h(g(a.ib.bn().$.childNodes,"form"))),a.iP},releaseDomNodes:function(){delete this.iP}}}function c(a){if("submit"==a.name){var b=this.app.ld["formpanel.formpanel"],c=b.data();return this.oW("requestUnloadForm"),void this.oW("afterFilesViewSettingsForm",c)}var d=a.data.bK(),e=d.getAttribute("name"),f=d.getAttribute("value"),g=d.$.checked;"input"==d.getName()&&k.setTimeout(function(){var a=this.app.ld["filesview.filesview"],b=a.data(),c={dA:b.dA,cN:b.cN,display:CKFinder.tools.clone(b.display),lookup:b.lookup};if("sortby"==e)b.cN=f;else if("view_type"==e){b.dA=f;var d=this.app.document.getById("fs_display_filename");"list"==f?(b.display.filename=!0,d.$.checked=!0,d.$.disabled=!0):d.$.disabled=!1}else"display_filename"==e?"list"!=b.dA&&(b.display.filename=!!g):"display_date"==e?b.display.date=!!g:"display_filesize"==e&&(b.display.filesize=!!g);var h=("list"==b.dA?"L":"T")+("size"==b.cN?"S":"date"==b.cN?"D":"extension"==b.cN?"E":"N")+(b.display.filename?"N":"_")+(b.display.date?"D":"_")+(b.display.filesize?"S":"_");k.setCookie("CKFinder_Settings",h,!1),c.display.filename==b.display.filename&&c.display.date==b.display.date&&c.display.filesize==b.display.filesize&&c.cN==b.cN&&c.dA==b.dA||a.oW("requestRenderFiles",{mj:a.app.lang.FilesEmpty,lastView:c})},0,this)}function d(a,b,c,d){var e='checked="checked"',f="",g="",h="",i="",j="",k="",l="",m="",n="";"list"==b?f=e:g=e,c.filename&&(h=e),c.date&&(i=e),c.filesize&&(j=e),"date"==d?l=e:"size"==d?m=e:"extension"==d?n=e:k=e;var o=f?' disabled="true"':"";return'<form id="files_settings" role="region" aria-controls="files_view" action="#" method="POST"><h2 role="heading">'+a.SetTitle+'</h2><table role="presentation"><tr><td><dl role="group" aria-labelledby="files_settings_type"><dt id="files_settings_type">'+a.SetView+'</dt><dd><input type="radio" name="view_type" value="thumbnails" '+g+' id="fs_type_thumbnails" /> <label for="fs_type_thumbnails">'+a.SetViewThumb+'</label></dd><dd><input type="radio" name="view_type" value="list" '+f+' id="fs_type_details" /> <label for="fs_type_details">'+a.SetViewList+'</label></dd></dl></td><td><dl role="group" aria-labelledby="files_settings_display"><dt id="files_settings_display">'+a.SetDisplay+'</dt><dd><input type="checkbox" name="display_filename" value="1" '+h+o+' id="fs_display_filename" /> <label for="fs_display_filename">'+a.SetDisplayName+'</label></dd><dd><input type="checkbox" name="display_date" value="1" '+i+' id="fs_display_date" /> <label for="fs_display_date">'+a.SetDisplayDate+'</label></dd><dd><input type="checkbox" name="display_filesize" value="1" '+j+' id="fs_display_filesize" /> <label for="fs_display_filesize">'+a.SetDisplaySize+'</label></dd></dl></td><td><dl role="group" aria-labelledby="files_settings_sorting"><dt id="files_settings_sorting">'+a.SetSort+'</dt><dd><input type="radio" name="sortby" value="filename" '+k+' id="fs_sortby_filename" /> <label for="fs_sortby_filename">'+a.SetSortName+'</label></dd><dd><input type="radio" name="sortby" value="date" '+l+' id="fs_sortby_date" /> <label for="fs_sortby_date">'+a.SetSortDate+'</label></dd><dd><input type="radio" name="sortby" value="size" '+m+' id="fs_sortby_size" /> <label for="fs_sortby_size">'+a.SetSortSize+'</label></dd><dd><input type="radio" name="sortby" value="extension" '+n+' id="fs_sortby_extension" /> <label for="fs_sortby_extension">'+a.SetSortExtension+'</label></dd></dl></td></tr></table><div class="buttons_wrapper"><div class="buttons"><input type="submit" value="'+a.CloseBtn+'" /></div></div></form>'}function e(a){a.data.preventDefault()}function f(a,b){for(var c in a)if(void 0!==b(a[c]))return a[c]}function g(a,b,c){return f(a,function(a){if(a.tagName&&a.tagName.toLowerCase()==b&&!c--)return a})}function h(a){return a?new m(a):null}o.add("formpanel",{bM:["button"],onLoad:function(){b()},gr:function(c){var d=this;c.on("themeSpace",function(b){"mainTop"==b.data.space&&(b.data.html+='<div id="panel_view" class="view" role="region" aria-live="polite" style="display: none;"><div id="panel_widget" class="panel_widget widget" tabindex="-1"></div></div>')}),c.on("uiReady",function(e){var f=c.document.getById("panel_view").getChild(0);a.ld.bz(c,"formpanel",d,f)}),c.bD("settings",{exec:function(b){b.oW("requestFilesViewSettingsForm",null,function(){b.cS("settings").bu==a.eV&&setTimeout(function(){b.ld["formpanel.formpanel"].tools.formNode().eG("input").getItem(0).focus()},0)})}}),c.bD("refresh",{exec:function(a){var b=a.aV;b&&a.oW("requestShowFolderFiles",{folder:b,lookup:a.ld["filesview.filesview"].data().lookup},function(){setTimeout(function(){a.ld["filesview.filesview"].bn().focus()},0)})}}),c.bY.add("Settings",a.UI_BUTTON,{label:c.lang.Settings,command:"settings"}),c.bY.add("Refresh",a.UI_BUTTON,{label:c.lang.Refresh,command:"refresh"}),c.cS("refresh").bR(a.aY)}})}(),o.add("keystrokes",{eK:function(b){b.dJ=new a.dJ(b),b.oX={}},bz:function(a){for(var b=a.config.keystrokes,c=a.config.gN,d=a.dJ.keystrokes,e=a.dJ.gN,f=0;f<b.length;f++)d[b[f][0]]=b[f][1];for(f=0;f<c.length;f++)e[c[f]]=1}}),a.dJ=function(a){var b=this;return a.dJ?a.dJ:(b.keystrokes={},b.gN={},b._={app:a},b)},function(){var b,c=function(a){a=a.data;var c=a.db(),d=this.keystrokes[c],e=this._.app;if(!(b=!0===e.oW("iK",{keyCode:c}))){if(d){var f={gJ:"dJ"};b=!1!==e.execCommand(d,f)}if(!b){var g=e.oX[c];b=g&&!0===g(e),b||(b=!!this.gN[c])}}return b&&a.preventDefault(!0),!b},d=function(a){b&&(b=!1,a.data.preventDefault(!0))};a.dJ.prototype={oA:function(a){a.on("keydown",c,this),(h.opera||h.gecko&&h.mac)&&a.on("keypress",d,this)}}}(),n.gN=[],n.keystrokes=[[a.eJ+119,"foldertreeFocus"],[a.eJ+120,"filesviewFocus"],[a.eJ+121,"hW"],[a.eJ+85,"upload"],[a.dy+121,"bj"],[a.bP+a.dy+121,"bj"]],o.add("menu",{eK:function(a){for(var b=a.config.nj.split(","),c={},d=0;d<b.length;d++)c[b[d]]=d+1;a._.iA=c,a._.iG={}},bM:["floatpanel"]}),k.extend(a.application.prototype,{dZ:function(a,b){this._.iA[a]=b||100},gp:function(b,c){this._.iA[c.group]&&(this._.iG[b]=new a.iD(this,b,c))},eU:function(a){for(var b in a)this.gp(b,a[b])},mh:function(a){return this._.iG[a]}}),function(){function b(a){a.sort(function(a,b){return a.group<b.group?-1:a.group>b.group?1:a.fE<b.fE?-1:a.fE>b.fE?1:0})}a.menu=k.createClass({$:function(a,b){var c=this;c.id="cke_"+k.getNextNumber(),c.app=a,c.items=[],c._.hx=b||1},_:{jK:function(b){var c=this,d=c._.oM,e=c.items[b],f=e.hQ&&e.hQ();if(!f)return void c._.panel.gU();d?d.ih():(d=c._.oM=new a.menu(c.app,c._.hx+1),d.parent=c,d.onClick=k.bind(c.onClick,c));for(var g in f)d.add(c.app.mh(g));var h=c._.panel.iv(c.id).element.getDocument().getById(c.id+String(b));d.show(h,2)}},ej:{add:function(a){a.fE||(a.fE=this.items.length),this.items.push(a)},ih:function(){this.items=[]},show:function(c,d,e,f){var g=this.items,h=this.app,i=this._.panel,j=this._.element;if(!i){i=this._.panel=new p.pY(this.app,this.app.document.bH(),{css:[],hx:this._.hx-1,className:h.iy+" cke_contextmenu"},this._.hx),i.onEscape=k.bind(function(){this.onEscape&&this.onEscape(),this.hide()},this),i.onHide=k.bind(function(){this.onHide&&this.onHide()},this);var l=i.qq(this.id);l.oz=!0;var m=l.jQ;m[40]="next",m[9]="next",m[38]="prev",m[a.dy+9]="prev",m[32]="click",m[39]="click",j=this._.element=l.element,j.addClass(h.iy);var n=j.getDocument();n.bH().setStyle("overflow","hidden"),n.eG("html").getItem(0).setStyle("overflow","hidden"),this._.qz=k.addFunction(function(a){var b=this;clearTimeout(b._.jI),b._.jI=k.setTimeout(b._.jK,h.config.ob,b,[a])},this),this._.qm=k.addFunction(function(a){clearTimeout(this._.jI)},this),this._.ql=k.addFunction(function(b){var c=this,d=c.items[b];if(d.bu==a.aY)return void c.hide();d.hQ?c._.jK(b):c.onClick&&c.onClick(d)},this)}b(g);for(var o=['<div class="cke_menu">'],q=g.length,r=q&&g[0].group,s=0;s<q;s++){var t=g[s];r!=t.group&&(o.push('<div class="cke_menuseparator"></div>'),r=t.group),t.er(this,s,o)}o.push("</div>"),j.setHtml(o.join("")),this.parent?this.parent._.panel.rA(i,this.id,c,d,e,f):i.gf(this.id,c,d,e,f),h.oW("menuShow",[i])},hide:function(){this._.panel&&this._.panel.hide()}}})}(),a.iD=k.createClass({$:function(a,b,c){var d=this;k.extend(d,c,{fE:0,className:"cke_button_"+b}),d.group=a._.iA[d.group],d.app=a,d.name=b},ej:{er:function(b,c,d){var e=this,f=b.id+String(c),g=void 0===e.bu?a.aS:e.bu,i=" cke_"+(g==a.eV?"on":g==a.aY?"disabled":"off"),j=e.label;g==a.aY&&(j=e.app.lang.common.unavailable.replace("%1",j)),e.className&&(i+=" "+e.className);var k=e.hQ;d.push('<span class="cke_menuitem"><a id="',f,'" class="',i,'" href="javascript:void(\'',(e.label||"").replace("'",""),'\')" title="',e.label,'" tabindex="-1"_cke_focus=1 hidefocus="true" role="menuitem"'+(k?'aria-haspopup="true"':"")+(g==a.aY?'aria-disabled="true"':"")+(g==a.eV?'aria-pressed="true"':"")),(h.opera||h.gecko&&h.mac)&&d.push(' onkeypress="return false;"'),h.gecko&&d.push(' onblur="this.style.cssText = this.style.cssText;"');var l=-16*(e.rD||0);d.push(' onmouseover="CKFinder.tools.callFunction(',b._.qz,",",c,');" onmouseout="CKFinder.tools.callFunction(',b._.qm,",",c,');" onclick="CKFinder.tools.callFunction(',b._.ql,",",c,'); return false;"><span class="cke_icon_wrapper"><span class="cke_icon"'+(e.icon?' style="background-image:url('+a.getUrl(e.icon)+");background-position:0 "+l+'px;"':"")+'></span></span><span class="cke_label">'),e.hQ&&d.push('<span class="cke_menuarrow"></span>'),d.push(j,"</span></a></span>")}}}),n.ob=400,n.nj="",function(){function a(a){h.opera&&a.setStyle("overflow","hidden"),a.on("touchstart",function(b){var c=b.data.$.touches[0];a.interval&&(window.clearInterval(a.interval),delete a.interval),a.lL=a.$.scrollTop,a.nx=a.$.scrollLeft,a.mP=c.pageY,a.na=c.pageX,a.mO=new Date}),a.on("touchmove",function(c){var d=c.data,e=d.$.touches[0];b(a,e.pageX,e.pageY)&&d.preventDefault()}),a.on("touchend",function(d){var e=d.data,f=e.$.changedTouches[0];if(b(a,f.pageX,f.pageY)){e.preventDefault();var g=(new Date-a.mO)/100,h=f.pageX-a.na,i=f.pageY-a.mP;a.mK=h/g,a.nu=i/g,a.jy=f.pageX,a.mv=f.pageY,a.nf=0,a.interval=window.setInterval(function(){c(a)},100)}})}function b(a,b,c){var d=Math.round(b-a.na),e=Math.round(c-a.mP),f=a.nx-d,g=a.lL-e;return(a.$.scrollLeft!=f||a.$.scrollTop!=g)&&(a.$.scrollLeft=f,a.$.scrollTop=g,Math.abs(d)>Math.abs(e)?a.$.scrollLeft==f:a.$.scrollTop==g)}function c(a){var c=7,d=Math.cos(a.nf/c*Math.PI/2);if(a.jy+=a.mK*d,a.mv+=a.nu*d,a.nf++>c||!b(a,a.jy,a.mv))return window.clearInterval(a.interval),void delete a.interval}o.add("mobile",{bM:["foldertree","filesview"],bz:function(c){var d="ontouchstart"in window;(h.isMobile||d)&&(c.config.showContextMenuArrow=!0,h.isMobile&&c.on("uiReady",function(d){(h.webkit&&h.version<534||h.opera)&&(a(c.layout.pS()),a(c.layout.pn())),c.hs=function(a,b,c,d){var e=window.prompt(b,c);null!==e&&d(e)},c.msgDialog=function(a,b,c){window.alert(b),c&&c()},c.fe=function(a,b,c){window.confirm(b)&&c()}},null,null,20))}})}(),o.add("panel",{eK:function(b){b.bY.kd(a.UI_PANEL,p.panel.dq)}}),a.UI_PANEL=2,p.panel=function(b,c,d){var e=this;c&&k.extend(e,c),k.extend(e,{className:""});var f=a.basePath;k.extend(e.css,[f+"skins/"+d+"/uipanel.css"]),e.id=k.getNextNumber(),e.document=b,e._={iq:{}}},p.panel.dq={create:function(a){return new p.panel(a)}},p.panel.prototype={nt:function(a){var b=[];return this.er(a,b),b.join("")},er:function(a,b){var c=this,d="cke_"+c.id;if(b.push('<div class="',a.iy,' cke_compatibility" lang="',a.langCode,'" role="presentation" style="display:none;z-index:'+(a.config.baseFloatZIndex+1)+'"><div id="',d,'"',' dir="',a.lang.dir,'"',' role="presentation" class="cke_panel cke_',a.lang.dir),c.className&&b.push(" ",c.className),b.push('">'),c.lE||c.css.length){b.push('<iframe id="',d,'_frame" frameborder="0" src="');var e=h.isCustomDomain(),f="document.open();"+(e?'document.domain="'+window.document.domain+'";':"")+"document.close();";b.push(i?"javascript:void(function(){"+encodeURIComponent(f)+"}())":""),b.push('"></iframe>')}return b.push("</div></div>"),d},oU:function(){var a=this._.rE;if(!a){if(this.lE||this.css.length){var b=this.document.getById("cke_"+this.id+"_frame"),c=b.getParent(),d=c.getAttribute("dir"),e=c.getParent().getAttribute("class").split(" ")[0],f=c.getParent().getAttribute("lang"),g=b.getFrameDocument();g.$.open(),h.isCustomDomain()&&(g.$.domain=document.domain);var i=k.addFunction(k.bind(function(a){this.hm=!0,this.onLoad&&this.onLoad()},this)),j=g.getWindow();j.$.CKFinder=CKFinder;var l=h.cssClass.replace(/browser_quirks|browser_iequirks/g,"");g.$.write("<!DOCTYPE HTML PUBLIC '-//W3C//DTD HTML 4.01//EN' 'http://www.w3.org/TR/html4/strict.dtd'><html dir=\""+d+'" class="'+e+'_container" lang="'+f+'"><head><style>.'+e+'_container{visibility:hidden}</style></head><body class="cke_'+d+" cke_panel_frame "+l+' cke_compatibility" style="margin:0;padding:0" onload="var ckfinder = window.CKFinder || window.parent.CKFinder; ckfinder && ckfinder.tools.callFunction('+i+');"></body><link type="text/css" rel=stylesheet href="'+this.css.join('"><link type="text/css" rel="stylesheet" href="')+'"></html>'),g.$.close(),j.$.CKFinder=CKFinder,g.on("keydown",function(a){var b=this,c=a.data.db();if(b._.onKeyDown&&!1===b._.onKeyDown(c))return void a.data.preventDefault();27==c&&b.onEscape&&b.onEscape()},this),a=g.bH()}else a=this.document.getById("cke_"+this.id);this._.rE=a}return a},qq:function(a,b){var c=this;return b=c._.iq[a]=b||new p.panel.block(c.oU()),c._.iL||c.gf(a),b},iv:function(a){return this._.iq[a]},gf:function(a){var b=this,c=b._.iq,d=c[a],e=b._.iL;return e&&e.hide(),b._.iL=d,d._.cQ=-1,b._.onKeyDown=d.onKeyDown&&k.bind(d.onKeyDown,d),d.show(),d}},p.panel.block=k.createClass({$:function(a){var b=this;b.element=a.append(a.getDocument().createElement("div",{attributes:{class:"cke_panel_block",role:"presentation"},gS:{display:"none"}})),b.jQ={},b._.cQ=-1,b.element.hX()},_:{},ej:{show:function(){this.element.setStyle("display","")},hide:function(){var a=this;a.onHide&&!0===a.onHide.call(a)||a.element.setStyle("display","none")},onKeyDown:function(a){var b=this;switch(b.jQ[a]){case"next":for(var f,d=b._.cQ,e=b.element.eG("a");f=e.getItem(++d);)if(f.getAttribute("_cke_focus")&&f.$.offsetWidth){b._.cQ=d,f.focus();break}return!1;case"prev":for(d=b._.cQ,e=b.element.eG("a");d>0&&(f=e.getItem(--d));)if(f.getAttribute("_cke_focus")&&f.$.offsetWidth){b._.cQ=d,f.focus();break}return!1;case"click":return d=b._.cQ,f=d>=0&&b.element.eG("a").getItem(d),f&&(f.$.click?f.$.click():f.$.onclick()),!1}return!0}}}),o.add("resize",{bz:function(b){var c=b.config;c.nB&&b.on("uiReady",function(){function g(a){b.document.bH().addClass("during_sidebar_resize");var d=a.data.$.screenX-e.x,g=f.width+d*("rtl"==b.lang.dir?-1:1);b.nJ(Math.max(c.nN,Math.min(g,c.nC)))}function h(c){b.document.bH().removeClass("during_sidebar_resize"),a.document.removeListener("mousemove",g),a.document.removeListener("mouseup",h),b.document&&(b.document.removeListener("mousemove",g),b.document.removeListener("mouseup",h))}var e,f,d=null;b.layout.dV().on("mousedown",function(c){d||(d=b.layout.dV()),c.data.bK().$==d.$&&(f={width:d.$.offsetWidth||0},e={x:c.data.$.screenX},a.document.on("mousemove",g),a.document.on("mouseup",h),b.document&&(b.document.on("mousemove",g),b.document.on("mouseup",h)))})})}}),n.nN=120,n.nC=500,n.nB=!0,function(){function b(){var b=a.ld.hS("status","status");b.bh("ShowFileInfo",["requestShowFileInfo"],function(d){d.result=this.oW("beforeShowFileInfo",d.data,function(d,e){var f=this;if(!d){var g=e.file;try{var h=g?c(g,f.app.lang):"";f.bn().setHtml(h),f.oW("successShowFileInfo",e)}catch(b){throw f.oW("failedShowFileInfo",e),a.ba(b)}f.oW("afterShowFileInfo",e)}})}),b.bh("ShowFolderInfo",["requestShowFolderInfo"],function(c){c.result=this.oW("beforeShowFolderInfo",c.data,function(e,f){var g=this;if(!e){f.folder;try{var i=d(c.data.ib.data().shownFiles.length,g.app.lang);g.bn().setHtml(i),g.oW("successShowFolderInfo",f)}catch(b){throw g.oW("failedShowFolderInfo",f),a.ba(b)}g.oW("afterShowFolderInfo",f)}})})}function c(a,b){return"<p>"+a.name+" ("+k.formatSize(a.size,b,!0)+", "+a.dateF+")</p>"}function d(a,b){var c;return c=0===a?b.FilesCountEmpty:1==a?b.FilesCountOne:b.FilesCountMany.replace("%1",a),"<p>"+k.htmlEncode(c)+"</p>"}o.add("status",{bM:["filesview"],onLoad:function(){b()},gr:function(c){var d=this;c.on("themeSpace",function(b){"mainBottom"==b.data.space&&(b.data.html+='<div id="status_view" class="view" role="status"></div>')}),c.on("uiReady",function(e){var f=c.document.getById("status_view"),g=c.ld["filesview.filesview"],h=a.ld.bz(c,"status",d,f,{parent:g});g.app==c&&(g.on("successSelectFile",function(b){h.oW("requestShowFileInfo",b.data)}),g.on("successRenderFiles",function(b){var c={folder:b.data.folder,ib:g};h.oW("requestShowFolderInfo",c)})),c.on("afterCommandExecDefered",function(b){if("RemoveFile"==b.data.name){var c={folder:b.data.folder,ib:g};h.oW("requestShowFolderInfo",c)}}),h.on("afterShowFileInfo",function(b){this.bn().getText()||h.oW("requestShowFolderInfo",{ib:g,folder:g.data().folder})})})}})}(),function(){var a=function(){this.fk=[],this.pZ=!1};a.prototype.focus=function(){for(var b,a=0;b=this.fk[a++];)for(var d,c=0;d=b.items[c++];)if(d.focus)return void d.focus()};var b={hW:{iH:{qt:1,source:1},exec:function(a){a.dh&&(a.dh.pZ=!0,i?setTimeout(function(){a.dh.focus()},100):a.dh.focus())}}};o.add("toolbar",{bM:["formpanel"],bz:function(c){var d=function(a,b){switch(b){case"rtl"==c.lang.dir?37:39:for(;(a=a.next||a.toolbar.next&&a.toolbar.next.items[0])&&!a.focus;);return a?a.focus():c.dh.focus(),!1;case"rtl"==c.lang.dir?39:37:for(;(a=a.previous||a.toolbar.previous&&a.toolbar.previous.items[a.toolbar.previous.items.length-1])&&!a.focus;);if(a)a.focus();else{var d=c.dh.fk[c.dh.fk.length-1].items;d[d.length-1].focus()}return!1;case 27:return c.focus(),!1;case 13:case 32:return a.lc(),!1}return!0};c.on("themeSpace",function(b){if("mainTop"==b.data.space){c.dh=new a;var g,e="cke_"+k.getNextNumber(),f=['<div id="toolbar_view" class="view"><div class="cke_toolbox cke_compatibility" role="toolbar" aria-labelledby="',e,'"'];f.push(">"),f.push('<span id="',e,'" class="cke_voice_label">',c.lang.toolbar,"</span>");for(var h=c.dh.fk,i=c.config.toolbar instanceof Array?c.config.toolbar:c.config["toolbar_"+c.config.toolbar],j=0;j<i.length;j++){var l=i[j];if(l){var m="cke_"+k.getNextNumber(),n={id:m,items:[]};if(g&&(f.push("</div>"),g=0),"/"!==l){f.push('<span id="',m,'" class="cke_toolbar" role="presentation"><span class="cke_toolbar_start"></span>');var o=h.push(n)-1;o>0&&(n.previous=h[o-1],n.previous.next=n);for(var q=0;q<l.length;q++){var r,s=l[q];if(r="-"==s?p.separator:c.bY.create(s)){r.canGroup?g||(f.push('<span class="cke_toolgroup">'),g=1):g&&(f.push("</span>"),g=0);var t=r.er(c,f);o=n.items.push(t)-1,o>0&&(t.previous=n.items[o-1],t.previous.next=t),t.toolbar=n,t.onkey=d}}g&&(f.push("</span>"),g=0),f.push('<span class="cke_toolbar_end"></span></span>')}else f.push('<div class="cke_break"></div>')}}c.search&&c.search.er(c,f),f.push("</div></div>"),b.data.html+=f.join("")}}),c.bD("hW",b.hW)}})}(),p.separator={er:function(a,b){return b.push('<span class="cke_separator"></span>'),{}}},n.toolbar_Basic=[["Upload","Refresh"]],n.toolbar_Full=[["Upload","Refresh","Settings","Maximize","Help"]],n.toolbar="Full",function(){o.add("tools",{eK:function(b){this.app=b},addTool:function(a,b){var c="tool_"+k.getNextNumber();return a=b?'<div id="'+c+'" class="view tool_panel" tabindex="0" style="display: none;">'+a+"</div>":'<div id="'+c+'" class="tool" style="display: none;">'+a+"</div>",this.app.layout.dV().getChild(0).appendHtml(a),c},addToolPanel:function(a){a=a||"";var b=this.addTool(a,1),c=this.app.layout.dV().getChild(0).dB();return k.mH(c),b},hideTool:function(a){this.app.document.getById(a).setStyle("display","none"),this.app.layout.ea(!0)},showTool:function(a){this.app.document.getById(a).removeStyle("display"),this.app.layout.ea(!0)},removeTool:function(a){this.hideTool(a),this.app.document.getById(a).remove()}})}(),function(){function b(){function c(){return a.bF.length>0&&-1!="RMRHY5Q4S,GGYXTSBLA,QS8F4ZFUJ".indexOf(a.bF.substr(0,9))}function d(b,c){var d=this,f=(d.data(),1),g=this.tools.qO(),h=g&&g.$.value;if(!h.length)return b.data.preventDefault(!0),this.oW("failedUploadFileForm"),this.oW("afterUploadFileForm"),!1;var i=h.match(/\.([^\.]+)\s*$/)[1];if(i&&c.getResourceType().isExtensionAllowed(i)?f=0:(b.data.preventDefault(),d.app.msgDialog("",d.app.lang.UploadExtIncorrect)),f)return b.data.preventDefault(!0),this.oW("failedUploadFileForm"),this.oW("afterUploadFileForm"),!1;var j=d.app.document.getWindow().$;return j.OnUploadCompleted=function(a,b){var e={step:3,filename:a,folder:c};if(b&&!a){d.app.msgDialog("",b);var f=d.tools.qB();f.setStyle("display","none"),f.getChild(1).setText(""),f.getChild(2).setText(""),d.oW("failedUploadFileForm",e)}else b&&d.app.msgDialog("",b),d.app.aV==c&&d.app.oW("requestShowFolderFiles",{folder:c,mw:a}),d.oW("requestUnloadForm"),d.oW("successUploadFileForm",e);d.oW("afterUploadFileForm",e);try{delete j.OnUploadCompleted}catch(a){j.OnUploadCompleted=void 0}},a.log("[UPLOADFORM] Starting IFRAME file upload."),this.oW("successUploadFileForm",{step:2}),!0}function e(a,b,c){return'<form enctype="multipart/form-data" id="upload_form" role="region" action="'+c+'" method="POST" target="'+b+'"><h2 role="heading">'+a.lang.UploadTitle+'</h2><p><input type="file" name="upload" /></p><div class="buttons_wrapper"><div class="buttons"><input type="submit" value="'+a.lang.UploadBtn+'" /><input type="button" name="cancel" value="'+a.lang.UploadBtnCancel+'" /></div></div></form>'}var b=a.ld.bX["formpanel.formpanel"];b&&(b.bh("UploadFileForm",["requestUploadFileForm"],function(f){var g=this.app.aV,h=this;this.oW("beforeUploadFileForm",{folder:g,step:1},function(f,g){if(!f&&!c()){var i=this.data(),j=g.folder,l=0;if(j||(this.app.msgDialog("",this.app.lang.UploadNoFolder),l=1),l||j.acl.fileUpload||(this.app.msgDialog("",this.app.lang.UploadNoPerms),l=1),l)return this.oW("failedUploadFileForm"),void this.oW("afterUploadFileForm");this.oW("beforeUploadFileForm",{folder:j,step:2},function(c,f){function o(a){if(a.data.folder&&a.data.folder.acl.fileUpload){var b=h.tools.qO();h.oW("requestUnloadForm"),h.oW("requestUploadFileForm",function(){var c=h.tools.qO();b.kB(c),c.remove(),delete h.tools.jj})}}try{if("upload"==i.dc)this.oW("requestUnloadForm",function(){this.app.cS("upload").bR(a.aS),this.oW("successUploadFileForm",f),this.oW("afterUploadFileForm",f)});else{i.dc&&this.oW("requestUnloadForm");var g=this.tools.qL(),l=this.app.connector.composeUrl("FileUpload",{},j.type,j),m=e(this.app,g.$.id,l),n=this;this.oW("requestLoadForm",{html:m,dq:k.bind(function(a){return d.call(n,a,j)}),cC:["submit"],cancelSubmit:0,gM:0,command:"upload"},function(){this.eh.addClass("show_border"),f.step=1,this.oW("successUploadFileForm",f)});var p=this.app.ld["filesview.filesview"];p.on("successShowFolderFiles",o),this.on("requestUnloadForm",function(b){b.removeListener(),p.removeListener("successShowFolderFiles",o)})}}catch(b){throw this.oW("failedUploadFileForm",f),this.oW("afterUploadFileForm",f),a.ba(b)}})}})}),b.tools.releaseDomNodes=k.override(b.tools.releaseDomNodes,function(a){return function(){var b=this;a.apply(b,arguments),delete b.jj,delete b.jc,void 0!==b.gq&&(b.gq.remove(),delete b.gq)}}),b.tools.qB=function(){var a=this;return void 0===a.jc&&(a.jc=a.ib.bn().getChild([0,2])),a.jc},b.tools.qO=function(){var a=this;return void 0===a.jj&&(a.jj=a.ib.bn().getChild([0,1,0])),a.jj},b.tools.qL=function(){var a=this;if(void 0===a.gq){var b=h.isCustomDomain(),c="ckf_"+k.getNextNumber(),d='<iframe id="'+c+'" name="'+c+'" style="display:none" frameBorder="0"'+(b?" src=\"javascript:void((function(){document.open();document.domain='"+document.domain+"';document.close();})())\"":"")+' tabIndex="-1" allowTransparency="true"></iframe>',e=a.ib.app.document.bH();e.appendHtml(d),a.gq=e.dB()}return a.gq})}o.add("uploadform",{bM:["formpanel","button"],readOnly:!1,md:function(){if(!h.webkit)return!0;var a=document.createElement("input");return a.setAttribute("type","file"),!1===a.disabled},onLoad:function(){this.md()&&b()},gr:function(c){this.md()&&(c.bD("upload",{exec:function(b){b.oW("requestUploadFileForm",null,function(){var c=b.ld["formpanel.formpanel"].tools.formNode(),d=b.cg.inPopup&&i&&h.version>8;d&&c&&c.submit(),b.cS("upload").bu==a.eV&&setTimeout(function(){if(c){var a=c.eG("input").getItem(0);d||a.on("change",function(){if(a.getValue())for(var b=0;b<c.$.elements.length;b++){var d=c.$.elements[b];"INPUT"==d.nodeName&&"submit"==d.type&&d.click()}}),a.$.click?a.$.click():a.focus()}},0)})}}),c.bY.add("Upload",a.UI_BUTTON,{label:c.lang.Upload,command:"upload"}),c.on("appReady",function(b){c.ld["filesview.filesview"].on("successShowFolderFiles",function(d){var e=this.tools.currentFolder(),f=this.app.cS("upload");if(e&&e.acl.fileUpload)f.bu==a.aY&&f.bR(a.aS);else{var g=c.ld["formpanel.formpanel"];"upload"==g.data().dc&&g.oW("requestUnloadForm"),f.bR(a.aY)}})}))}})}(),function(){function a(a,b){function C(){if(!v){try{var a=k.getElementsByTagName("body")[0].appendChild(S("span"));a.parentNode.removeChild(a)}catch(a){return}v=!0;for(var b=n.length,c=0;c<b;c++)n[c]()}}function D(a){v?a():n[n.length]=a}function E(a){if(typeof j.addEventListener!=c)j.addEventListener("load",a,!1);else if(typeof k.addEventListener!=c)k.addEventListener("load",a,!1);else if(typeof j.attachEvent!=c)T(j,"onload",a);else if("function"==typeof j.onload){var b=j.onload;j.onload=function(){b(),a()}}else j.onload=a}function F(){m?G():H()}function G(){var a=k.getElementsByTagName("body")[0],b=S(d);b.setAttribute("type",g);var e=a.appendChild(b);if(e){var f=0;!function(){var d;try{d=typeof e.GetVariable!=c}catch(a){d=!1}if(d){var g=e.GetVariable("$version");g&&(g=g.split(" ")[1].split(","),A.pv=[parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10)])}else if(f<10)return f++,void setTimeout(arguments.callee,10);a.removeChild(b),e=null,H()}()}else H()}function H(){var a=o.length;if(a>0)for(var b=0;b<a;b++){var d=o[b].id,e=o[b].callbackFn,f={success:!1,id:d};if(A.pv[0]>0){var g=R(d);if(g)if(!U(o[b].swfVersion)||A.wk&&A.wk<312)if(o[b].ln&&J()){var h={};h.data=o[b].ln,h.width=g.getAttribute("width")||"0",h.height=g.getAttribute("height")||"0",g.getAttribute("class")&&(h.styleclass=g.getAttribute("class")),g.getAttribute("align")&&(h.align=g.getAttribute("align"));for(var i={},j=g.getElementsByTagName("param"),k=j.length,l=0;l<k;l++)"movie"!=j[l].getAttribute("name").toLowerCase()&&(i[j[l].getAttribute("name")]=j[l].getAttribute("value"));K(h,i,d,e)}else L(g),e&&e(f);else W(d,!0),e&&(f.success=!0,f.ref=I(d),e(f))}else if(W(d,!0),e){var m=I(d);m&&typeof m.SetVariable!=c&&(f.success=!0,f.ref=m),e(f)}}}function I(a){var b=null,e=R(a);if(e&&"OBJECT"==e.nodeName)if(typeof e.SetVariable!=c)b=e;else{var f=e.getElementsByTagName(d)[0];f&&(b=f)}return b}function J(){return!w&&U("6.0.65")&&(A.win||A.mac)&&!(A.wk&&A.wk<312)}function K(a,b,d,e){w=!0,t=e||null,u={success:!1,id:d};var f=R(d);if(f){"OBJECT"==f.nodeName?(r=M(f),s=null):(r=f,s=d),a.id=h,(typeof a.width==c||!/%$/.test(a.width)&&parseInt(a.width,10)<310)&&(a.width="310"),(typeof a.height==c||!/%$/.test(a.height)&&parseInt(a.height,10)<137)&&(a.height="137"),k.title=k.title.slice(0,47)+" - Flash Player Installation";var g=A.ie&&A.win?"ActiveX":"PlugIn",i="MMredirectURL="+j.location.toString().replace(/&/g,"%26")+"&MMplayerType="+g+"&MMdoctitle="+k.title;if(typeof b.flashvars!=c?b.flashvars+="&"+i:b.flashvars=i,A.ie&&A.win&&4!=f.readyState){var l=S("div");d+="SWFObjectNew",l.setAttribute("id",d),f.parentNode.insertBefore(l,f),f.style.display="none",function(){4==f.readyState?f.parentNode.removeChild(f):setTimeout(arguments.callee,10)}()}N(a,b,d)}}function L(a){if(A.ie&&A.win&&4!=a.readyState){var b=S("div");a.parentNode.insertBefore(b,a),b.parentNode.replaceChild(M(a),b),a.style.display="none",function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)}()}else a.parentNode.replaceChild(M(a),a)}function M(a){var b=S("div");if(A.win&&A.ie)b.innerHTML=a.innerHTML;else{var c=a.getElementsByTagName(d)[0];if(c){var e=c.childNodes;if(e)for(var f=e.length,g=0;g<f;g++)1==e[g].nodeType&&"PARAM"==e[g].nodeName||8==e[g].nodeType||b.appendChild(e[g].cloneNode(!0))}}return b}function N(a,b,e){var f,h=R(e);if(A.wk&&A.wk<312)return f;if(h)if(typeof a.id==c&&(a.id=e),A.ie&&A.win){var i="";for(var j in a)a[j]!=Object.prototype[j]&&("data"==j.toLowerCase()?b.movie=a[j]:"styleclass"==j.toLowerCase()?i+=' class="'+a[j]+'"':"classid"!=j.toLowerCase()&&(i+=" "+j+'="'+a[j]+'"'));var k="";for(var l in b)b[l]!=Object.prototype[l]&&(k+='<param name="'+l+'" value="'+b[l]+'" />');h.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+i+">"+k+"</object>",p[p.length]=a.id,f=R(a.id)}else{var m=S(d);m.setAttribute("type",g);for(var n in a)a[n]!=Object.prototype[n]&&("styleclass"==n.toLowerCase()?m.setAttribute("class",a[n]):"classid"!=n.toLowerCase()&&m.setAttribute(n,a[n]));for(var o in b)b[o]!=Object.prototype[o]&&"movie"!=o.toLowerCase()&&O(m,o,b[o]);h.parentNode.replaceChild(m,h),f=m}return f}function O(a,b,c){var d=S("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)}function P(a){var b=R(a);b&&"OBJECT"==b.nodeName&&(A.ie&&A.win?(b.style.display="none",function(){4==b.readyState?Q(a):setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function Q(a){var b=R(a);if(b){for(var c in b)"function"==typeof b[c]&&(b[c]=null);b.parentNode.removeChild(b)}}function R(a){var b=null;try{b=k.getElementById(a)}catch(a){}return b}function S(a){return k.createElement(a)}function T(a,b,c){a.attachEvent(b,c),q[q.length]=[a,b,c]}function U(a){var b=A.pv,c=a.split(".");return c[0]=parseInt(c[0],10),c[1]=parseInt(c[1],10)||0,c[2]=parseInt(c[2],10)||0,b[0]>c[0]||b[0]==c[0]&&b[1]>c[1]||b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]}function V(a,b,e,f){if(!A.ie||!A.mac){var g=k.getElementsByTagName("head")[0];if(g){var h=e&&"string"==typeof e?e:"screen";if(f&&(x=null,y=null),!x||y!=h){var i=S("style");i.setAttribute("type","text/css"),i.setAttribute("media",h),x=g.appendChild(i),A.ie&&A.win&&typeof k.styleSheets!=c&&k.styleSheets.length>0&&(x=k.styleSheets[k.styleSheets.length-1]),y=h}A.ie&&A.win?x&&typeof x.addRule==d&&x.addRule(a,b):x&&typeof k.createTextNode!=c&&x.appendChild(k.createTextNode(a+" {"+b+"}"))}}}function W(a,b){if(z){var c=b?"visible":"hidden";v&&R(a)?R(a).style.visibility=c:V("#"+a,"visibility:"+c)}}function X(a){return null!=/[\\\"<>\.;]/.exec(a)&&typeof encodeURIComponent!=c?encodeURIComponent(a):a}var r,s,t,u,x,y,c="undefined",d="object",e="Shockwave Flash",f="ShockwaveFlash.ShockwaveFlash",g="application/x-shockwave-flash",h="SWFObjectExprInst",i="onreadystatechange",j=a,k=b,l=navigator,m=!1,n=[F],o=[],p=[],q=[],v=!1,w=!1,z=!0,A=function(){var a=typeof k.getElementById!=c&&typeof k.getElementsByTagName!=c&&typeof k.createElement!=c,b=l.userAgent.toLowerCase(),h=l.platform.toLowerCase(),i=/win/.test(h?h:b),n=/mac/.test(h?h:b),o=!!/webkit/.test(b)&&parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),p=!1,q=[0,0,0],r=null;if(typeof l.plugins!=c&&typeof l.plugins[e]==d)!(r=l.plugins[e].description)||typeof l.mimeTypes!=c&&l.mimeTypes[g]&&!l.mimeTypes[g].enabledPlugin||(m=!0,p=!1,r=r.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),q[0]=parseInt(r.replace(/^(.*)\..*$/,"$1"),10),q[1]=parseInt(r.replace(/^.*\.(.*)\s.*$/,"$1"),10),q[2]=/[a-zA-Z]/.test(r)?parseInt(r.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof j.ActiveXObject!=c)try{var s=new ActiveXObject(f);s&&(r=s.GetVariable("$version"))&&(p=!0,r=r.split(" ")[1].split(","),q=[parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10)])}catch(a){}return{w3:a,pv:q,wk:o,ie:p,win:i,mac:n}}();!function(){A.w3&&((typeof k.readyState!=c&&"complete"==k.readyState||typeof k.readyState==c&&(k.getElementsByTagName("body")[0]||k.body))&&C(),v||(typeof k.addEventListener!=c&&k.addEventListener("DOMContentLoaded",C,!1),A.ie&&A.win&&(k.attachEvent(i,function(){"complete"==k.readyState&&(k.detachEvent(i,arguments.callee),C())}),j==top&&function(){if(!v){try{k.documentElement.doScroll("left")}catch(a){return void setTimeout(arguments.callee,0)}C()}}()),A.wk&&function(){if(!v)/loaded|complete/.test(k.readyState)?C():setTimeout(arguments.callee,0)}(),E(C)))}();setTimeout(function(){C()},100);!function(){A.ie&&A.win&&a.attachEvent("onunload",function(){for(var a=q.length,b=0;b<a;b++)q[b][0].detachEvent(q[b][1],q[b][2]);for(var c=p.length,d=0;d<c;d++)P(p[d]);for(var e in A)A[e]=null;if(A=null,"undefined"!=typeof swfobject){for(var f in swfobject)swfobject[f]=null;swfobject=null}})}();return{gH:function(a,b,c,d){if(A.w3&&a&&b){var e={};e.id=a,e.swfVersion=b,e.ln=c,e.callbackFn=d,o[o.length]=e,W(a,!1)}else d&&d({success:!1,id:a})},lp:function(a){if(A.w3)return I(a)},embedSWF:function(a,b,e,f,g,h,i,j,k,l){var m={success:!1,id:b};A.w3&&!(A.wk&&A.wk<312)&&a&&b&&e&&f&&g?(W(b,!1),D(function(){e+="",f+="";var n={};if(k&&typeof k===d)for(var o in k)n[o]=k[o];n.data=a,n.width=e,n.height=f;var p={};if(j&&typeof j===d)for(var q in j)p[q]=j[q];if(i&&typeof i===d)for(var r in i)typeof p.flashvars!=c?p.flashvars+="&"+r+"="+i[r]:p.flashvars=r+"="+i[r];if(U(g)){var s=N(n,p,b);n.id==b&&W(b,!0),m.success=!0,m.ref=s}else{if(h&&J())return n.data=h,void K(n,p,b,l);W(b,!0)}l&&l(m)})):l&&l(m)},switchOffAutoHideShow:function(){z=!1},ua:A,kL:function(){return{major:A.pv[0],minor:A.pv[1],release:A.pv[2]}},kf:U,iV:function(a,b,c){return A.w3?N(a,b,c):void 0},jS:function(a,b,c,d){A.w3&&J()&&K(a,b,c,d)},jv:function(a){A.w3&&P(a)},ik:function(a,b,c,d){A.w3&&V(a,b,c,d)},cz:D,jC:E,kY:function(a){var b=k.location.search||k.location.hash;if(b){if(/\?/.test(b)&&(b=b.split("?")[1]),null==a)return X(b);for(var c=b.split("&"),d=0;d<c.length;d++)if(c[d].substring(0,c[d].indexOf("="))==a)return X(c[d].substring(c[d].indexOf("=")+1))}return""},lq:function(){if(w){var a=R(h);a&&r&&(a.parentNode.replaceChild(r,a),s&&(W(s,!0),A.ie&&A.win&&(r.style.display="block")),t&&t(u)),w=!1}}}}CKFinder.addPlugin("flashupload",{readOnly:!1,appReady:function(b){if("asp"!=b.config.connectorLanguage||CKFinder.env.ie){var c=b.document,d=c.defaultView||c.parentWindow;a(d,c).kf("10.2.0")&&setTimeout(function(){b.replaceUploadForm('<iframe src="'+CKFinder.getPluginPath("flashupload")+'Uploader.html" style="width: 100%; height: 98%;" frameBorder="0"></iframe>',function(){b.resizeFormPanel(100),d.api=b,d.create_swfobject=a,d.sessionIdentifiers={CFID:"CFID",CFTOKEN:"CFTOKEN",JSESSIONID:"jsessionid"},CKFinder.env.ie||d.flash_cookies||b.connector.sendCommandPost("LoadCookies",null,null,function(a){if(a.checkError())return!1;var b=a.selectSingleNode("Connector/Cookies");if(b){var c=b.attributes.getNamedItem("sessionCookieName"),e=b.attributes.getNamedItem("sessionParameterName");c&&c.value&&e&&e.value&&(d.sessionIdentifiers[c.value]=e.value)}var f=a.selectNodes("Connector/Cookies/Cookie");if(f&&f.length){d.flash_cookies={};for(var g=0;g<f.length;g++){var h=f[g].attributes.getNamedItem("value").value,i=f[g].attributes.getNamedItem("name").value;d.flash_cookies[i]=h}}})},!1,12)},100)}}})}(),function(){"use strict";function Z(a,b){if(E()&&!b.config.readOnly){var c=new f(b),d=new w(b),e=new x(b,d),g=new l(a,b,d,e),i=new h(a,b,d,e,g),j=new s(a,b,d,e,g),k=new u(b,d,e);g.tS(window,Q,R,S,T,U),e.tJ(b.config.maxSimultaneousUploads),e.uI=function(a){g.ux=a},k.ns(j),d.ns(k),e.ns(c),e.ns(k),e.ns(d),G(a,b,"filesview.filesview",function(b,c,f){H(a,b,i,g,d,e,k,f)}),G(a,b,"formpanel.formpanel",function(b,c,f){I(a,b,i,g,d,e,k,f)}),setInterval(function(){e.sX()&&e.tx()},1e3)}}var f,g,h,i,j,l,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,D,E,F,G,H,I,J,K,L,M,N,b=/\.([^\.]+)\s*$/,c=/^(jpg|jpeg|gif|png|bmp)$/i,d=/\|/,e=/(\{\{([a-z_]+)\}\})/g,C=function(){return(new Date).getTime()},O=500,P=!1,Q="ckf_plugin_html5upload_"+C(),R=Q+"_fallbackAsyncArrayTraverse",S=Q+"_fallbackShouldFallback",T=Q+"_fallbackOnFileBlobReady",U=Q+"_fallbackOnXMLHttpRequestReady",V="CKFinder._['"+Q+"']['{{application_name}}']",W="var _files = ((('undefined' === typeof files) ? (this.files || (event.dataTransfer && event.dataTransfer.files)) : files) || []);setTimeout(function () {"+V+"['"+R+"'](_files, function (file, index, files) {var formData = new FormData(),uploadBlob,xhr = new XMLHttpRequest();if (file && "+V+"['"+S+"']()) {formData.append('upload', file);uploadBlob = "+V+"['"+T+"'](file, formData);"+V+"['"+U+"'](file, uploadBlob, xhr, xhr.send.bind(xhr, formData), xhr.abort.bind(xhr));} else {return false;}});}, "+O+");",X='<div id="ckf_upload_form" ondrop="'+W+'"><div class="ckf_upload_info" id="ckf_globalUploads"><div class="ckf_progress_wrapper"><div class="ckf_progress_info"><span></span><span></span><div class="ckf_progress_bar_container"><div></div></div><span class="ckf_status"></span><span class="ckf_speed"></span></div></div><div class="ckf_uploadButtons"><input type="file" {{input_multiple}} id="ckf_fileInput" onchange="'+W+'"><a class="cke_dialog_ui_button" href="javascript:void(0);"><span class="cke_dialog_ui_button" id="ckf_addFiles">{{lang_upload_add_files}}</span></a><br><a class="cke_dialog_ui_button cke_dialog_ui_button_ok" href="javascript:void(0);" id="ckf_cancelUpload"><span class="cke_dialog_ui_button">{{lang_close_button}}</span></a></div></div></div>';B=Object.hasOwnProperty("create")?Object.create:function(a){return P=!0,a},A=function(a,b,c){var g,d=10,f=0;c||(c=null),b=b.bind(c),(g=function(){for(var c,h=0,i=C();;){if(!(c=a.item?a.item(f):a[f])||!1===b(c,f,a))return;if(f+=1,(h+=1)>=10&&C()-i>d)return setTimeout(g,d)}})()},D=function(a){return function(b){var c;for(c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}},i=function(){this.uU=[]},i.prototype.mD=function(a){var b=this;if(!(a instanceof i))throw new Error("Invalid argument: expected EventDispatcher.");a.sy().forEach(function(a){b.ns(a)})},i.mixin=D(i.prototype),i.prototype.ns=function(a){if(!(a instanceof j))throw new Error("Invalid argument: expected EventSubscriber.");if(this.sL(a))throw new Error("Logic error: same EventSubscriber is added twice to the EventDispatcher");this.uU.push(a)},i.prototype.dispatch=function(a,b){this.uU.forEach(function(c){var d=c.tc();d.hasOwnProperty(a)&&c[d[a]].apply(c,b)})},i.prototype.sy=function(a){return a?this.uU.filter(function(b){return b.sV(a)}):this.uU.slice(0)},i.prototype.sL=function(a){return-1!==this.uU.indexOf(a)},i.prototype.removeSubscriber=function(a){var b=this.uU.indexOf(a);if(!(a instanceof j))throw new Error("Invalid argument: expected EventSubscriber.");if(-1===b)throw new Error("Logic error: this EventSubscriber is not registered");this.uU.splice(b,1)},j=function(){},j.prototype.sV=function(a){return this.tc().hasOwnProperty(a)},j.prototype.tc=function(){throw new Error("This method needs to be overriden in child class.")},f=function(){j.call(this)},f.prototype=B(j.prototype),f.prototype.tc=function(){var a={};return a[x.qM]="tF",a},f.prototype.tF=function(a,b){var c=b.targetFolder,d=a.connector.composeUrl("FileUpload",{response_type:"txt"},c.type,c);b.bT.open("POST",d)},o=function(a,b,c,d){var e=this;j.call(e),e.ckFinder=a,e.application=b,e.ty=c,e.ub=d},o.prototype=B(j.prototype),r=function(a){this.tw(a)},r.mixin=D(r.prototype),r.prototype.tj=function(){if(!this.so)throw new Error("Form panel widget is not set.");return this.so},r.prototype.sX=function(){return!!this.so},r.prototype.uV=function(a){},r.prototype.tC=function(){},r.prototype.tw=function(a){var b=this;!b.so&&a?b.uV(a):b.so&&a?(b.tC(),b.uV(a)):b.so&&!a&&b.tC(),b.so=a},h=function(a,b,c,d){o.call(this,a,b,c,d),r.call(this)},h.prototype=B(o.prototype),h.prototype=r.mixin(h.prototype),h.prototype.mE=function(a){var b=this,c=a.layout.pn(),d=c.getDocument(),e=b.sS.bind(b),f=b.ss.bind(b),g=b.rs.bind(b);d.on("drop",g),d.on("dragover",f),c.on("dragover",e),b.domElementListeners||(b.domElementListeners=[]),b.domElementListeners.push({evt:"drop",fO:g,bi:d},{evt:"dragover",fO:f,bi:d},{evt:"dragover",fO:e,bi:c})},h.prototype.ss=function(a){var b=a.data,c=b.$.dataTransfer;if(c){c.dropEffect="none";try{c.effectAllowed="none"}catch(a){}this.ckFinder.env.webkit&&b.preventDefault()}},h.prototype.rs=function(a){var b=a.data.$.dataTransfer;b&&b.files&&b.files.length>0&&(this.ub.uG(b.files),a.data.preventDefault())},h.prototype.uV=function(a){var b=this,c=a.bn().getDocument(),d=b.sS.bind(b),e=c.getById("ckf_upload_form");b.domElementListeners||(b.domElementListeners=[]),b.domElementListeners.length>0&&b.tC(),b.mE(b.application),e.on("dragover",d),b.domElementListeners.push({evt:"dragover",fO:d,bi:e})},h.prototype.sS=function(a){var b=a.data,c=b.$.dataTransfer;c&&(c.files&&c.files.length||c.types&&(c.types.contains&&c.types.contains("Files")||c.types.indexOf&&-1!==c.types.indexOf("Files"))?(c.dropEffect="copy",b.stopPropagation()):c.dropEffect="none",b.preventDefault())},h.prototype.tC=function(){var a,b;for(a=0;a<this.domElementListeners.length;a+=1)b=this.domElementListeners[a],b.bi.removeListener(b.evt,b.fO);delete this.domElementListeners},l=function(a,b,c,d){o.call(this,a,b,c,d),this.pJ={},this.ux=!0},l.prototype=B(o.prototype),l.prototype.lT=function(a){var c,d,b=this;for(c in b.pJ)if(b.pJ.hasOwnProperty(c))for(d=0;d<a.length;d+=1)a[d]===b.pJ[c]&&delete b.pJ[c]},l.prototype.ti=function(a,b){if(this.ux)return new t(a,new q(b))},l.prototype.uK=function(a,b,c,d,e){var f=this;if(f.ux){var h;if(!f.ub.sX())return void e();h=new g(f.application,f.application.aV,b,d,e),h.ns(f.ty),h.nv(c),b.ns(h),f.ub.expectedFiles-=1,f.ub.tL(f.application,h)}},l.prototype.tS=function(a,b,c,d,e,f){var g=this,h={};h[c]=A,h[d]=g.shouldFallback.bind(g),h[e]=g.ti.bind(g),h[f]=g.uK.bind(g),a.CKFinder.hasOwnProperty("_")||(a.CKFinder._={}),a.CKFinder._.hasOwnProperty(b)||(a.CKFinder._[b]={}),a.CKFinder._[b][g.application.name]=h},l.prototype.shouldFallback=function(){return!this.ub.shouldStopProcessing&&this.ux},n=function(){i.call(this)},n.prototype=B(i.prototype),n.qQ="xhr.header",n.prototype.tn=function(a,b){throw new Error("This method needs to be overriden in child class.")},p=function(a){n.call(this),this.file=a},p.prototype=B(n.prototype),p.prototype.tn=function(a,b){var c=new FormData;c.append("upload",this.file),b(c)},q=function(a){n.call(this),this.formData=a},q.prototype=B(n.prototype),q.prototype.tn=function(a,b){b(this.formData)},s=function(a,b,c,d,e){o.call(this,a,b,c,d),this.qJ=e},s.prototype=B(o.prototype),s.prototype.tc=function(){var a={};return a[u.qN]="onFileInputChange",a},s.prototype.onFileInputChange=function(a,b){this.ub.uG(b)&&this.qJ.lT(b)},t=function(a,b){this.sz=b,this.file=a},t.prototype=B(i.prototype),t.prototype.mD=function(a){return this.sz.mD(a)},t.prototype.ns=function(a){return this.sz.ns(a)},t.prototype.dispatch=function(a,b){return this.sz.dispatch(a,b)},t.prototype.bZ=function(){return this.file},t.prototype.wv=function(){var a="",c=this.getFileName();return b.test(c)?(a=c.match(b),a[1].toLowerCase()):a},t.prototype.getFileName=function(){return this.file.name},t.prototype.getFileSize=function(){return this.file.size},t.prototype.sy=function(a){return this.sz.sy(a)},t.prototype.tn=function(a){this.sz.tn(this.file,a)},v=function(){},v.prototype=B(j.prototype),v.pH="abort",v.rj="error",v.qk="load",v.rc="progress",v.prototype.tc=function(){var a={};return a[v.pH]="onAbort",a[v.rj]="onError",a[v.qk]="onLoad",a[v.rc]="onProgress",a},v.prototype.onAbort=function(a){},v.prototype.onError=function(a,b){},v.prototype.onLoad=function(a){},v.prototype.onProgress=function(a,b,c,d){},w=function(a){var b=this;i.call(b),v.call(b),b.application=a,b.tM=[]},w.prototype=B(v.prototype),w.prototype=i.mixin(w.prototype),w.prototype.mC=function(){var a=this.tM.concat();this.tM=[],A(a,function(a){a&&a.sY()&&a.lN()})},w.prototype.mU=function(a){this.tM.push(a)},w.prototype.nU=function(a){var b=this.tM.indexOf(a);if(-1===b)throw new Error("Given upload supervisor is not attached.");this.tM.splice(b,1)},w.prototype.tc=function(){var a=v.prototype.tc.call(this);return a[y.pN]="uc",a[x.qM]="tF",a},w.prototype.sj=function(a){var b;for(b=0;b<this.tM.length;b+=1)if(a===this.tM[b].uploadBlob.bZ())return!0;return!1},w.prototype.sB=function(a){return this.tM.indexOf(a)>=0},w.prototype.tF=function(a,b){this.mU(b)},w.prototype.uc=function(a){this.sB(a)&&this.nU(a)},u=function(a,b,c){var d=this;i.call(d),r.call(d),v.call(d),d.application=a,d.attachedUploadViewsNumber=0,d.wU=[],d.sa=0,d.sO=0,d.tI=0,d.totalFiles=0,d.ty=b,d.ub=c,d.tM=[]},u.prototype=B(v.prototype),u.prototype=i.mixin(u.prototype),u.prototype=r.mixin(u.prototype),u.prototype.mU=w.prototype.mU,u.prototype.nU=w.prototype.nU,u.prototype.sB=w.prototype.sB,u.prototype.tC=h.prototype.tC,u.qN="event.file.input.change",u.ue=300,u.prototype.mC=function(){var b,a=this;for(b=0;b<a.tM.length;b+=1)a.tM[b].removeSubscriber(a);a.ty.mC(),a.ub.or(),a.attachedUploadViewsNumber=0,a.tM=[],a.ud(a.application),a.ma(),a.remove()},u.prototype.tc=function(){var a={};return a[x.qM]="tF",a[y.pN]="uc",a[z.EVENT_DOM_ATTACHED]="onUploadViewDomAttached",a[z.EVENT_DOM_REMOVED]="onUploadViewDomRemoved",a[z.pM]="onFolderRefreshRequest",a},u.prototype.onFileInputChange=function(a){var b=a.jN.$,c=b.files;c.length<1||this.dispatch(u.qN,[b,c])},u.prototype.onFolderRefreshRequest=function(a,b){this.wU.push({folder:a,mw:b})},u.prototype.uV=function(a){var h,b=this,c=a.bn().getDocument(),d=c.getById("ckf_addFiles"),e=c.getById("ckf_cancelUpload"),f=c.getById("ckf_fileInput"),g=c.getById("ckf_globalUploads"),i=b.mC.bind(b),j=b.onFileInputChange.bind(b);g=g.getChild([0,0]),b.domElement={addFilesButton:d,cancelButton:e,countSpan:g.getChild(0),fileInput:f,ni:g.getChild([2,0]),np:g.getChild(4),mz:g.getChild(3),totalSizeSpan:g.getChild(1)},h=b.onDomElementAddFilesClickListener.bind(b),d.on("click",h),e.on("click",i),f.on("change",j),b.domElementListeners||(b.domElementListeners=[]),b.domElementListeners.push({evt:"click",fO:h,bi:d},{evt:"click",fO:i,bi:e},{evt:"change",fO:j,bi:f}),b.shouldBeClickedAutomatically&&(b.shouldBeClickedAutomatically=!1,h())},u.prototype.onDomElementAddFilesClickListener=function(a){this.domElement.fileInput.$.click()},u.prototype.onUploadPanelUploadStartClick=function(a,b,c){this.shouldBeClickedAutomatically=!0,c(a)},u.prototype.uH=function(a){this.domElement.cancelButton.getFirst().setHtml(a.lang.UploadBtnCancel)},u.prototype.ud=function(a){var b=this;b.domElement.cancelButton.getFirst().setHtml(a.lang.CloseBtn),b.sa=0,b.sO=0,b.tI=0,b.totalFiles=0},u.prototype.onUploadViewDomAttached=function(a){this.attachedUploadViewsNumber+=1},u.prototype.onUploadViewDomRemoved=function(a){var b=this;b.attachedUploadViewsNumber-=1,b.ub.expectedFiles<1&&b.attachedUploadViewsNumber<1&&(b.attachedUploadViewsNumber=0,b.ub.expectedFiles=0,b.remove())},u.prototype.tF=function(a,b){var c=this,d=b.uploadBlob.bZ(),e=c.tj(),f=new z(a,b,d);b.ns(c),b.ns(f),f.ns(c),f.tw(e),c.mU(b),c.tI+=d.size,c.to(c.tI),c.totalFiles+=1,c.tm(c.totalFiles),1===c.totalFiles&&c.uH(a)},u.prototype.uc=function(a){var b=this,c=b.ub.expectedFiles,d=a.uploadBlob.bZ();b.sB(a)&&b.nU(a),c<1&&b.tM.length<1?(b.ma(),b.ud(b.application)):(b.sa+=d.size,b.sO+=1),b.updateUploadProgress(b.sa,b.tI,b.sO,b.totalFiles,c),b.to(b.tI),b.tm(b.totalFiles)},u.prototype.ma=function(){var b,c,a=this,d=a.application.aV;for(b=0;b<a.wU.length;b+=1)if(a.wU[b].folder===d){c=a.wU[b];break}a.wU=[],c&&a.application.oW("requestShowFolderFiles",c)},u.prototype.remove=function(){this.tj().oW("requestUnloadForm")},u.prototype.setUploadCommand=function(a,b){var c,d,e,f;if(b.pW&&!(b.pW.length<1))for(this.domElementListeners||(this.domElementListeners=[]),e=function(a,c){this.onUploadPanelUploadStartClick(c,b,a)},f=b.pW,d=0;d<f.length;d+=1)f[d].click&&(c=f[d].click,f[d].click=e.bind(this,c))},u.prototype.tD=function(a,b){this.updateLoadedPercentage(a,b)},u.prototype.updateLoadedPercentage=function(a,b,c){var d;d=b>0?Math.round(a/b*100):0,d<0&&(d=0),(d>100||isNaN(d))&&(d=100),this.domElement.ni.setStyle("width",d+"%"),c=c?" - "+c.trim():"",this.updateStatusText(this.application.lang.UploadUploaded.replace("!n",d)+c)},u.prototype.nR=function(a,b){var c;b<1||(c=a/1024/b,this.domElement.np.setText(k.formatSpeed(c,this.application.lang)))},u.prototype.updateStatusText=function(a){this.domElement.mz.setText(a)},u.prototype.to=function(a){this.domElement.totalSizeSpan.setText(this.application.lang.UploadTotalSize+" "+k.formatSize(a/1024,this.application.lang))},u.prototype.tm=function(a){this.domElement.countSpan.setText(this.application.lang.UploadTotalFiles+" "+a+" ")},u.prototype.updateUploadProgress=function(a,b,c,d,e){var j,f=a/b,g=1,h=c/(d+e),i=3;j=CKFinder.tools.formatSize(a/1024,this.application.lang),this.updateLoadedPercentage(f*g+h*i,g+i,j)},x=function(a,b){var c=this;i.call(c),r.call(c),v.call(c),c.application=a,c.lQ=10,c.expectedFiles=0,c.shouldStopProcessing=!1,c.tM=[],c.ty=b},x.prototype=B(v.prototype),x.prototype=i.mixin(x.prototype),x.prototype=r.mixin(x.prototype),x.qM="upload.supervisor.ready",x.prototype.or=function(){this.expectedFiles=0,this.shouldStopProcessing=!0,this.tM=[]},x.prototype.nZ=function(){return this.tM.shift()},x.prototype.qg=function(a){this.sj(a.file)||this.tM.push(a)},x.prototype.tc=function(){var a={};return a[y.pU]="tH",a[y.pN]="uc",a},x.prototype.getUploadCommand=function(){if(!this.uploadCommand)throw new Error("Upload command is not set.");return this.uploadCommand},x.prototype.sj=function(a){var b;for(b=0;b<this.tM.length;b+=1)if(a===this.tM[b].uploadBlob.bZ())return!0;return!1},x.prototype.tH=function(){this.tx()},x.prototype.uc=function(){this.lQ+=1,this.tx()},x.prototype.uG=function(b){var d,g,c=100,f=this.sX(),h=this,i=this.getUploadCommand();if(!this.application.aV)return!1;if(this.expectedFiles+=b.length,this.shouldStopProcessing=!1,i.bu!==a.aY){if(b.length<1)return!1;try{b[0],this.uI&&this.uI(!1)}catch(a){return!1}finally{i.bu!==a.eV&&(f=!1,i.exec(this.application))}return g=A.bind(null,b,function(a){if(h.shouldStopProcessing)return h.expectedFiles=0,h.shouldStopProcessing=!1,!1;h.expectedFiles-=1,h.tA(new t(a,new p(a)))}),f?(g(),!0):(d=setInterval(function(){h.sX()&&(clearInterval(d),g())},c),!0)}},x.prototype.tA=function(a){var c,d,b=this;if(a.getFileName().length<1)return void b.tj().oW("failedUploadFile");d=new y(b.application,b.application.aV,a),d.ns(b.ty),a.ns(d),c=new XMLHttpRequest,d.nv(c),b.tL(b.application,d)},x.prototype.tL=function(a,b){var c=this;if(c.dispatch(x.qM,[c.application,b]),b.ns(c),c.lQ<1)return void c.qg(b);c.tv(a,b)},x.prototype.tx=function(){for(var a=this;a.tM.length>0&&a.lQ>0;)a.tv(a.application,a.nZ())},x.prototype.tJ=function(a){this.lQ=a},x.prototype.setUploadCommand=function(a,b){this.uploadCommand=b},x.prototype.tv=function(a,b){this.lQ-=1,b.mW()},y=function(a,b,c){var d=this;i.call(d),v.call(d),d.application=a,d.isAborted=!1,d.sa=0,d.oS=0,d.targetFolder=b,d.uploadBlob=c},y.prototype=B(v.prototype),y.prototype=i.mixin(y.prototype),y.pU="start",y.pN="stop",y.prototype.lN=function(){if(!this.sY())throw new Error("Upload is not in progress.");this.isAborted=!0,this.bT.abort()},y.prototype.ns=function(a){if(!(a instanceof v))throw new Error("Invalid argument: expected UploadProgressListener.");i.prototype.ns.call(this,a)},y.prototype.ta=function(a){var b=this.wv(),c=a.aV,d=c.getResourceType();return!(b&&!d.isExtensionAllowed(b)&&(this.onError(a.lang.UploadExtIncorrect),1))},y.prototype.wN=function(a){var g,b=this,d=b.wv(),e=b.getFileSize(),f=parseInt(a.config.uploadMaxSize,10),h=a.aV,i=h.getResourceType();return g=parseInt(i.maxSize,10),0===e?(b.onError(a.lang.Errors[202]),!1):!(f&&e>f||g&&e>g&&(a.config.uploadCheckImages||!c.test(d)))||(b.onError(a.lang.Errors[203]),!1)},y.prototype.tl=function(a){return!!this.ta(a)&&this.wN(a)},y.prototype.nv=function(a){var c,b=this;if(b.sY())throw new Error("Upload is already started.");a.addEventListener(v.pH,b.onAbort.bind(b)),a.addEventListener(v.rj,b.onError.bind(b)),a.addEventListener(v.qk,b.onLoad.bind(b)),c=a.upload,c&&c.addEventListener(v.rc,b.onProgress.bind(b)),b.bT=a,b.isAborted=!1},y.prototype.tK=function(){return this.oS},y.prototype.bZ=function(){return this.uploadBlob.bZ()},y.prototype.wv=function(){return this.uploadBlob.wv()},y.prototype.getFileName=function(){return this.uploadBlob.getFileName()},y.prototype.getFileSize=function(){return this.uploadBlob.getFileSize()},y.prototype.tc=function(){var a=v.prototype.tc.call(this);return a["xhr.header"]="tO",a},y.prototype.sY=function(){return!this.isAborted&&!!this.bT},y.prototype.onAbort=function(a){this.dispatch(v.pH,[this.uploadBlob]),this.onStop()},y.prototype.onError=function(a){var b=this;a||(a=b.application.lang.UploadUnknError),b.dispatch(v.rj,[b.uploadBlob,a]),b.onStop()},y.prototype.tO=function(a,b){if(!this.bT)throw new Error("Request is not initialized");this.bT.setRequestHeader(a,b)},y.prototype.onLoad=function(a){var c,e,f,h,b=this,g=2;if(200!==b.bT.status)return b.onError();f=a.target.responseText,h=f.split(d,g),c=h[0],e=h[1],!c.length&&e?b.dispatch(v.rj,[b.uploadBlob,e]):b.dispatch(v.qk,[b.uploadBlob,c,e]),b.onStop()},y.prototype.onProgress=function(a){var b=this;a.lengthComputable&&(b.sa=a.target.kC=a.loaded,b.dispatch(v.rc,[b,b.uploadBlob,b.sa,b.tK()]))},y.prototype.onStop=function(){var a=this;delete a.bT,a.isAborted=!0,a.oS=0,a.dispatch(y.pN,[a,a.uploadBlob])},y.prototype.mW=function(){var a=this,b=this.bT;if(!this.tl(this.application))return!1;this.uploadBlob.tn(function(c){if(a.dispatch(y.pU,[a.uploadBlob]),b){a.oS=C();try{a.bT.send(c)}catch(b){a.onStop()}}else a.onStop()})},g=function(a,b,c,d,e){var f=this;y.call(f,a,b,c),f.isAborted=!1,f.tG=d,f.uz=e},g.prototype=B(y.prototype),g.prototype.lN=function(){if(!this.sY())throw new Error("Upload is not in progress.");this.isAborted=!0,this.uz()},g.prototype.mW=function(){var a=this;if(!a.tl(a.application))return!1;a.isAborted=!1,a.oS=C(),a.dispatch(y.pU,[a.uploadBlob]);try{a.tG()}catch(b){try{a.uz()}catch(a){throw a}finally{a.onStop()}}},z=function(a,b,c){var d=this;i.call(d),r.call(d),v.call(d),d.application=a,d.file=c,d.isDomAttached=!1,d.isDomRemoved=!1,d.shouldBeRemovedOnStop=!0,d.targetFolder=b.targetFolder,d.ts=b},z.prototype=B(v.prototype),z.prototype=i.mixin(z.prototype),z.prototype=r.mixin(z.prototype),z.prototype.tD=u.prototype.updateLoadedPercentage,z.prototype.nR=u.prototype.nR,z.prototype.updateStatusText=u.prototype.updateStatusText,z.EVENT_DOM_ATTACHED="event.dom.attached",z.EVENT_DOM_REMOVED="event.dom.removed",z.pM="event.folder.refresh.request",z.prototype.tc=function(){var a=v.prototype.tc.call(this);return a[y.pN]="onStop",a},z.prototype.onAbort=function(a){var b=this;b.ts&&(b.ts.sY()&&(b.ts.lN(),b.ts.onStop()),b.onStop())},z.prototype.onError=function(a,b){this.tE(b)},z.prototype.uV=function(a){var b=this;if(!b.isDomAttached){var d,c=a.bn(),e=new m("div",c.getDocument());e.setAttribute("class","ckf_upload_info"),e.setHtml(N(b.application,a,b.file,'<div class="ckf_progress_wrapper"><div class="ckf_progress_info"><span>{{file_name}}</span><span></span><div class="ckf_progress_bar_container"><div></div></div><span class="ckf_status"></span><span class="ckf_speed"></span><div class="ckf_outcome"></div></div></div><div class="ckf_uploadButtons"><a class="cke_dialog_ui_button cke_dialog_ui_button_cancel" name="cancel"><span class="cke_dialog_ui_button">{{lang_cancel_button}}</span></a></div>')),c.dB().append(e),b.application.cg.resizeFormPanel(),d=e.getChild([0,0]),b.domElement={button:e.getChild([1,0]),container:e,mI:d.getChild(5),ni:d.getChild([2,0]),mx:d.getChild(1),np:d.getChild(4),mz:d.getChild(3)},b.domElement.button.on("click",b.uk.bind(b,b.ts)),b.isDomAttached=!0,b.dispatch(z.EVENT_DOM_ATTACHED,[b])}},z.prototype.onLoad=function(a,b,c){this.tN(c),this.dispatch(z.pM,[this.targetFolder,b])},z.prototype.onProgress=function(a,b,c,d){this.tD(c,this.file.size),this.nR(c,d)},z.prototype.onStop=function(){this.shouldBeRemovedOnStop&&this.remove()},z.prototype.uk=function(a,b){this.shouldBeRemovedOnStop=!0,a.sY()?a.lN():this.onAbort(a.uploadBlob)},z.prototype.remove=function(){var a=this;a.isDomRemoved||(a.domElement.container.remove(),a.application.cg.resizeFormPanel(),a.isDomRemoved=!0,a.dispatch(z.EVENT_DOM_REMOVED,[a]))},z.prototype.tE=function(a){var b=this,c=b.tj();b.tp(a),b.domElement.container.addClass("ckf_FileError"),b.application.cg.resizeFormPanel(),c.oW("failedUploadFile",a)},z.prototype.tp=function(a){var b=this;a&&(b.shouldBeRemovedOnStop=!1),b.domElement.ni.getParent().hide(),b.domElement.mz.hide(),b.domElement.np.hide(),b.domElement.mI.setText(a),b.domElement.button.getFirst().setHtml(b.application.lang.CloseBtn),b.domElement.button.addClass("cke_dialog_ui_button_ok"),b.domElement.button.removeClass("cke_dialog_ui_button_cancel")},z.prototype.tN=function(a){var b=this,c=b.tj();a?(b.tp(a),b.application.cg.resizeFormPanel()):b.remove(),c.oW("successUploadFile",a)},E=function(){return!P&&"undefined"!=typeof FormData},F=function(b){var c;return c=b.env?b:a,!(!c.env.mac&&c.env.safari)},G=function(a,b,c,d){var e;e=setInterval(function(){b.ld.hasOwnProperty(c)&&(clearInterval(e),d(b,c,b.ld[c]))},10)},H=function(a,b,c,d,e,f,g,h){var i=h.bn();c.sX()||c.mE(b),i.hasAttribute("ondrop")||i.setAttribute("ondrop",M(b,W))},I=function(a,b,c,d,e,f,g,h){var j=M(b,X),l=b.cS("upload");f.setUploadCommand(b,l),g.setUploadCommand(b,l),b.cg.replaceUploadForm(j,function(){J(a,b,c,d,e,f,g,h)},!0,11)},J=function(a,b,c,d,e,f,g,h){c.tw(h),g.tw(h),f.tw(h)};L=function(a,b){return a.replace(e,function(a,c,d){return b[d]})},M=function(a,b){var c={application_name:a.name,input_multiple:F(a)?'multiple="multiple"':"",lang_upload_add_files:a.lang.UploadAddFiles,lang_close_button:a.lang.CloseBtn};return L(b,c)},N=function(a,b,c,d){var e={file_name:c.name,lang_cancel_button:a.lang.UploadBtnCancel};return L(d,e)},(K=function(a){var b;Z.bind?b=Z.bind(this,a):(P=!0,b=Z),a.plugins.add("html5upload",{bM:["uploadform"],bz:b})})(a)}(),function(){function b(a,b,c,d){a.execCommand(d?"moveFilesToFolder":"copyFilesToFolder",{files:c,destination:b,fileCallback:function(a,b){for(var c=k.indexOf(a.basketFiles,b),d=1,e=a.basketFiles.length-1,f=c;f<e;f++)a.basketFiles[f]?a.basketFiles[f]=a.basketFiles[f+d]:d++;a.basketFiles.length=Math.max(e,0)}})}o.add("basket",{bM:["foldertree","filesview","contextmenu"],readOnly:!1,basketToolbar:[["clearBasket",{label:"BasketClear",command:"TruncateBasket",disableEmpty:!0}]],basketFileContextMenu:[["mu",{label:"BasketRemove",command:"RemoveFileFromBasket",group:"file3"}],["hN",{label:"BasketOpenFolder",command:"OpenFileFolder",group:"file1"}]],bz:function(d){var e=window.top[a.nd+"cation"][a.jG+"st"],f=[],g=function(){for(var b=d.basketFiles.length?a.aS:a.aY,c=0,e=f.length;c<e;c++)d.cS(f[c]).bR(b)};d.bD("FolderPasteCopyBasket",{exec:function(a){var c=a.aV;c&&b(a,c,a.basketFiles)}}),d.bD("FolderPasteMoveBasket",{exec:function(c){if(a.bF&&1==a.bs.indexOf(a.bF.substr(1,1))%5&&a.lS(e)!=a.lS(a.ed)||a.bF&&a.bF.substr(3,1)!=a.bs.substr(9*(a.bs.indexOf(a.bF.substr(0,1))+a.bs.indexOf(a.bF.substr(2,1)))%(a.bs.length-1),1))c.msgDialog("","This function is disabled in the demo version of CKFinder.<br />Please visit the <a href='http://cksource.com/ckfinder'>CKFinder web site</a> to obtain a valid license.");else{var d=c.aV;if(!d)return;b(c,d,c.basketFiles,!0),g()}}}),d.eU({folderPasteMoveBasket:{label:d.lang.BasketMoveFilesHere,command:"FolderPasteMoveBasket",group:"folder1"},folderPasteCopyBasket:{label:d.lang.BasketCopyFilesHere,command:"FolderPasteCopyBasket",group:"folder1"}});var h=d.basket=new a.aL.BasketFolder(d);d.basketFiles=[],d.on("uiReady",function(c){function m(a){for(var b in a.plugins)if(a.plugins.hasOwnProperty(b)&&(b=a.plugins[b],b.basketToolbar))for(var c=0;c<b.basketToolbar.length;c++){var d=b.basketToolbar[c];if(!a.bY._.items[d[0]]){var e=k.deepCopy(d[1]),g=e.command;if(!e.command){var h=d[1].onClick;g="BasketToolbar_"+d[0],a.bD(g,{exec:function(a){h(a.cg)}}),e.command=g}var i=k.capitalize(b.name);"function"==typeof e.label?e.label=e.label.call(b,a.cg):a.lang[b.name]&&a.lang[b.name][e.label]?e.label=a.lang[b.name][e.label]:a.lang[i]&&a.lang[i][e.label]?e.label=a.lang[i][e.label]:a.lang[e.label]&&(e.label=a.lang[e.label]),e.basketToolbar=1,e.disableEmpty&&f.push(g),a.bY.add(d[0],CKFinder._.UI_BUTTON,e)}}}function n(a){if(a.eU)for(var b in a.plugins)if(a.plugins.hasOwnProperty(b)&&(b=a.plugins[b],b.basketFileContextMenu))for(var c=0;c<b.basketFileContextMenu.length;c++){var d=b.basketFileContextMenu[c];if(!a._.iG[d[0]]){var e=k.deepCopy(d[1]);if(!e.command){var g="BasketContextMenu_"+d[0],h=d[1].onClick;a.bD("BasketContextMenu_"+d[0],{exec:function(a){h(a.cg)}}),e.command=g}var i=k.capitalize(b.name);"function"==typeof e.label?e.label=e.label.call(b,a.cg):a.lang[b.name]&&a.lang[b.name][e.label]?e.label=a.lang[b.name][e.label]:a.lang[i]&&a.lang[i][e.label]?e.label=a.lang[i][e.label]:a.lang[e.label]&&(e.label=a.lang[e.label]),e.disableEmpty&&f.push(g),a.gp(d[0],e),l.push(d[0])}}}var e=d.ld["foldertree.foldertree"];e.on("beforeAddFolder",function(b){b.removeListener(),b.data.folders.push(h)}),e.on("beforeDroppable",function(c){if(c.data.target instanceof a.aL.BasketFolder&&(c.data.source instanceof a.aL.File&&(c.data.source=[c.data.source]),k.isArray(c.data.source)&&c.data.source.length&&c.data.source[0]instanceof a.aL.File)){for(var i,j,e=c.data.source,f=0,g=0,h=e.length;g<h;g++){for(i=0,j=d.basketFiles.length;i<j;i++)if(e[g].isSameFile(d.basketFiles[i])){f=1;break}f||d.basketFiles.push(e[g])}c.cancel(1)}}),e.on("beforeContextMenu",function(c){var e;c.data.folder instanceof a.aL.BasketFolder?(e=c.data.bj,delete e.renameFolder,delete e.removeFolder,delete e.createSubFolder,e.qT=d.basketFiles.length?a.aS:a.aY):(e=c.data.bj,e.folderPasteCopyBasket=d.basketFiles.length?a.aS:a.aY,e.folderPasteMoveBasket=d.basketFiles.length?a.aS:a.aY)}),e.on("beforeKeyboardNavigation",function(c){if(c.data.folder instanceof a.aL.BasketFolder){var d=c.data.db();46!=d&&113!=d||c.cancel()}}),d.bD("TruncateBasket",{exec:function(a){a.basketFiles.length&&a.fe("",a.lang.BasketTruncateConfirm,function(){a.basketFiles.length=0,a.oW("requestSelectFolder",{folder:a.basket})})}}),d.bD("RemoveFileFromBasket",{exec:function(a){var b=a.ld["filesview.filesview"].tools.oO();b&&b.length&&a.fe("",1==b.length?a.lang.BasketRemoveConfirm.replace("%1",b[0].name):a.lang.BasketRemoveConfirmMultiple.replace("%1",b.length),function(){for(var e,c=0,d=b.length;c<d;c++)for(e=0;e<a.basketFiles.length;e++)if(b[c].isSameFile(a.basketFiles[e])){a.basketFiles.splice(e,1);break}a.oW("requestSelectFolder",{folder:a.basket}),g()})}}),d.bD("OpenFileFolder",{exec:function(a){var b=a.ld["filesview.filesview"].data().cG;b&&a.oW("requestSelectFolder",{folder:b.folder})}}),d.eU&&d.gp("truncateBasket",{label:d.lang.BasketClear,command:"TruncateBasket",group:"folder"});var i=[],j=d.ld["filesview.filesview"],l=[];j.on("beforeContextMenu",function(b){if(b.data.folder instanceof a.aL.BasketFolder){var c=b.data.bj;delete c.renameFile,delete c.deleteFile,delete c.deleteFiles,c.mu=a.aS,c.hN=a.aS;for(var d=0;d<l.length;d++)c[l[d]]=a.aS}}),j.on("beforeShowFolderFiles",function(c){if(c.data.folder instanceof a.aL.BasketFolder){c.cancel(1),this.app.oW("requestRenderFiles",{files:d.basketFiles,mj:d.lang.BasketEmpty,eu:1,folder:c.data.folder}),this.app.oW("requestRepaintFolder",c.data),m(this.app),n(this.app),g();for(var e=this.app.dh.fk,f=0;f<e.length;f++){var h=this.app.document.getById(e[f].id),j=['<span class="cke_toolgroup" id="basket">'];for(var k in this.app.bY._.items)if(this.app.bY._.items.hasOwnProperty(k)){var l=d.bY._.items[k];if(l.mp[0].basketToolbar){l=d.bY.create(k);var o=l.er(d,j),p=e[f].items.push(o)-1;p>0&&(o.previous=e[f].items[p-1],o.previous.next=o),i[f]||(i[f]=[]),i[f].push(p)}}j.push("</span>"),h.appendHtml(j.join(""))}this.on("beforeShowFolderFiles",function(a){this.app.document.getById("basket").remove();for(var b=this.app.dh.fk,c=0;c<b.length;c++)for(var d=0;d<b[c].items.length;d++)i[c][d]&&delete b[c].items[d];a.removeListener()},null,null,1),this.oW("successShowFolderFiles",c.data),this.oW("afterShowFolderFiles",c.data)}}),j.on("beforeKeyboardNavigation",function(c){var e=d.aV;if(e&&e instanceof a.aL.BasketFolder){var f=c.data.db();46==f&&(c.cancel(),d.execCommand("RemoveFileFromBasket")),113==f&&c.cancel()}})},null,null,20)}}),a.aL.BasketFolder=k.createClass({$:function(b){var c=this;a.aL.Folder.call(c,b,null,b.lang.BasketFolder),c.hasChildren=0,c.acl=new a.aL.Acl("1111111"),c.isBasket=!0},base:a.aL.Folder,ej:{createNewFolder:function(){},getChildren:function(a){a.apply(this,null)},rename:function(){},remove:function(){},getUrl:function(){return"ckfinder://basketFolder"},getUploadUrl:function(){return null},getPath:function(){return"/"},copyFiles:function(a){},moveFiles:function(a){}}})}(),a.DIALOG_RESIZE_NONE=0,a.DIALOG_RESIZE_WIDTH=1,a.DIALOG_RESIZE_HEIGHT=2,a.DIALOG_RESIZE_BOTH=3,function(){function b(a){return!!this._.tabs[a][0].$.offsetHeight}function c(){for(var a=this,c=a._.gx,d=a._.cU.length,e=k.indexOf(a._.cU,c)+d,f=e-1;f>e-d;f--)if(b.call(a,a._.cU[f%d]))return a._.cU[f%d];return null}function d(){for(var a=this,c=a._.gx,d=a._.cU.length,e=k.indexOf(a._.cU,c),f=e+1;f<e+d;f++)if(b.call(a,a._.cU[f%d]))return a._.cU[f%d];return null}function e(a,b,c){this.element=b,this.cQ=c,this.fM=function(){return!b.getAttribute("disabled")&&b.isVisible()},this.focus=function(){a._.aW=this.cQ,this.element.focus()},b.on("keydown",function(a){a.data.db()in{32:1,13:1}&&this.oW("click")}),b.on("focus",function(){this.oW("mouseover")}),b.on("blur",function(){this.oW("mouseout")})}function r(a,b){this._={dialog:a},k.extend(this,b)}function s(b){function j(e){var n,o,f=b.hR(),h=a.document.getWindow().eR(),j=e.data.$.screenX,k=e.data.$.screenY,l=j-c.x,m=k-c.y;c={x:j,y:k},d.x+=l,d.y+=m,n=d.x+i[3]<g?-i[3]:d.x-i[1]>h.width-f.width-g?h.width-f.width+i[1]:d.x,o=d.y+i[0]<g?-i[0]:d.y-i[2]>h.height-f.height-g?h.height-f.height+i[2]:d.y,b.move(n,o,1),e.data.preventDefault()}function k(b){if(a.document.removeListener("mousemove",j),a.document.removeListener("mouseup",k),h.ie6Compat){var c=v.getChild(0).getFrameDocument();c.removeListener("mousemove",j),c.removeListener("mouseup",k)}}var c=null,d=null,f=(b.getElement().getFirst(),b.eY()),g=f.config.dialog_magnetDistance,i=f.skin.margins||[0,0,0,0];void 0===g&&(g=20),b.bO.title.on("mousedown",function(e){if(c={x:e.data.$.screenX,y:e.data.$.screenY},a.document.on("mousemove",j),a.document.on("mouseup",k),d=b.gz(),h.ie6Compat){var f=v.getChild(0).getFrameDocument();f.on("mousemove",j),f.on("mouseup",k)}e.data.preventDefault()},b)}function t(b){function p(a){if(b._.moved&&"rtl"==e.lang.dir){var c=b._.element.getFirst();c.setStyle("right",a+"px"),c.removeStyle("left")}else b._.moved||b.layout()}function q(c){n=b.hR(),c=c.data.$;var d=b.bO.contents;if(d.$.getElementsByTagName("iframe").length&&(o=m.kE('<div class="cke_dialog_resize_cover" style="height: 100%; position: absolute; width: 100%;"></div>'),d.append(o)),g=n.height-b.bO.contents.hR("height",!(h.gecko||h.opera||i&&h.quirks)),f=n.width-b.bO.contents.hR("width",1),l={x:c.screenX,y:c.screenY},j=a.document.getWindow().eR(),a.document.on("mousemove",r),a.document.on("mouseup",s),h.ie6Compat){var k=v.getChild(0).getFrameDocument();k.on("mousemove",r),k.on("mouseup",s)}c.preventDefault&&c.preventDefault()}function r(h){var i="rtl"==e.lang.dir,k=(h.data.$.screenX-l.x)*(i?-1:1),m=h.data.$.screenY-l.y,o=n.width,q=n.height,r=o+k*(b._.moved?1:2),s=q+m*(b._.moved?1:2),t=b._.element.getFirst(),u=i&&t.getComputedStyle("right"),v=b.gz();u&&(u="auto"==u?j.width-(v.x||0)-t.hR("width"):parseInt(u,10)),v.y+s>j.height&&(s=j.height-v.y),(i?u:v.x)+r>j.width&&(r=j.width-(i?u:v.x)),d!=a.DIALOG_RESIZE_WIDTH&&d!=a.DIALOG_RESIZE_BOTH||i&&k>0&&!v.x||(o=Math.max(c.minWidth||0,r-f)),d!=a.DIALOG_RESIZE_HEIGHT&&d!=a.DIALOG_RESIZE_BOTH||(q=Math.max(c.minHeight||0,s-g)),b.resize(o,q),p(u),h.data.preventDefault()}function s(){if(a.document.removeListener("mouseup",s),a.document.removeListener("mousemove",r),o&&(o.remove(),o=null),h.ie6Compat){var c=v.getChild(0).getFrameDocument();c.removeListener("mouseup",s),c.removeListener("mousemove",r)}if("rtl"==e.lang.dir){var d=b._.element.getFirst(),f=d.getComputedStyle("left");f="auto"==f?j.width-parseInt(d.rd("right"),10)-b.hR().width:parseInt(f,10),d.removeStyle("right"),b._.position.x+=1,b.move(f,b._.position.y)}}var c=b.dg,d=c.resizable;if(d!=a.DIALOG_RESIZE_NONE){var f,g,j,l,n,o,e=b.eY();b.on("load",function(){var c="";d==a.DIALOG_RESIZE_WIDTH?c=" cke_resizer_horizontal":d==a.DIALOG_RESIZE_HEIGHT&&(c=" cke_resizer_vertical");var f=m.kE('<div class="cke_resizer'+c+'" title="'+k.htmlEncode(e.lang.resize)+'"></div>');f.on("mousedown",q),b.bO.footer.append(f,1)}),e.on("destroy",function(){k.removeFunction(q)})}}function I(a,b){var c=function(){e(this),b(this)},d=function(){e(this)},e=function(a){a.removeListener("ok",c),a.removeListener("cancel",d)};a.on("ok",c),a.on("cancel",d)}a.dialog=function(b,e){function o(a){var b=m._.eO,c=a?1:-1;if(!(b.length<1)){for(var d=(m._.aW+c+b.length)%b.length,e=d;!b[e].fM()&&(e=(e+c+b.length)%b.length)!=d;);b[e].focus(),"text"==b[e].type&&b[e].select()}}function r(b){if(m==a.dialog._.dL){var e=b.data.db();if(p=0,9==e||e==a.dy+9){var f=e==a.dy+9;if(m._.eC){var g=f?c.call(m):d.call(m);m.selectPage(g),m._.tabs[g][0].focus()}else o(!f);p=1}else e!=a.eJ+121||m._.eC?37!=e&&39!=e||!m._.eC||(g=37==e?c.call(m):d.call(m),m.selectPage(g),m._.tabs[g][0].focus(),p=1):(m._.eC=!0,m._.tabs[m._.gx][0].focus(),p=1);p&&(b.stop(),b.data.preventDefault())}}function u(a){p&&a.data.preventDefault()}var g=a.dialog._.ev[e];g=k.extend(g(b),f),g=k.clone(g),g=new q(this,g);var j=(a.document,b.theme.pu(b));this._={app:b,element:j.element,name:e,hB:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},iX:{},tabs:{},cU:[],gx:null,nM:null,gV:0,qF:null,eC:!1,eO:[],aW:0,hasFocus:!1},this.bO=j.bO,this.bO.dialog.setStyles({position:h.ie6Compat?"absolute":"fixed",top:0,left:0,visibility:"hidden"}),a.event.call(this),this.dg=g=a.oW("dialogDefinition",{name:e,dg:g},b).dg,g.onLoad&&this.on("load",g.onLoad),g.onShow&&this.on("show",g.onShow),g.onHide&&this.on("hide",g.onHide),g.onOk&&this.on("ok",function(a){!1===g.onOk.call(this,a)&&(a.data.hide=!1)}),g.onCancel&&this.on("cancel",function(a){!1===g.onCancel.call(this,a)&&(a.data.hide=!1)});var m=this,n=function(a){var b=m._.contents;for(var d in b)for(var e in b[d])if(a.call(this,b[d][e]))return};this.on("ok",function(a){n(function(c){if(c.validate){var d=c.validate(this);if("string"==typeof d&&(b.document.getWindow().$.alert(d),d=!1),!1===d)return c.select?c.select():c.focus(),a.data.hide=!1,a.stop(),!0}})},this,null,0),this.on("cancel",function(a){n(function(c){if(c.isChanged())return b.document.getWindow().$.confirm(b.lang.common.confirmCancel)||(a.data.hide=!1),!0})},this,null,0),this.bO.close.on("click",function(a){!1!==this.oW("cancel",{hide:!0}).hide&&this.hide()},this);var p;this.on("show",function(){if(a.document.on("keydown",r,this,null,0),(h.opera||h.gecko&&h.mac)&&a.document.on("keypress",u,this),h.ie6Compat){v.getChild(0).getFrameDocument().on("keydown",r,this,null,0)}}),this.on("hide",function(){a.document.removeListener("keydown",r),(h.opera||h.gecko&&h.mac)&&a.document.removeListener("keypress",u)}),this.on("iframeAdded",function(a){new l(a.data.iframe.$.contentWindow.document).on("keydown",r,this,null,0)}),this.on("show",function(){this._.hasFocus||(this._.aW=-1,o(!0))},this,null,4294967295),h.ie6Compat&&this.on("load",function(a){var b=this.getElement(),c=b.getFirst();c.remove(),c.appendTo(b)},this),s(this),t(this),this.bO.title.setText(g.title);for(var w=0;w<g.contents.length;w++)this.addPage(g.contents[w]);var x=/cke_dialog_tab(\s|$|_)/;this.bO.tabs.on("click",function(a){var e,b=this,c=a.data.bK();(x.test(c.$.className)||"a"==c.getName())&&(e=c.$.id.substr(0,c.$.id.lastIndexOf("_")),b.selectPage(e),b._.eC&&(b._.eC=!1,b._.aW=-1,o(!0)),a.data.preventDefault())},this);var z=[],A=a.dialog._.gv.hbox.dQ(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:g.buttons},z).getChild();for(this.bO.footer.setHtml(z.join("")),w=0;w<A.length;w++)this._.buttons[A[w].id]=A[w];a.skins.load(b,"dialog")},a.dialog.prototype={resize:function(){return function(b,c){var d=this;d._.hB&&d._.hB.width==b&&d._.hB.height==c||(a.dialog.oW("resize",{dialog:d,skin:d._.app.gd,width:b,height:c},d._.app),d._.hB={width:b,height:c})}}(),hR:function(){var a=this._.element.getFirst();return{width:a.$.offsetWidth||0,height:a.$.offsetHeight||0}},mn:function(){var a=this.hR();return a.height=a.height-(this.bO.title.$.offsetHeight||0)-(this.bO.footer.$.offsetHeight||0),a},move:function(){var b;return function(c,d,e){var f=this,g=f._.element.getFirst();if(void 0===b&&(b="fixed"==g.getComputedStyle("position")),!b||!f._.position||f._.position.x!=c||f._.position.y!=d){if(f._.position={x:c,y:d},!b){var h=a.document.getWindow().hV();c+=h.x,d+=h.y}g.setStyles({left:(c>0?c:0)+"px",top:(d>0?d:0)+"px"}),e&&(f._.moved=1)}}}(),gz:function(){return k.extend({},this._.position)},show:function(){var b=this._.app;if("qt"==b.mode&&i){var c=b.getSelection();c&&c.up()}var d=this._.element,e=this.dg;if(!d.getParent()||!d.getParent().equals(a.document.bH())){if(d.appendTo(a.document.bH()),h.gecko&&h.version<10900){var f=this.bO.dialog;f.setStyle("position","absolute"),setTimeout(function(){f.setStyle("position","fixed")},0)}if(this.resize(this._.hB&&this._.hB.width||e.minWidth,this._.hB&&this._.hB.height||e.minHeight),this.selectPage(this.dg.contents[0].id),this.reset(),null===a.dialog._.gw&&(a.dialog._.gw=this._.app.config.baseFloatZIndex),this._.element.getFirst().setStyle("z-index",a.dialog._.gw+=10),null===a.dialog._.dL){a.dialog._.dL=this,this._.ep=null;try{x(this._.app)}catch(a){v=void 0,x(b),u=!1}d.on("keydown",A),d.on(h.opera?"keypress":"keyup",B);for(var g in{keyup:1,keydown:1,keypress:1})d.on(g,H)}else{this._.ep=a.dialog._.dL;this._.ep.getElement().getFirst().$.style.zIndex-=Math.floor(this._.app.config.baseFloatZIndex/2),a.dialog._.dL=this}C(this,this,"",null,function(){var a=this.getButton("cancel");a?a.click():!1!==this.oW("cancel",{hide:!0}).hide&&this.hide()}),this._.hasFocus=!1,k.setTimeout(function(){this.layout(),this.bO.dialog.setStyle("visibility",""),this.cr("load",{}),this.oW("show",{}),this._.app.oW("dialogShow",this),this.gh(function(a){a.jW&&a.jW()})},100,this)}},layout:function(){var b=this,c=a.document.getWindow().eR(),d=b.hR();b.move(b._.moved?b._.position.x:(c.width-d.width)/2,b._.moved?b._.position.y:(c.height-d.height)/2)},gh:function(a){var b=this;for(var c in b._.contents)for(var d in b._.contents[c])a(b._.contents[c][d]);return b},reset:function(){var a=function(a){a.reset&&a.reset()};return function(){return this.gh(a),this}}(),rN:function(){var a=arguments;this.gh(function(b){b.qi&&b.qi.apply(b,a)})},sI:function(){var a=arguments;this.gh(function(b){b.rx&&b.rx.apply(b,a)})},hide:function(){this.oW("hide",{}),this._.app.oW("dialogHide",this);var b=this._.element;if(b.getParent()){if(b.remove(),this.bO.dialog.setStyle("visibility","hidden"),D(this),this._.ep){var c=this._.ep.getElement().getFirst();c.setStyle("z-index",parseInt(c.$.style.zIndex,10)+Math.floor(this._.app.config.baseFloatZIndex/2))}else y();if(a.dialog._.dL=this._.ep,this._.ep)a.dialog._.gw-=10;else{a.dialog._.gw=null,b.removeListener("keydown",A),b.removeListener(h.opera?"keypress":"keyup",B);for(var d in{keyup:1,keydown:1,keypress:1})b.removeListener(d,H);var e=this._.app;if(e.focus(),e._.activeElement=null,e._.oO=[],"qt"==e.mode&&i){var f=e.getSelection();f&&f.sd(!0)}}this.gh(function(a){a.ki&&a.ki()})}},addPage:function(b){var c=this,d=[],e=b.label?' title="'+k.htmlEncode(b.label)+'"':"",g=(b.elements,a.dialog._.gv.vbox.dQ(c,{type:"vbox",className:"cke_dialog_page_contents",children:b.elements,expand:!!b.expand,padding:b.padding,style:b.style||"width: 100%; height: 100%;"},d)),h=m.kE(d.join(""),a.document),i=m.kE(['<a class="cke_dialog_tab"',c._.gV>0?" cke_last":"cke_first",e,b.hidden?' style="display:none"':"",' id="',b.id+"_",k.getNextNumber(),'" href="javascript:void(0)"',' hp="true">',b.label,"</a>"].join(""),a.document);0===c._.gV?c.bO.dialog.addClass("cke_single_page"):c.bO.dialog.removeClass("cke_single_page"),c._.tabs[b.id]=[i,h],c._.cU.push(b.id),c._.gV++,c._.qF=i;for(var l,j=c._.contents[b.id]={},n=g.getChild();l=n.shift();)j[l.id]=l,"function"==typeof l.getChild&&n.push.apply(n,l.getChild());h.setAttribute("name",b.id),h.appendTo(c.bO.contents),i.unselectable(),c.bO.tabs.append(i),b.accessKey&&(C(c,c,"bP+"+b.accessKey,F,E),c._.iX["bP+"+b.accessKey]=b.id)},selectPage:function(a){var b=this;for(var c in b._.tabs){var d=b._.tabs[c][0],e=b._.tabs[c][1];c!=a&&(d.removeClass("cke_dialog_tab_selected"),e.hide())}var f=b._.tabs[a];f[0].addClass("cke_dialog_tab_selected"),f[1].show(),b._.gx=a,b._.nM=k.indexOf(b._.cU,a)},vJ:function(a){var b=this._.tabs[a]&&this._.tabs[a][0];b&&b.hide()},showPage:function(a){var b=this._.tabs[a]&&this._.tabs[a][0];b&&b.show()},getElement:function(){return this._.element},getName:function(){return this._.name},getContentElement:function(a,b){return this._.contents[a][b]},getValueOf:function(a,b){return this.getContentElement(a,b).getValue()},setValueOf:function(a,b,c){return this.getContentElement(a,b).setValue(c)},getButton:function(a){return this._.buttons[a]},click:function(a){return this._.buttons[a].click()},disableButton:function(a){return this._.buttons[a].disable()},enableButton:function(a){return this._.buttons[a].enable()},vj:function(){return this._.gV},getParentApi:function(){return this._.app.cg},eY:function(){return this._.app},rf:function(){return this.eY().getSelection().rf()},tQ:function(a,b){var c=this;if(void 0===b)b=c._.eO.length,c._.eO.push(new e(c,a,b));else{c._.eO.splice(b,0,new e(c,a,b));for(var d=b+1;d<c._.eO.length;d++)c._.eO[d].cQ++}},setTitle:function(a){this.bO.title.setText(a)}},k.extend(a.dialog,{add:function(a,b){this._.ev[a]&&"function"!=typeof b||(this._.ev[a]=b)},exists:function(a){return!!this._.ev[a]},getCurrent:function(){return a.dialog._.dL},okButton:function(){var a=function(a,b){return b=b||{},k.extend({id:"ok",type:"button",label:a.lang.common.ok,class:"cke_dialog_ui_button_ok",onClick:function(a){var b=a.data.dialog;!1!==b.oW("ok",{hide:!0}).hide&&b.hide()}},b,!0)};return a.type="button",a.override=function(b){return k.extend(function(c){return a(c,b)},{type:"button"},!0)},a}(),cancelButton:function(){var a=function(a,b){return b=b||{},k.extend({id:"cancel",type:"button",label:a.lang.common.cancel,class:"cke_dialog_ui_button_cancel",onClick:function(a){var b=a.data.dialog;!1!==b.oW("cancel",{hide:!0}).hide&&b.hide()}},b,!0)};return a.type="button",a.override=function(b){return k.extend(function(c){return a(c,b)},{type:"button"},!0)},a}(),addUIElement:function(a,b){this._.gv[a]=b}}),a.dialog._={gv:{},ev:{},dL:null,gw:null},a.event.du(a.dialog),a.event.du(a.dialog.prototype,!0);var f={resizable:a.DIALOG_RESIZE_NONE,minWidth:600,minHeight:400,buttons:[a.dialog.okButton,a.dialog.cancelButton]},g=function(a,b,c){for(var e,d=0;e=a[d];d++){if(e.id==b)return e;if(c&&e[c]){var f=g(e[c],b,c);if(f)return f}}return null},j=function(a,b,c,d,e){if(c){for(var g,f=0;g=a[f];f++){if(g.id==c)return a.splice(f,0,b),b;if(d&&g[d]){var h=j(g[d],b,c,d,!0);if(h)return h}}if(e)return null}return a.push(b),b},n=function(a,b,c){for(var e,d=0;e=a[d];d++){if(e.id==b)return a.splice(d,1);if(c&&e[c]){var f=n(e[c],b,c);if(f)return f}}return null},q=function(a,b){this.dialog=a;for(var e,c=b.contents,d=0;e=c[d];d++)c[d]=new r(a,e);k.extend(this,b)};q.prototype={vz:function(a){return g(this.contents,a)},getButton:function(a){return g(this.buttons,a)},uh:function(a,b){return j(this.contents,a,b)},qW:function(a,b){return j(this.buttons,a,b)},uP:function(a){n(this.contents,a)},uO:function(a){n(this.buttons,a)}},r.prototype={eB:function(a){return g(this.elements,a,"children")},add:function(a,b){return j(this.elements,a,b,"children")},remove:function(a){n(this.elements,a,"children")}};var v,w,u=!0,x=function(b){var c=a.document.getWindow();if(!u||!v){var d=b.config.dialog_backgroundCoverColor||"white",e=['<div style="position: ',h.ie6Compat?"absolute":"fixed","; z-index: ",b.config.baseFloatZIndex,"; top: 0px; left: 0px; ",h.ie6Compat?"":"background-color: "+d,'" id="cke_dialog_background_cover">'];if(h.ie6Compat){var f=h.isCustomDomain(),g="<html><body style=\\'background-color:"+d+";\\'></body></html>";e.push('<iframe hp="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:'),e.push("void((function(){document.open();"+(f?"document.domain='"+document.domain+"';":"")+"document.write( '"+g+"' );document.close();})())"),e.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>')}e.push("</div>"),v=m.kE(e.join(""),a.document)}var i=v,j=function(){var a=c.eR();i.setStyles({width:a.width+"px",height:a.height+"px"})},k=function(){var b=c.hV(),d=a.dialog._.dL;i.setStyles({left:b.x+"px",top:b.y+"px"});do{var e=d.gz();d.move(e.x,e.y)}while(d=d._.ep)};if(w=j,c.on("resize",j),j(),h.ie6Compat){var l=function(){k(),arguments.callee.lw.apply(this,arguments)};c.$.setTimeout(function(){l.lw=window.onscroll||function(){},window.onscroll=l},0),k()}var n=b.config.dialog_backgroundCoverOpacity;i.setOpacity(void 0!==n?n:.5),i.appendTo(a.document.bH())},y=function(){if(v){var b=a.document.getWindow();v.remove(),b.removeListener("resize",w),h.ie6Compat&&b.$.setTimeout(function(){var a=window.onscroll&&window.onscroll.lw;window.onscroll=a||null},0),w=null}},z={},A=function(a){var b=a.data.$.ctrlKey||a.data.$.metaKey,c=a.data.$.altKey,d=a.data.$.shiftKey,e=String.fromCharCode(a.data.$.keyCode),f=z[(b?"bP+":"")+(c?"eJ+":"")+(d?"dy+":"")+e];f&&f.length&&(f=f[f.length-1],f.keydown&&f.keydown.call(f.bf,f.dialog,f.iK),a.data.preventDefault())},B=function(a){var b=a.data.$.ctrlKey||a.data.$.metaKey,c=a.data.$.altKey,d=a.data.$.shiftKey,e=String.fromCharCode(a.data.$.keyCode),f=z[(b?"bP+":"")+(c?"eJ+":"")+(d?"dy+":"")+e];f&&f.length&&(f=f[f.length-1],f.keyup&&(f.keyup.call(f.bf,f.dialog,f.iK),a.data.preventDefault()))},C=function(a,b,c,d,e){(z[c]||(z[c]=[])).push({bf:a,dialog:b,iK:c,keyup:e||a.eZ,keydown:d||a.iU})},D=function(a){for(var b in z){for(var c=z[b],d=c.length-1;d>=0;d--)c[d].dialog!=a&&c[d].bf!=a||c.splice(d,1);0===c.length&&delete z[b]}},E=function(a,b){a._.iX[b]&&a.selectPage(a._.iX[b])},F=function(a,b){},G={27:1,13:1},H=function(a){a.data.db()in G&&a.data.stopPropagation()};!function(){p.dialog={bf:function(b,c,d,e,f,g,h){if(!(arguments.length<4)){var q,i=(e.call?e(c):e)||"div",j=["<",i," "],l=(f&&f.call?f(c):f)||{},m=(g&&g.call?g(c):g)||{},n=(h&&h.call?h(b,c):h)||"",o=this.oJ=m.id||k.getNextNumber()+"_uiElement";this.id=c.id;m.id=o;var r={};c.type&&(r["cke_dialog_ui_"+c.type]=1),c.className&&(r[c.className]=1);var s=m.class&&m.class.split?m.class.split(" "):[];for(q=0;q<s.length;q++)s[q]&&(r[s[q]]=1);var t=[];for(q in r)t.push(q);m.class=t.join(" "),c.title&&(m.title=c.title);var u=(c.style||"").split(";");for(q in l)u.push(q+":"+l[q]);for(c.hidden&&u.push("display:none"),q=u.length-1;q>=0;q--)""===u[q]&&u.splice(q,1);u.length>0&&(m.style=(m.style?m.style+"; ":"")+u.join("; "));for(q in m)j.push(q+'="'+k.htmlEncode(m[q])+'" ');j.push(">",n,"</",i,">"),d.push(j.join("")),(this._||(this._={})).dialog=b,"boolean"==typeof c.isChanged&&(this.isChanged=function(){return c.isChanged}),"function"==typeof c.isChanged&&(this.isChanged=c.isChanged),a.event.du(this),this.nc(c),this.eZ&&this.iU&&c.accessKey&&C(this,b,"bP+"+c.accessKey);var v=this;b.on("load",function(){v.getInputElement()&&v.getInputElement().on("focus",function(){b._.eC=!1,b._.hasFocus=!0,v.oW("focus")},v)}),this.eA&&(this.cQ=b._.eO.push(this)-1,this.on("focus",function(){b._.aW=v.cQ})),k.extend(this,c)}},hbox:function(a,b,c,d,e){if(!(arguments.length<4)){this._||(this._={});var j,g=(this._.children=b,e&&e.widths||null),h=e&&e.height||null,i={},l=function(){var a=['<tbody><tr class="cke_dialog_ui_hbox">'];for(j=0;j<c.length;j++){var b="cke_dialog_ui_hbox_child",d=[];0===j&&(b="cke_dialog_ui_hbox_first"),j==c.length-1&&(b="cke_dialog_ui_hbox_last"),a.push('<td class="',b,'" '),g?g[j]&&d.push("width:"+k.cssLength(g[j])):d.push("width:"+Math.floor(100/c.length)+"%"),h&&d.push("height:"+k.cssLength(h)),e&&void 0!=e.padding&&d.push("padding:"+k.cssLength(e.padding)),d.length>0&&a.push('style="'+d.join("; ")+'" '),a.push(">",c[j],"</td>")}return a.push("</tr></tbody>"),a.join("")};p.dialog.bf.call(this,a,e||{type:"hbox"},d,"table",i,e&&e.align&&{align:e.align}||null,l)}},vbox:function(a,b,c,d,e){if(!(arguments.length<3)){this._||(this._={});var g=(this._.children=b,e&&e.width||null),h=e&&e.vY||null,i=function(){var b=['<table cellspacing="0" border="0" '];b.push('style="'),e&&e.expand&&b.push("height:100%;"),b.push("width:"+k.cssLength(g||"100%"),";"),b.push('"'),b.push('align="',k.htmlEncode(e&&e.align||("ltr"==a.eY().lang.dir?"left":"right")),'" '),b.push("><tbody>");for(var d=0;d<c.length;d++){var f=[];b.push("<tr><td "),g&&f.push("width:"+k.cssLength(g||"100%")),h?f.push("height:"+k.cssLength(h[d])):e&&e.expand&&f.push("height:"+Math.floor(100/c.length)+"%"),e&&void 0!=e.padding&&f.push("padding:"+k.cssLength(e.padding)),f.length>0&&b.push('style="',f.join("; "),'" '),b.push(' class="cke_dialog_ui_vbox_child">',c[d],"</td></tr>")}return b.push("</tbody></table>"),b.join("")};p.dialog.bf.call(this,a,e||{type:"vbox"},d,"div",null,null,i)}}}}(),p.dialog.bf.prototype={getElement:function(){return a.document.getById(this.oJ)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(a){return this.getInputElement().setValue(a),this.oW("change",{value:a}),this},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return!1},selectParentTab:function(){for(var d,a=this,b=a.getInputElement(),c=b;(c=c.getParent())&&-1==c.$.className.search("cke_dialog_page_contents"););return c?(d=c.getAttribute("name"),a._.dialog._.gx!=d&&a._.dialog.selectPage(d),a):a},focus:function(){return this.selectParentTab().getInputElement().focus(),this},nc:function(a){var c,b=/^on([A-Z]\w+)/,d=function(a,b,c,d){b.on("load",function(){a.getInputElement().on(c,d,a)})};for(var e in a)(c=e.match(b))&&(this.dm[e]?this.dm[e].call(this,this._.dialog,a[e]):d(this,this._.dialog,c[1].toLowerCase(),a[e]));return this},dm:{onLoad:function(a,b){a.on("load",b,this)},onShow:function(a,b){a.on("show",b,this)},onHide:function(a,b){a.on("hide",b,this)}},iU:function(a,b){this.focus()},eZ:function(a,b){},disable:function(){var a=this.getInputElement();a.setAttribute("disabled","true"),a.addClass("cke_disabled")},enable:function(){var a=this.getInputElement();a.removeAttribute("disabled"),a.removeClass("cke_disabled")},isEnabled:function(){return!this.getInputElement().getAttribute("disabled")},isVisible:function(){return this.getInputElement().isVisible()},fM:function(){return!(!this.isEnabled()||!this.isVisible())}},p.dialog.hbox.prototype=k.extend(new p.dialog.bf,{getChild:function(a){var b=this;return arguments.length<1?b._.children.concat():(a.splice||(a=[a]),a.length<2?b._.children[a[0]]:b._.children[a[0]]&&b._.children[a[0]].getChild?b._.children[a[0]].getChild(a.slice(1,a.length)):null)}},!0),p.dialog.vbox.prototype=new p.dialog.hbox,function(){var b={dQ:function(b,c,d){for(var f,e=c.children,g=[],h=[],i=0;i<e.length&&(f=e[i]);i++){var j=[];g.push(j),h.push(a.dialog._.gv[f.type].dQ(b,f,j))}return new p.dialog[c.type](b,h,g,d,c)}};a.dialog.addUIElement("hbox",b),a.dialog.addUIElement("vbox",b)}(),a.rB=function(a){this.ry=a},a.rB.prototype={exec:function(a){a.openDialog(this.ry)},sG:!1},function(){var b=/^([a]|[^a])+$/,c=/^\d*$/,d=/^\d*(?:\.\d+)?$/;a.sg=1,a.jb=2,a.dialog.validate={functions:function(){return function(){var g,b=this,c=b&&b.getValue?b.getValue():arguments[0],d=void 0,e=a.jb,f=[];for(g=0;g<arguments.length&&"function"==typeof arguments[g];g++)f.push(arguments[g]);g<arguments.length&&"string"==typeof arguments[g]&&(d=arguments[g],g++),g<arguments.length&&"number"==typeof arguments[g]&&(e=arguments[g]);var h=e==a.jb;for(g=0;g<f.length;g++)h=e==a.jb?h&&f[g](c):h||f[g](c);return!!h||(void 0!==d&&alert(d),b&&(b.select||b.focus)&&(b.select||b.focus()),!1)}},regex:function(a,b){return function(){var c=this,d=c&&c.getValue?c.getValue():arguments[0];return!!a.test(d)||(void 0!==b&&alert(b),c&&(c.select||c.focus)&&(c.select?c.select():c.focus()),!1)}},notEmpty:function(a){return this.regex(b,a)},integer:function(a){return this.regex(c,a)},number:function(a){return this.regex(d,a)},equals:function(a,b){return this.functions(function(b){return b==a},b)},notEqual:function(a,b){return this.functions(function(b){return b!=a},b)}}}(),k.extend(a.application.prototype,{openDialog:function(b,c,d){var e=a.dialog._.ev[b];if("function"==typeof e){var f=this._.oB||(this._.oB={}),g=f[b]||(f[b]=new a.dialog(this,b));return c&&c.call(g,g),!this._.activeElement&&(this._.activeElement=this.document.$.activeElement),!this._.oO&&(this._.oO=this.ld["filesview.filesview"].tools.oO()),g.show(),g}if("failed"==e)throw new Error('[CKFINDER.dialog.openDialog] Dialog "'+b+'" failed when loading dg.');var h=a.document.bH(),i=h.$.style.cursor,j=this;return h.setStyle("cursor","wait"),a.scriptLoader.load(a.getUrl(e),function(){"function"!=typeof a.dialog._.ev[b]&&(a.dialog._.ev[b]="failed"),j.openDialog(b,c),h.setStyle("cursor",i)},null,null,d),null},hs:function(a,b,c,d){var e=this;setTimeout(function(){e.cg.openDialog("Input",function(f){f.show(),f.setTitle(a||e.lang.common.inputTitle),f.getContentElement("tab1","msg").getElement().setHtml(b),f.getContentElement("tab1","input").setValue(c),I(f,function(a){var b=a.getContentElement("tab1","input").getValue();d(b)})})},0)},msgDialog:function(a,b,c){var d=this;setTimeout(function(){d.cg.openDialog("Msg",function(e){e.show(),e.setTitle(a||d.lang.common.messageTitle),e.getContentElement("tab1","msg").getElement().setHtml(b),c&&I(e,function(a){c()})})},0)},fe:function(a,b,c){var d=this;setTimeout(function(){d.cg.openDialog("Confirm",function(e){e.show(),e.setTitle(a||d.lang.common.confirmationTitle),e.getContentElement("tab1","msg").getElement().setHtml(b),I(e,function(a){c()})})},0)},skippedFilesDialog:function(a,b,c,d){var e=this;setTimeout(function(){e.cg.openDialog("SkippedFiles",function(f){f.show(),f.setTitle(a||e.lang.common.messageTitle),c?(f.getContentElement("tab1","msg").getElement().show(),f.getContentElement("tab1","msg").getElement().setHtml(c)):f.getContentElement("tab1","msg").getElement().hide();var g="",h="cke_files_list",i="",j=b.length;j>3&&(h+=" cke_files_list_many",i=' style="height: '+Math.min(j+.1,20)+'em"');for(var k=0;k<j;k++)g+="<li>"+("string"==typeof b[k]?b[k]:b[k].getAttribute("name"))+"</li>";f.getContentElement("tab1","skippedList").getElement().setHtml('<ul class="'+h+'"'+i+">"+g+"</ul>"),d&&I(f,function(){d()})})},0)}}),o.add("dialog",{bM:["dialogui"],onLoad:function(){a.dialog.add("Confirm",function(a){return{title:a.lang.common.confirmationTitle,minWidth:270,minHeight:60,contents:[{id:"tab1",elements:[{type:"html",html:"",id:"msg"}]}],buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]}}),a.dialog.add("Msg",function(a){return{title:a.lang.common.messageTitle,minWidth:270,minHeight:60,contents:[{id:"tab1",elements:[{type:"html",html:"",id:"msg"}]}],buttons:[CKFinder.dialog.okButton]}}),a.dialog.add("Input",function(a){return{title:a.lang.common.inputTitle,minWidth:270,minHeight:60,contents:[{id:"tab1",elements:[{type:"html",html:"",id:"msg"},{type:"text",id:"input"}]}],buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]}}),a.dialog.add("SkippedFiles",function(a){return{title:a.lang.common.messageTitle,minWidth:400,minHeight:100,contents:[{id:"tab1",style:h.ie7Compat?"height: auto":"",expand:!0,padding:0,elements:[{type:"vbox",expand:!0,children:[{type:"html",className:"cke_dialog_msg",html:"",id:"msg"},{type:"html",id:"skippedDescription",className:"cke_dialog_msg",html:a.lang.SkippedFiles},{type:"html",id:"skippedList",className:"cke_dialog_msg",html:""}]}]}],buttons:[CKFinder.dialog.okButton]}})}})}(),o.add("dialogui"),function(){var b=function(a){var b=this;b._||(b._={}),b._.default=b._.hq=a.default||"";for(var c=[b._],d=1;d<arguments.length;d++)c.push(arguments[d]);return c.push(!0),k.extend.apply(k,c),b._},c={dQ:function(a,b,c){return new p.dialog.ju(a,b,c)}},d={dQ:function(a,b,c){return new p.dialog[b.type](a,b,c)}},e={isChanged:function(){return this.getValue()!=this.lu()},reset:function(){this.setValue(this.lu())},jW:function(){this._.hq=this.getValue()},ki:function(){this._.hq=this._.default},lu:function(){return this._.hq}},f=k.extend({},p.dialog.bf.prototype.dm,{onChange:function(a,b){this._.pL||(a.on("load",function(){this.getInputElement().on("change",function(){this.oW("change",{value:this.getValue()})},this)},this),this._.pL=!0),this.on("change",b)}},!0),g=/^on([A-Z]\w+)/,l=function(a){for(var b in a)(g.test(b)||"title"==b||"type"==b)&&delete a[b];return a};k.extend(p.dialog,{dD:function(c,d,e,f){if(!(arguments.length<4)){var g=b.call(this,d);g.hz=k.getNextNumber()+"_label";var i=(this._.children=[],function(){var b=[];if("horizontal"!=d.uC)b.push('<div class="cke_dialog_ui_labeled_label" id="',g.hz,'" >',d.label,"</div>",'<div class="cke_dialog_ui_labeled_content">',f(c,d),"</div>");else{var e={type:"hbox",widths:d.widths,padding:0,children:[{type:"html",html:'<span class="cke_dialog_ui_labeled_label" id="'+g.hz+'">'+k.htmlEncode(d.label)+"</span>"},{type:"html",html:'<span class="cke_dialog_ui_labeled_content">'+f(c,d)+"</span>"}]};a.dialog._.gv.hbox.dQ(c,e,b)}return b.join("")});p.dialog.bf.call(this,c,d,e,"div",null,null,i)}},ju:function(a,c,d){if(!(arguments.length<3)){b.call(this,c);var e=this._.le=k.getNextNumber()+"_textInput",f={class:"cke_dialog_ui_input_"+c.type,id:e,type:"text"};c.validate&&(this.validate=c.validate),c.maxLength&&(f.uy=c.maxLength),c.size&&(f.size=c.size);var h=this,i=!1;a.on("load",function(){h.getInputElement().on("keydown",function(a){13==a.data.db()&&(i=!0)}),h.getInputElement().on("keyup",function(b){13==b.data.db()&&i&&(a.getButton("ok")&&setTimeout(function(){a.getButton("ok").click()},0),i=!1)},null,null,1e3)});var j=function(){var a=['<div class="cke_dialog_ui_input_',c.type,'"'];c.width&&a.push('style="width:'+c.width+'" '),a.push("><input ");for(var b in f)a.push(b+'="'+f[b]+'" ');return a.push(" /></div>"),a.join("")};p.dialog.dD.call(this,a,c,d,j)}},textarea:function(a,c,d){if(!(arguments.length<3)){b.call(this,c);var e=this,f=this._.le=k.getNextNumber()+"_textarea",g={};c.validate&&(this.validate=c.validate),g.rows=c.rows||5,g.cols=c.cols||20;var h=function(){var a=['<div class="cke_dialog_ui_input_textarea"><textarea class="cke_dialog_ui_input_textarea" id="',f,'" '];for(var b in g)a.push(b+'="'+k.htmlEncode(g[b])+'" ');return a.push(">",k.htmlEncode(e._.default),"</textarea></div>"),a.join("")};p.dialog.dD.call(this,a,c,d,h)}},checkbox:function(a,c,d){if(!(arguments.length<3)){var e=b.call(this,c,{default:!!c.default});c.validate&&(this.validate=c.validate);var f=function(){var b=k.extend({},c,{id:c.id?c.id+"_checkbox":k.getNextNumber()+"_checkbox"},!0),d=[],f={class:"cke_dialog_ui_checkbox_input",type:"checkbox"};return l(b),c.default&&(f.checked="checked"),e.checkbox=new p.dialog.bf(a,b,d,"input",null,f),d.push(' <label for="',f.id,'">',k.htmlEncode(c.label),"</label>"),d.join("")};p.dialog.bf.call(this,a,c,d,"span",null,null,f)}},radio:function(a,c,d){if(!(arguments.length<3)){b.call(this,c),this._.default||(this._.default=this._.hq=c.items[0][1]),c.validate&&(this.validate=c.sh);var e=[],f=this,g=function(){for(var b=[],d=[],h=c.id?c.id+"_radio":k.getNextNumber()+"_radio",i=0;i<c.items.length;i++){var j=c.items[i],m=void 0!==j[2]?j[2]:j[0],n=void 0!==j[1]?j[1]:j[0],o=k.extend({},c,{id:k.getNextNumber()+"_radio_input",title:null,type:null},!0),q=k.extend({},o,{id:null,title:m},!0),r={type:"radio",class:"cke_dialog_ui_radio_input",name:h,value:n},s=[];f._.default==n&&(r.checked="checked"),l(o),l(q),e.push(new p.dialog.bf(a,o,s,"input",null,r)),s.push(" "),new p.dialog.bf(a,q,s,"label",null,{for:r.id},j[0]),b.push(s.join(""))}return new p.dialog.hbox(a,[],b,d),d.join("")};p.dialog.dD.call(this,a,c,d,g),this._.children=e}},button:function(c,d,e){if(arguments.length){"function"==typeof d&&(d=d(c.eY())),b.call(this,d,{disabled:d.disabled||!1}),a.event.du(this);var f=this;c.on("load",function(a){var b=this.getElement();!function(){b.on("click",function(a){f.oW("click",{dialog:f.getDialog()}),a.data.preventDefault()})}(),b.unselectable()},this);var g=k.extend({},d);delete g.style,p.dialog.bf.call(this,c,g,e,"a",null,{style:d.style,href:"javascript:void(0)",title:d.label,hp:"true",class:d.class},'<span class="cke_dialog_ui_button">'+k.htmlEncode(d.label)+"</span>")}},select:function(a,c,d){if(!(arguments.length<3)){var e=b.call(this,c);c.validate&&(this.validate=c.validate);var f=function(){var b=k.extend({},c,{id:c.id?c.id+"_select":k.getNextNumber()+"_select"},!0),d=[],f=[],g={class:"cke_dialog_ui_input_select"};void 0!=c.size&&(g.size=c.size),void 0!=c.multiple&&(g.multiple=c.multiple),l(b);for(var i,h=0;h<c.items.length&&(i=c.items[h]);h++)f.push('<option value="',k.htmlEncode(void 0!==i[1]?i[1]:i[0]),'" /> ',k.htmlEncode(i[0]));return e.select=new p.dialog.bf(a,b,d,"select",null,g,f.join("")),d.join("")};p.dialog.dD.call(this,a,c,d,f)}},file:function(c,d,e){if(!(arguments.length<3)){void 0===d.default&&(d.default="");var f=k.extend(b.call(this,d),{dg:d,buttons:[]});d.validate&&(this.validate=d.validate);var g=function(){f.gL=k.getNextNumber()+"_fileInput";var a=h.isCustomDomain(),b=['<iframe frameborder="0" allowtransparency="0" class="cke_dialog_ui_input_file" id="',f.gL,'" title="',d.label,'" src="javascript:void('];return b.push(a?"(function(){document.open();document.domain='"+document.domain+"';document.close();})()":"0"),b.push(')"></iframe>'),b.join("")};c.on("load",function(){a.document.getById(f.gL).getParent().addClass("cke_dialog_ui_input_file")}),p.dialog.dD.call(this,c,d,e,g)}},fileButton:function(a,c,d){if(!(arguments.length<3)){var f=(b.call(this,c),this);c.validate&&(this.validate=c.validate);var g=k.extend({},c),h=g.onClick;g.className=(g.className?g.className+" ":"")+"cke_dialog_ui_button",g.onClick=function(b){var d=c.for;h&&!1===h.call(this,b)||(a.getContentElement(d[0],d[1]).submit(),this.disable())},a.on("load",function(){a.getContentElement(c.for[0],c.for[1])._.buttons.push(f)}),p.dialog.button.call(this,a,g,d)}},html:function(){var a=/^\s*<[\w:]+\s+([^>]*)?>/,b=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,c=/\/$/;return function(d,e,f){if(!(arguments.length<3)){var h,j,k,g=[],i=e.html;if("<"!=i.charAt(0)&&(i="<span>"+i+"</span>"),e.focus){var l=this.focus;if(this.focus=function(){l.call(this),e.focus.call(this),this.oW("focus")},e.fM){var m=this.fM;this.fM=m}this.eA=!0}p.dialog.bf.call(this,d,e,g,"span",null,null,""),h=g.join(""),j=h.match(a),k=i.match(b)||["","",""],c.test(k[1])&&(k[1]=k[1].slice(0,-1),k[2]="/"+k[2]),f.push([k[1]," ",j[1]||"",k[2]].join(""))}}}()},!0),p.dialog.html.prototype=new p.dialog.bf,p.dialog.dD.prototype=k.extend(new p.dialog.bf,{rW:function(b){var c=a.document.getById(this._.hz);return c.iu()<1?new j.text(b,a.document).appendTo(c):c.getChild(0).$.nodeValue=b,this},vt:function(){var b=a.document.getById(this._.hz);return!b||b.iu()<1?"":b.getChild(0).getText()},dm:f},!0),p.dialog.button.prototype=k.extend(new p.dialog.bf,{click:function(){var a=this;return a._.disabled?(a.getElement().$.blur(),!1):a.oW("click",{dialog:a._.dialog})},enable:function(){this._.disabled=!1;var a=this.getElement();a&&a.removeClass("disabled")},disable:function(){this._.disabled=!0,this.getElement().addClass("disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()},isEnabled:function(){return!this._.disabled},dm:k.extend({},p.dialog.bf.prototype.dm,{onClick:function(a,b){this.on("click",b)}},!0),eZ:function(){this.click()},iU:function(){this.focus()},eA:!0},!0),p.dialog.ju.prototype=k.extend(new p.dialog.dD,{getInputElement:function(){return a.document.getById(this._.le)},focus:function(){var a=this.selectParentTab();setTimeout(function(){var b=a.getInputElement();b&&b.$.focus()},0)},select:function(){var a=this.selectParentTab();setTimeout(function(){var b=a.getInputElement();b&&(b.$.focus(),b.$.select())},0)},eZ:function(){this.select()},setValue:function(a){return a=null!==a?a:"",p.dialog.bf.prototype.setValue.call(this,a)},eA:!0},e,!0),p.dialog.textarea.prototype=new p.dialog.ju,p.dialog.select.prototype=k.extend(new p.dialog.dD,{getInputElement:function(){return this._.select.getElement()},add:function(a,b,c){var d=new m("option",this.getDialog().eY().document),e=this.getInputElement().$;return d.$.text=a,d.$.value=void 0===b||null===b?a:b,void 0===c||null===c?i?e.add(d.$):e.add(d.$,null):e.add(d.$,c),this},remove:function(a){return this.getInputElement().$.remove(a),this},clear:function(){for(var a=this.getInputElement().$;a.length>0;)a.remove(0);return this},eA:!0},e,!0),p.dialog.checkbox.prototype=k.extend(new p.dialog.bf,{getInputElement:function(){return this._.checkbox.getElement()},setValue:function(a){this.getInputElement().$.checked=a,this.oW("change",{value:a})},getValue:function(){return this.getInputElement().$.checked},eZ:function(){this.setValue(!this.getValue())},dm:{onChange:function(a,b){return i?(a.on("load",function(){var a=this._.checkbox.getElement();a.on("propertychange",function(b){b=b.data.$,"checked"==b.propertyName&&this.oW("change",{value:a.$.checked})},this)},this),this.on("change",b),null):f.onChange.apply(this,arguments)}},eA:!0},e,!0),p.dialog.radio.prototype=k.extend(new p.dialog.bf,{setValue:function(a){for(var c,b=this._.children,d=0;d<b.length&&(c=b[d]);d++)c.getElement().$.checked=c.getValue()==a;this.oW("change",{value:a})},getValue:function(){for(var a=this._.children,b=0;b<a.length;b++)if(a[b].getElement().$.checked)return a[b].getValue();return null},eZ:function(){var b,a=this._.children;for(b=0;b<a.length;b++)if(a[b].getElement().$.checked)return void a[b].getElement().focus();a[0].getElement().focus()},dm:{onChange:function(a,b){return i?(a.on("load",function(){for(var a=this._.children,b=this,c=0;c<a.length;c++){a[c].getElement().on("propertychange",function(a){a=a.data.$,"checked"==a.propertyName&&this.$.checked&&b.oW("change",{value:this.getAttribute("value")})})}},this),this.on("change",b),null):f.onChange.apply(this,arguments)}},eA:!0},e,!0),p.dialog.file.prototype=k.extend(new p.dialog.dD,e,{getInputElement:function(){var b=a.document.getById(this._.gL).getFrameDocument();return b.$.forms.length>0?new m(b.$.forms[0].elements[0]):this.getElement()},submit:function(){return this.getInputElement().getParent().$.submit(),this},vy:function(a){return this.getInputElement().getParent().$.action},reset:function(){function f(){c.$.open(),h.isCustomDomain()&&(c.$.domain=document.domain);var a="";d.size&&(a=d.size-(i?7:0)),c.$.write(['<html><head><title></title></head><body style="margin: 0; overflow: hidden; background: transparent;">','<form enctype="multipart/form-data" method="POST" action="',k.htmlEncode(d.action),'">','<input type="file" name="',k.htmlEncode(d.id||"cke_upload"),'" size="',k.htmlEncode(a>0?a:""),'" />',"</form>","</body></html>"].join("")),c.$.close();for(var b=0;b<e.length;b++)e[b].enable()}var b=a.document.getById(this._.gL),c=b.getFrameDocument(),d=this._.dg,e=this._.buttons;h.gecko?setTimeout(f,500):f()},getValue:function(){return""},dm:f,eA:!0},!0),p.dialog.fileButton.prototype=new p.dialog.button,a.dialog.addUIElement("text",c),a.dialog.addUIElement("password",c),a.dialog.addUIElement("textarea",d),a.dialog.addUIElement("checkbox",d),a.dialog.addUIElement("radio",d),a.dialog.addUIElement("button",d),a.dialog.addUIElement("select",d),a.dialog.addUIElement("file",d),a.dialog.addUIElement("fileButton",d),a.dialog.addUIElement("html",d),k.extend(CKFinder.dialog,a.dialog)}(),function(){o.add("help",{bM:["toolbar","button"],bz:function(c){c.config.disableHelpButton||(c.bD("help",{exec:function(b){b.ld["filesview.filesview"].bn().focus(),window.open(a.basePath+"help/"+(b.lang.HelpLang||"en")+"/index.html")}}),c.bY.add("Help",a.UI_BUTTON,{label:c.lang.Help,command:"help"}))}})}(),function(){function q(a,b,c,d,e){for(var f=0,g=0,h=[],i=0;i<a.length;i++)d&&!d(a[i])||(h.push('<a href="',b.folder.getUrl(),encodeURIComponent(a[i].name),'" title="',a[i].name,'" rel="',c,'">a</a>'),a[i].isSameFile(b)&&(f=g),g++);return t(),p=new m("div",e),p.setAttribute("id","ckf_gallery"),p.setHtml(h.join("")),p.appendTo(e.bH()),p.hide(),f}function r(b){if(b&&b.inPopup){var c=new l(b.document),d=c.getWindow();if(!i&&!h.opera||d.$.top.location.href.match(/ckfinder.html/)||"CKFinderpopup"==d.$.top.name)return c}return a.oC}function s(a){return function(){a.$.activeElement&&a.$.activeElement.blur(),a.$.activeElement&&a.$.activeElement.blur(),h.gecko||(a.getWindow().focus(),a.bH().focus())}}function t(){p&&p.remove()}function u(a){return function(){t(),a&&a.focus(!0,!0)}}function v(b){if(b.click)b.click();else if(a.document.$.createEvent){var c=a.document.$.createEvent("MouseEvents");c.initEvent("click",!0,!0),b.dispatchEvent(c)}}function w(a,b,c){i&&h.version<9?a.$.onreadystatechange=function(){"loaded"!=this.readyState&&"complete"!=this.readyState||setTimeout(function(){b.callee.apply(c,b)},0)}:a.on("load",function(){setTimeout(function(){b.callee.apply(c,b)},0)})}function x(a,h){if(!a||!a.inPopup){a&&a.ld["filesview.filesview"].on("afterRenderFiles",t);var i=r(h).getWindow().$;void 0!==i.jQuery&&i.jQuery.fn.colorbox?g=b:void 0!==i.jQuery&&i.jQuery.fn.fancybox?g=c:void 0!==i.jQuery&&i.jQuery.fn.prettyPhoto?g=d:void 0!==i.Shadowbox?g=e:void 0!==i.Prototype&&void 0!==i.Lightbox&&(g=f),g&&(j=1)}}var o,p,b=1,c=2,d=3,e=4,f=5,g=0,j=0,n=[];CKFinder.addPlugin("gallery",{bM:["filesview"],appReady:function(){g=0,j=0,n=[],o=null,p=null},galleryCallback:function(a,h,i){j||x(null,a);var l=r(a),y=l.getWindow().$,z=function(a){return a.isImage()};if(!g&&a.config.gallery_autoLoad){if(!z(h))return!1;var D,A=l.getHead(),B=CKFinder.getPluginPath("gallery")+"colorbox/",C=arguments,E=void 0===y.jQuery;if(!E){var F=y.jQuery.fn.jquery.split("."),G=parseInt(F[0],10),H=parseInt(F[1],10),I=parseInt(F[2]||0,10);(G<1||1==G&&H<4||1==G&&4==H&&I<3)&&(E=!0)}return E?(y.jQuery&&(n=[y.jQuery,y.$]),D=new m("script",l),D.setAttribute("type","text/javascript"),D.setAttribute("src",B+"jquery.min.js"),w(D,C,y),D.appendTo(A),!0):(l.appendStyleSheet(B+"colorbox.css"),D=new m("script",l),D.setAttribute("type","text/javascript"),D.setAttribute("src",B+"jquery.colorbox-min.js"),w(D,C,y),D.appendTo(A),!0)}if(n.length&&(o=y.jQuery.noConflict(!0),y.jQuery=n[0],y.$=n[1],n=[]),o||(o=y.jQuery),g){var K,J=k.getNextNumber(),L="ckf_gallery_"+J;switch(g){case b:if(!z(h))return!1;K=q(i,h,L,z,l),o("#ckf_gallery a").colorbox(k.extend({minWidth:"300",minHeight:"200",maxWidth:"95%",maxHeight:"95%",scalePhotos:!0,current:a.lang.Gallery.current},a.config.gallery_config,{rel:L,group:L,onClosed:u(h),onOpen:s(l)},!0)).eq(K).click();break;case c:if(!(z=function(a){return a.isImage()||"swf"==a.ext})(h))return!1;K=q(i,h,L,z,l),y.jQuery("#ckf_gallery a").fancybox(k.extend({},a.config.gallery_config,{onClosed:t,onComplete:s(l),afterClose:u(h),afterShow:s(l)},!0)).eq(K).click();break;case d:if(!(z=function(a){return a.isImage()||"swf"==a.ext||"mov"==a.ext})(h))return!1;K=q(i,h,"prettyPhoto[ckf_gallery_"+J+"]",z,l),y.jQuery("#ckf_gallery a").prettyPhoto(k.extend({},a.config.gallery_config,{callback:u(h),changepicturecallback:s(l)},!0)).eq(K).click();break;case e:if(!(z=function(a){return a.isImage()||"swf"==a.ext||"mov"==a.ext})(h))return!1;K=q(i,h,L,z,l),y.Shadowbox.qi("#ckf_gallery a",k.extend({},a.config.gallery_config,{gallery:L,onClose:u(h),onFinish:s(l)},!0)),v(p.eG("a").getItem(K).$);break;case f:if(!z(h))return!1;K=q(i,h,"lightbox[ckf_gallery_"+J+"]",z,l),v(p.eG("a").getItem(K).$);break;default:return!1}return!0}return!1},bz:x})}(),n.gallery_autoLoad=!0,function(){function b(b){if(!b||b.type!=a.cv||"form"!=b.getName())return[];for(var c=[],d=["style","className"],e=0;e<d.length;e++){var f=d[e],g=b.$.elements.namedItem(f);if(g){var h=new m(g);c.push([h,h.nextSibling]),h.remove()}}return c}function c(b,c){if(b&&b.type==a.cv&&"form"==b.getName()&&c.length>0)for(var d=c.length-1;d>=0;d--){var e=c[d][0],f=c[d][1];f?e.insertBefore(f):e.appendTo(b)}}function d(a,d){var e=b(a),f={},g=a.$;return d||(f.class=g.className||"",g.className=""),f.inline=g.style.cssText||"",d||(g.style.cssText="position: static; overflow: visible"),c(e),f}function e(a,d){var e=b(a),f=a.$;"class"in d&&(f.className=d.class),"inline"in d&&(f.style.cssText=d.inline),c(e)}var f=null,g=null;o.add("maximize",{bz:function(b){function t(a){var c=n.eR();if(!a&&o&&(a=[o]),a){for(var d=0,e=a.length;d<e;d++)a[d].setStyles({width:c.width+"px",height:c.height+"px"});b.oW("resize")}else b.resize(c.width,c.height)}var o,r,s,c=b.lang.Maximize,j=a.oC,n=j.getWindow(),p=[0,0,0,0],q={};o=a.document.getWindow().$;try{o=o.frameElement}catch(a){o=null}o=o&&new m(o),o&&!o.getFrameDocument().bH().hasClass("CKFinderFrameWindow")&&(o=null),b.bD("maximize",{oD:!1,exec:function(){var j=b.document.getWindow().$;if(b.cg.inPopup&&(!i&&!h.opera||j.top.location.href.match(/ckfinder.html/)||"CKFinderpopup"==j.top.name)){var j=b.document.getWindow().$.parent;this.bu==a.aS?(p[2]=j.screenLeft||j.screenX,p[3]=j.screenTop||j.screenY,j.moveTo(0,0),g||(g=[j.screenLeft||j.screenX,j.screenTop||j.screenY]),p[2]-=g[0],p[3]-=g[1],j.outerHeight?(p[0]=j.outerWidth,p[1]=j.outerHeight):(p[0]=j.document.body.scrollWidth,p[1]=j.document.body.scrollHeight,f||(j.resizeTo(j.screen.availWidth,j.screen.availHeight),f=[j.screen.availWidth-j.document.body.scrollWidth,j.screen.availHeight-j.document.body.scrollHeight]),p[0]+=f[0],p[1]+=f[1]),j.resizeTo?j.resizeTo(j.screen.availWidth,j.screen.availHeight):(j.outerHeight=j.screen.availHeight,j.outerWidth=j.screen.availWidth)):(j.resizeTo?j.resizeTo(p[0],p[1]):(j.outerWidth=p[0],j.outerHeight=p[1]),j.moveTo(p[2],p[3]))}else{var u=o||b.container;if(this.bu==a.aS){r=n.hV();for(var w,v=u;v=v.getParent();)w=k.getNextNumber(),q[w]=d(v),v.$.og=w,v.is("html","body")&&v.setStyle("overflow","hidden"),v.setStyle("z-index",b.config.baseFloatZIndex-1);w=k.getNextNumber(),q[w]=d(u,!0),u.$.og=w;for(var x=[u],j=u.getDocument().getWindow().$;j.frameElement;)x.push(m.eB(j.frameElement)),j=j.parent;s=function(){t(x)},n.on("resize",s);var y=new l(j.document),z={overflow:h.webkit?"":"hidden",width:0,height:0};y.gT().setStyles(z),!h.gecko&&y.gT().setStyle("position","fixed"),y.bH().setStyles(z),i?setTimeout(function(){n.$.scrollTo(0,0)},0):n.$.scrollTo(0,0);for(var A,B=0,C=x.length;B<C;B++)A=x[B],A.setStyle("position","absolute"),A.$.offsetLeft,A.setStyles({"z-index":b.config.baseFloatZIndex-1,left:"0px",top:"0px"});x[0].addClass("cke_maximized"),t(x);var D=x[0].ir();x[0].setStyles({left:-1*D.x+"px",top:-1*D.y+"px"})}else{n.removeListener("resize",s);for(var v=u;v;)e(v,q[v.$.og]),v.$.og=null,v=v.getParent();q={},i?setTimeout(function(){n.$.scrollTo(r.x,r.y)},0):n.$.scrollTo(r.x,r.y),u.removeClass("cke_maximized"),h.webkit&&(u.setStyle("display","inline"),setTimeout(function(){u.setStyle("display","block")},0)),b.oW("resize")}}this.rJ();var E=this.pW[0];if(E){var F=this.bu==a.aS?c.maximize:c.minimize,G=b.document.getById(E._.id);G.getChild(1).setHtml(F),G.setAttribute("title",F),G.setAttribute("href",'javascript:void("'+F+'");')}}}),b.bY.qW("Maximize",{label:c.maximize,command:"maximize"})}})}(),function(){function b(a,b){for(var c=0,d=b.length;c<d;c++)if(b[c].name&&b[c].name===a)return!0;return!1}var a={};CKFinder.addPlugin("zip",{uiReady:function(c){var d=c.lang.Zip;CKFinder.dialog.add("compressToFileName",function(a){var b=a.getSelectedFolder();return{title:a.lang.DestinationFile,minWidth:270,minHeight:60,contents:[{id:"tab1",label:"",title:"",expand:!0,style:CKFinder.env.ie7Compat?"height:auto":"",padding:0,elements:[{id:"msg",className:"cke_dialog_error_msg",type:"html",html:a.lang.FileRename},{type:"hbox",widths:["90%","10%"],padding:0,children:[{type:"text",label:"",id:"fileName",default:b.name,validate:function(){if(!this.getValue())return a.openMsgDialog("",a.lang.ErrorMsg.FileEmpty),!1}},{type:"html",html:".zip",id:"fileNameExt",onLoad:function(){this.getElement().getParent().setStyles({"vertical-align":"bottom","padding-bottom":"2px"})}}]}]}],buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]}}),CKFinder.dialog.add("unzipDirExists",function(b){var c=b.getSelectedFolder(),e=[[b.lang.ManuallyRename,"manuallyrename"]];return c.acl.fileDelete&&c.acl.fileRename&&c.acl.folderRename&&c.acl.folderDelete&&e.push([d.removeAndExtract,"overwrite"],[d.extractAndOverwrite,"merge"]),{title:b.lang.ErrorMsg.FolderNameExists,minWidth:270,minHeight:60,contents:[{id:"tab1",label:"",title:"",expand:!0,style:CKFinder.env.ie7Compat?"height:auto":"",padding:0,elements:[{id:"msg",className:"cke_dialog_error_msg",type:"html",html:""},{type:"hbox",className:"cke_dialog_file_exist_options",children:[{label:b.lang.common.makeDecision,type:"radio",id:"option",default:"manuallyrename",items:e}]}]}],onOk:function(){var c=this,d=c.getValueOf("tab1","option");return"manuallyrename"==d&&(d=null),a.extractTo(b.getSelectedFile(),d),!0},onCancel:function(){return a.ma(c),!0},buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]}}),CKFinder.dialog.add("unzipFileExists",function(b){var c=b.getSelectedFolder();return{title:b.lang.FileExistsDlgTitle,minWidth:350,minHeight:120,contents:[{id:"tab1",label:"",title:"",style:CKFinder.env.ie7Compat?"height:auto":"",expand:!0,padding:0,elements:[{id:"msg",className:"cke_dialog_error_msg",type:"html",widths:["70%","30%"],html:""},{type:"hbox",className:"cke_dialog_file_exist_options",children:[{type:"radio",id:"option",label:b.lang.common.makeDecision,default:"autorename",items:[[b.lang.FileAutorename,"autorename"],[b.lang.FileOverwrite,"overwrite"],[b.lang.common.skip,"skip"]]}]},{type:"hbox",className:"cke_dialog_remember_decision",children:[{type:"checkbox",id:"remember",label:b.lang.common.rememberDecision}]}]}],onCancel:function(){return a.ma(c),!0},buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]}}),CKFinder.dialog.add("compressFileExists",function(b){var c=b.getSelectedFolder(),d=[[b.lang.ManuallyRename,"manuallyrename"]];return c.acl.fileDelete&&c.acl.fileRename&&d.push([b.lang.FileAutorename,"autorename"],[b.lang.FileOverwrite,"overwrite"]),{title:b.lang.FileExistsDlgTitle,minWidth:270,minHeight:60,contents:[{id:"tab1",label:"",title:"",expand:!0,style:CKFinder.env.ie7Compat?"height:auto":"",padding:0,elements:[{id:"msg",className:"cke_dialog_error_msg",type:"html",html:""},{type:"hbox",className:"cke_dialog_file_exist_options",children:[{label:b.lang.common.makeDecision,type:"radio",id:"option",default:"manuallyrename",items:d}]}]}],onOk:function(){var c=this,d=c.getValueOf("tab1","option");return"manuallyrename"==d&&(d=null),a.nX(b.getSelectedFolder(),a.pp.download,d),!0},onCancel:function(){return a.ma(c),!0},buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]}}),c.connector.app.dZ("zip",112),a={rQ:{iz:/[\\\/:\*\?"<>\|]/},iG:{extractHere:{label:d.extractHereLabel,command:"ExtractHere",group:"zip",icon:CKFinder.getPluginPath("zip")+"images/zip.gif"},extractTo:{label:d.extractToLabel,command:"ExtractTo",group:"zip",icon:CKFinder.getPluginPath("zip")+"images/zip.gif"},downloadZip:{label:d.downloadZipLabel,command:"DownloadZip",group:"zip",icon:CKFinder.getPluginPath("zip")+"images/zip.gif"},compressZip:{label:d.compressZipLabel,command:"CompressZip",group:"zip",icon:CKFinder.getPluginPath("zip")+"images/zip.gif"}},ma:function(a){a.getChildren(function(b){a.close(),a.showFiles(),a.open()},!0)},oc:function(b){return b&&b.length?!!a.rQ.iz.test(b)&&c.lang.ErrorMsg.FolderInvChar:c.lang.ErrorMsg.FolderEmpty},nI:function(d){if(!a.filesList[a.currentItem])return void a.extractHere(c.getSelectedFile(),!0);var e=[{name:"skip"},{name:"ok"}];if(a.filesList[a.currentItem].options&&b(a.filesList[a.currentItem].options,e))return a.currentItem++,void c.openDialog("unzipFileExists",a.nI);d.show();var f=c.lang.ErrorMsg["Folder"==a.filesList[a.currentItem].type?"FolderExists":"FileExists"];f="<strong>"+f.replace("%s",a.filesList[a.currentItem].name)+"</strong>",d.getContentElement("tab1","msg").getElement().setHtml(f),d.on("ok",function(b){b.removeListener();var e=d.getValueOf("tab1","remember"),f=d.getValueOf("tab1","option");if(e){for(var g=0,h=a.filesList.length;g<h;g++)a.filesList[g].options||(a.filesList[g].options=f);return void a.extractHere(c.getSelectedFile(),!0)}for(a.filesList[a.currentItem].options=f,a.currentItem++;a.currentItem<a.filesList.length&&a.filesList[a.currentItem].options&&(!a.filesList[a.currentItem].options||"skip"==a.filesList[a.currentItem].options);)a.currentItem++;return a.currentItem<a.filesList.length?void setTimeout(function(){c.openDialog("unzipFileExists",a.nI)},0):void a.extractHere(c.getSelectedFile(),!0)})},extract:function(b){var e={},f=b.file;b.extra&&(e=b.extra),e.fileName=b.file.name,c.connector.sendCommandPost(b.action,null,e,function(b){if(a.filesList=[],303==b.getErrorNumber()){a.currentItem=0;for(var h,e=b.selectNodes("Connector/Errors/Error"),f=b.selectNodes("Connector/UnzippedFiles/File"),g=0,i=0,j=e.length;i<j;i++)h="skip",115==e[i].getAttribute("code")&&(g=1,h=null),a.filesList[i]={name:e[i].getAttribute("name"),options:h,type:e[i].getAttribute("type"),code:e[i].getAttribute("code")};for(var k=0,j=f.length;k<j;k++,i++)a.filesList[i]={name:f[k].getAttribute("name"),options:f[k].getAttribute("action"),type:"File",code:0};if(g)return void c.openDialog("unzipFileExists",a.nI)}else if(b.checkError())return;var l=b.selectNodes("Connector/FolderExists/Folder");if(l&&l.length)return void c.openDialog("unzipDirExists",function(a){a.show();var b=c.lang.FolderNameExists;b="<strong>"+b.replace("%s",l[0].getAttribute("name"))+"</strong>",a.getContentElement("tab1","msg").getElement().setHtml(b)});var f=b.selectNodes("Connector/UnzippedFiles/File");if(f&&f.length){for(var m=[],i=0,n=f.length;i<n;i++)"skip"==f[i].getAttribute("action")&&m.push(f[i].getAttribute("name"));if(a.filesList)for(var i=0,n=a.filesList.length;i<n;i++)m.push(a.filesList[i].name);if(m.length)return c.openSkippedFilesDialog(null,m,d.extractSuccess),a.ma(c.getSelectedFolder()),!0}return c.openMsgDialog("OK",d.extractSuccess),a.ma(c.getSelectedFolder()),!0},f.folder.type,f.folder)},extractHere:function(b,e){if(e){for(var f=!1,g=0,h=a.filesList.length;g<h;g++)if(115==a.filesList[g].code&&"skip"!=a.filesList[g].options){f=!0,e={};for(var g=0,h=a.filesList.length;g<h;g++)e["files["+g+"][name]"]=a.filesList[g].name,e["files["+g+"][options]"]=a.filesList[g].options;break}if(!f){for(var i=[],g=0,h=a.filesList.length;g<h;g++)i.push(a.filesList[g].name);return void c.openSkippedFilesDialog(null,i,d.extractSuccess,function(){return a.ma(c.getSelectedFolder()),!0})}}e=e||{},a.extract({action:"ExtractHere",file:b,extra:e})},extractTo:function(d,e){if(e)return void a.extract({action:"ExtractTo",file:d,extra:{extractDir:a.extractDir||"/",force:e}});c.openInputDialog(c.lang.DestinationFolder,c.lang.FolderRename,"",function(f){var g=c.getSelectedFolder(),f=CKFinder.tools.trim(f),h=a.oc(f);if(h)return c.openConfirmDialog("",h,function(b){a.extractTo(d,e)}),!1;a.extractDir=f,g.hasChildren?g.getChildren(function(e){if(b(f,e))return void c.openDialog("unzipDirExists",function(a){a.show();var b=c.lang.ErrorMsg.FolderExists;b="<strong>"+b.replace("%s",f)+"</strong>",a.getContentElement("tab1","msg").getElement().setHtml(b)});a.extract({action:"ExtractTo",file:d,extra:{extractDir:f}})},!0):(g.createNewFolder(f),a.extract({action:"ExtractTo",file:d,extra:{extractDir:f}}))})},downloadZip:function(a,b,d){var e=c.connector.composeUrl("DownloadZip",{FileName:a,ZipName:b},d.type,d);c.connector.app.ld["filesview.filesview"].tools.downloadFile(new CKFinder.dom.document(c.document),e)},oH:function(b,d){c.connector.sendCommandPost("CreateZip",null,d,function(c){if(!c.checkError()){if(d.download){var e=c.selectSingleNode("Connector/ZipFile");if(e){var e=e.getAttribute("name");return a.downloadZip(e,d.zipName,b)}}a.ma(b)}},b.type,b)},nX:function(d,e,f,g){var h={zipName:d.name+".zip",download:e};if(g)for(var i=0,j=g.length;i<j;i++)h["files["+i+"][name]"]=g[i].name,h["files["+i+"][type]"]=g[i].folder.type,h["files["+i+"][folder]"]=g[i].folder.getPath();if(f)return h=a.pp,h.fileExistsAction=f,a.oH(d,h);if(d.isBasket||e){if(d.isBasket&&void 0===g){h.zipName="basket.zip";for(var i=0,j=c.basketFiles.length;i<j;i++)h["files["+i+"][name]"]=c.basketFiles[i].name,h["files["+i+"][type]"]=c.basketFiles[i].folder.type,h["files["+i+"][folder]"]=c.basketFiles[i].folder.getPath()}return d.isBasket&&(d=c.folders[1],h.basket=!0),a.oH(d,h)}c.openDialog("compressToFileName",function(f){f.show(),f.getContentElement("tab1","fileName").getElement().setValue(d.name),f.on("ok",function(g){g.removeListener();var i=f.getValueOf("tab1","fileName");i=CKFinder.tools.trim(i)+".zip";var j=a.oc(i);if(j)return c.openConfirmDialog("",j,function(b){a.nX(d,e)}),!1;h.zipName=i,d.getFiles(function(e){if(b(i,e))return a.pp=h,c.openDialog("compressFileExists",function(a){a.show();var b=c.lang.ErrorMsg.FileExists;b="<strong>"+b.replace("%s",i)+"</strong>",a.getContentElement("tab1","msg").getElement().setHtml(b)}),!1;a.oH(d,h)},!0)})})}},c.addFileContextMenuOption(a.iG.extractHere,function(b,c){a.extractHere(c)},function(a){if(c.getSelectedFolder().isBasket)return!1;var d=c.getSelectedFiles();return!("zip"!==a.ext.toLowerCase()||c.config.selectMultiple&&d.length>1)&&(!(!a.folder.acl.fileUpload||!a.folder.acl.folderCreate)||-1)}),c.addFileContextMenuOption(a.iG.extractTo,function(b,c){a.extractTo(c)},function(a){if(c.getSelectedFolder().isBasket)return!1;var d=c.getSelectedFiles();return!("zip"!==a.ext.toLowerCase()||c.config.selectMultiple&&d.length>1)&&(!(!a.folder.acl.fileUpload||!a.folder.acl.folderCreate)||-1)}),c.addFileContextMenuOption(a.iG.compressZip,function(b,c){var d=b.getSelectedFiles(),e=b.getSelectedFolder();a.nX(e,!1,!1,d)},function(a){var b=c.getSelectedFolder();if(b.isBasket)return!1;var d=c.getSelectedFiles();return!(!c.config.selectMultiple||d.length<2)&&(!!(a.folder.acl.fileUpload&&a.folder.acl.folderCreate&&b.getResourceType().isExtensionAllowed("zip"))||-1)}),c.addFileContextMenuOption(a.iG.downloadZip,function(b,c){var d=b.getSelectedFiles(),e=b.getSelectedFolder();a.nX(e,!0,!1,d)},function(a){var b=c.getSelectedFiles();return!(!c.config.selectMultiple||b.length<2)&&(!!a.folder.acl.fileUpload||-1)}),c.addFolderContextMenuOption(a.iG.compressZip,function(b,c){a.nX(c,!1)},function(a){return!a.isBasket&&(!(!a.acl.fileUpload||!a.getResourceType().isExtensionAllowed("zip")||!c.files.length&&!a.hasChildren)||-1)}),c.addFolderContextMenuOption(a.iG.downloadZip,function(b,c){a.nX(c,!0)},function(a){return a.isBasket?!!a.app.basketFiles.length||-1:!(!a.acl.fileUpload||!c.files.length&&!a.hasChildren)||-1}),c.connector.app.ld["filesview.filesview"].on("beforeContextMenu",function(a){c.getSelectedFiles().length>1&&delete a.data.bj.downloadFile})},basketToolbar:[["DownloadZip",{label:"downloadZipLabel",icon:CKFinder.getPluginPath("zip")+"images/zip.gif",onClick:function(b){var c=b.getSelectedFolder();c.app.basketFiles.length&&a.nX(c,!0)},disableEmpty:!0}]]})}(),a.skins.add("kama",function(){var b=["images/loaders/16x16.gif","images/loaders/32x32.gif","images/ckffolder.gif","images/ckffolderopened.gif"];return i&&h.version<7&&b.push("images/sprites_ie6.png"),{ls:b,application:{css:["app.css"]},host:{qx:1,css:["host.css"]},mA:7,kN:7,ps:1,bz:function(b){function f(a){var b=a.getHead().append("style");return b.setAttribute("id","cke_ui_color"),b.setAttribute("type","text/css"),b}function g(a,b,c){for(var d,e,f,g=0;g<a.length;g++)if(h.webkit){for(e=0;e<a[g].$.sheet.rules.length;e++)a[g].$.sheet.removeRule(e);for(e=0;e<b.length;e++){for(f=b[e][1],d=0;d<c.length;d++)f=f.replace(c[d][0],c[d][1]);a[g].$.sheet.addRule(b[e][0],f)}}else{for(f=b,d=0;d<c.length;d++)f=f.replace(c[d][0],c[d][1]);i?a[g].$.styleSheet.cssText=f:a[g].setHtml(f)}}b.config.width&&!isNaN(b.config.width)&&(b.config.width-=12);var c=[],d="/* UI Color Support */.cke_skin_kama .cke_menuitem .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a:focus .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a:active .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover .cke_label,.cke_skin_kama .cke_menuitem a:focus .cke_label,.cke_skin_kama .cke_menuitem a:active .cke_label{\tbackground-color: $color !important;}.cke_skin_kama .cke_menuitem a.cke_disabled:hover .cke_label,.cke_skin_kama .cke_menuitem a.cke_disabled:focus .cke_label,.cke_skin_kama .cke_menuitem a.cke_disabled:active .cke_label{\tbackground-color: transparent !important;}.cke_skin_kama .cke_menuitem a.cke_disabled:hover .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a.cke_disabled:focus .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a.cke_disabled:active .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuitem a.cke_disabled .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuseparator{\tbackground-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover,.cke_skin_kama .cke_menuitem a:focus,.cke_skin_kama .cke_menuitem a:active{\tbackground-color: $color !important;}";if(h.webkit){d=d.split("}").slice(0,-1);for(var e=0;e<d.length;e++)d[e]=d[e].split("{")}var j=/\$color/g;k.extend(b,{uiColor:null,rk:function(){return this.uiColor},setUiColor:function(e){var i,k,l=f(a.oC),m=f(this.document),n=".cke_"+b.name.replace(".","\\."),o=[n+" .cke_wrapper",n+"_dialog .cke_dialog_contents",n+"_dialog a.cke_dialog_tab",n+"_dialog .cke_dialog_footer"].join(","),p="background-color: $color !important;";return h.webkit?(i=[[o,p]],k=[["body,"+o,p]]):(i=o+"{"+p+"}",k="body,"+o+"{"+p+"}"),(this.setUiColor=function(a){var e=[[j,a]];b.uiColor=a,g([l],i,e),g([m],k,e),g(c,d,e)})(e)}}),b.on("menuShow",function(a){var e=a.data[0],h=e.element.eG("iframe").getItem(0).getFrameDocument();if(!h.getById("cke_ui_color")){var i=f(h);c.push(i);var k=b.rk();k&&g([i],d,[[j,k]])}}),b.config.uiColor&&b.on("uiReady",function(){b.setUiColor(b.config.uiColor)})}}}()),function(){function b(){a.dialog.on("resize",function(a){var b=a.data,c=b.width,d=b.height,e=b.dialog,f=e.bO.contents;"kama"==b.skin&&(f.setStyles({width:c+"px",height:d+"px"}),setTimeout(function(){var a=e.bO.dialog.getChild([0,0,0]),b=a.getChild(0),c=a.getChild(2);c.setStyle("width",b.$.offsetWidth+"px"),c=a.getChild(7),c.setStyle("width",b.$.offsetWidth-28+"px"),c=a.getChild(4),c.setStyle("height",b.$.offsetHeight-31-14+"px"),c=a.getChild(5),c.setStyle("height",b.$.offsetHeight-31-14+"px")},100))})}a.dialog?b():a.on("dialogPluginReady",b)}(),a.skins.add("v1",function(){var a=["images/loaders/16x16.gif","images/loaders/32x32.gif","images/ckffolder.gif","images/ckffolderopened.gif"];return i&&h.version<7&&a.push("images/sprites_ie6.png"),{ls:a,application:{css:["app.css"]},ps:1,rv:-8,kN:0,host:{qx:1,css:["host.css"]}}}()),function(){function b(){a.dialog.on("resize",function(a){var b=a.data,c=b.width,d=b.height,e=b.dialog,f=e.bO.contents;"v1"==b.skin&&(f.setStyles({width:c+"px",height:d+"px"}),setTimeout(function(){var a=e.bO.dialog.getChild([0,0,0]),b=a.getChild(0),c=a.getChild(2);c.setStyle("width",b.$.offsetWidth+"px"),c=a.getChild(7),c.setStyle("width",b.$.offsetWidth-28+"px"),c=a.getChild(4),c.setStyle("height",b.$.offsetHeight-31-14+"px"),c=a.getChild(5),c.setStyle("height",b.$.offsetHeight-31-14+"px")},100))})}a.dialog?b():a.on("dialogPluginReady",b)}(),a.gc.add("default",function(){return{dQ:function(b){function q(){h.ie6Compat&&(b.layout.oG=b.document.getWindow().eR())}var d=(b.name,b.element),e=b.ff;if(d&&e!=a.kZ){b.layout=new a.application.layout(b);var f=b.oW("themeSpace",{space:"head",html:""}),g=b.oW("themeSpace",{space:"sidebar",html:""}),j=b.oW("themeSpace",{space:"mainTop",html:""}),l=b.oW("themeSpace",{space:"mainMiddle",html:""}),m=b.oW("themeSpace",{space:"mainBottom",html:""}),n=b.config.skin.indexOf(","),o=(-1==n?b.config.skin:b.config.skin.substr(0,n))||"kama",p='<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html lang="'+b.lang.LangCode+'" dir="'+b.lang.dir+'"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />'+f.html+"</head><body>"+(h.ie6Compat?'<div id="ckfinder" role="application">':'<div id="ckfinder" role="application" style="visibility: hidden">')+'\x3c!-- 1. CKE Skin class. --\x3e<div class="fake_wrapper cke_skin_'+o+'">\x3c!-- 2. High contrast class. --\x3e<div class="fake_wrapper">\x3c!-- Applicable: hc cke_hc --\x3e\x3c!-- 3. Browser class. --\x3e<div class="fake_wrapper '+h.cssClass+'">\x3c!-- 4. RTL class. --\x3e<div class="fake_wrapper cke_'+("ltr"==b.lang.dir||i&&h.version<8?"ltr":"rtl")+'">\x3c!-- Applicable: rtl cke_rtl --\x3e\x3c!-- 5. Layout class. --\x3e<div class="fake_wrapper"><div id="ckfinder_view" class="columns_2">\x3c!-- Applicable: columns_1 columns_2 --\x3e<div id="sidebar_container" class="container" role="region"'+(b.config.sidebarWidth?' style="width: '+k.cssLength(b.config.sidebarWidth)+'"':"")+'><div id="sidebar_wrapper" class="wrapper">'+g.html+'</div></div><div id="main_container" class="container" role="region">'+j.html+l.html+m.html+"</div></div></div></div></div></div></div></div></body></html>";a.log("[THEME] DOM flush using document.write"),b.document.$.write(p),b.cr("themeLoaded"),b.cr("uiReady",function(){q(),b.cr("appReady",function(){function g(){f=f||b.document.getHead().eG("link").getItem(0);var a=0;if(f)try{f.$.sheet&&f.$.sheet.cssRules.length>0?a=1:f.$.styleSheet&&f.$.styleSheet.cssText.length>0?a=1:f.$.innerHTML&&f.$.innerHTML.length>0&&(a=1)}catch(a){}if(!a)return void window.setTimeout(g,250);h.ie6Compat?(q(),b.layout.ea(),setTimeout(function(){b.layout.ea()},500)):(b.layout.ea(!0),setTimeout(function(){b.document.getById("ckfinder").removeStyle("visibility")}))}if(q(),h.ie8){var c,a=b.document.$;if(a.documentMode?c=a.documentMode:(c=5,a.compatMode&&"CSS1Compat"==a.compatMode&&(c=7)),c<8){var e=b.plugins.tools;e.showTool(e.addTool('<strong style="color: red;">Forced IE compatibility mode! CKFinder may not look as intended.</strong>'))}}h.ie6Compat&&b.document.getWindow().on("resize",q),b.document.getWindow().on("resize",function(){b.layout.ea.call(b.layout)});var f;g()})})}},pu:function(b){var c=k.getNextNumber(),d=m.kE(['<div class="cke_compatibility cke_'+b.name.replace(".","\\.")+"_dialog cke_skin_",b.gd,'" dir="',b.lang.dir,'" lang="',b.langCode,'"><table class="cke_dialog'," "+h.cssClass.replace(/browser/g,"cke_browser")," cke_",b.lang.dir,'" style="position:absolute"><tr><td><div class="%body"><div id="%title#" class="%title"></div><div id="%close_button#" class="%close_button"><span>X</span></div><div id="%tabs#" class="%tabs"></div><table class="%contents"><tr><td id="%contents#" class="%contents"></td></tr></table><div id="%footer#" class="%footer"></div></div><div id="%tl#" class="%tl"></div><div id="%tc#" class="%tc"></div><div id="%tr#" class="%tr"></div><div id="%ml#" class="%ml"></div><div id="%mr#" class="%mr"></div><div id="%bl#" class="%bl"></div><div id="%bc#" class="%bc"></div><div id="%br#" class="%br"></div></td></tr></table>',i?"":"<style>.cke_dialog{visibility:hidden;}</style>","</div>"].join("").replace(/#/g,"_"+c).replace(/%/g,"cke_dialog_"),a.document),e=d.getChild([0,0,0,0,0]),f=e.getChild(0),g=e.getChild(1);return f.unselectable(),g.unselectable(),{element:d,bO:{dialog:d.getChild(0),title:f,close:g,tabs:e.getChild(2),contents:e.getChild([3,0,0,0]),footer:e.getChild(4)}}},destroy:function(b){var c=b.container,d=b.ia;c&&c.remove();for(var e=0;d&&e<d.length;e++)d[e].remove();b.element&&(b.ff==a.fc&&b.element.remove(),delete b.element)}}}()),a.application.prototype.vU=function(b){var c=""+b;return this._[c]||(this._[c]=a.document.getById(c+"_"+this.name))},a.application.prototype.nJ=function(a){/^\d+$/.test(a)&&(a+="px"),this.layout.dV().setStyle("width",a),this.oW("resize"),this.layout.ea()},a.application.prototype.resize=function(a,b){this.element.getChild(0).setStyle("height",b+"px"),this.element.getChild(0).setStyle("width",a+"px")},function(){function f(a,b){for(var c=0,d=0,e=0;e<a.$.parentNode.childNodes.length;e++){var f=a.$.parentNode.childNodes[e];if(1==f.nodeType){var g=f==a.$;if(!f.offsetHeight&&!g)continue;d++,g||(c+=f.offsetHeight)}}var j=a.$.offsetHeight-a.$.clientHeight,k=(d-1)*b;!h.ie6Compat||h.ie8||h.ie7Compat||(k+=2*b);var l=i?a.$.parentNode.parentNode.parentNode.offsetHeight:a.$.parentNode.offsetHeight,m=l-j-c-(k||0);try{a.setStyle("height",m+"px")}catch(a){}}function g(b){return a.bs.substr(9*b%32,1)}var b="<div class='view tool_panel' style='padding:2px;display:block !important;position:static !important;color:black !important;background-color:white !important;'>",c="</div>",d=b+"This is the DEMO version of CKFinder. Please visit the <a href='http://cksource.com/ckfinder' target='_blank'>CKFinder web site</a> to obtain a valid license."+c,e=b+"CKFinder Developer License<br/>Licensed to: ";a.application.layout=function(a){this.app=d.length?a:null,this.jB=null},a.application.layout.prototype={ea:function(b){this.jB||(this.jB=k.setTimeout(function(){a.log("[THEME] Repainting layout");var c=a.bs.indexOf(a.bF.substr(1,1))%5,j=[a.bF.substr(8,1),a.bF.substr(6,1)],l=a.bF&&a.bF.substr(3,1)!=a.bs.substr(9*(a.bs.indexOf(a.bF.substr(0,1))+a.bs.indexOf(a.bF.substr(2,1)))%(a.bs.length-1),1),m=!!a.ed&&j[1]!=g(a.ed.length+a.bs.indexOf(j[0]));if(a.bF&&1==c&&a.lS(window.top[a.nd+"cation"][a.jG+"st"])!=a.lS(a.ed)||4==c||l){for(var n=this.dV().getChild(0).getChildren(),o=0,p=0;p<n.count();p++)"static"==n.getItem(p).rd("position")&&(o=1);o||this.dV().getChild(0).appendHtml(l||m||4!=c?d:e+"<b>"+k.htmlEncode(a.ed)+"</b></div>")}var q=this.pn(),r=this.pS(),s=a.skins.loaded[this.app.gd];if(s.ps&&i&&h.ie6Compat&&!h.ie8){var t=this.mB(),u=this.dV(),v=3*s.kN,w=s.rv?s.rv:0,x=this.oG.width-u.$.offsetWidth-v+w;t.setStyle("width",x+"px")}q&&f(q,s.mA),r&&f(r,s.kN),this.jB=null,b=!1,this.app.oW("afterRepaintLayout"),h.ie6Compat&&k.setTimeout(function(){this.app.element.$.style.cssText+=""},0,this)},!0===b?0:500,this))},dV:function(){var a=this;return a.kS||(a.kS=a.app.document.getById("sidebar_container")),a.kS},mB:function(){var a=this;return a.lb||(a.lb=a.app.document.getById("main_container")),a.lb},pS:function(){var a=this;return void 0===a.kK&&(a.kK=a.app.document.getById("folders_view")),a.kK},pn:function(){var a=this;return void 0===a.kD&&(a.kD=a.app.document.getById("files_view")),a.kD}}}()}();